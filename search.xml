<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>Intersection Observer API</title>
    <url>/blog/2020/11/17/Intersection%20Observer%20API/</url>
    <content><![CDATA[<p>IntersectionObserver API æä¾›äº†ä¸€ç§å¼‚æ­¥è§‚å¯Ÿç›®æ ‡å…ƒç´ ä¸å…¶ç¥–å…ˆå…ƒç´ æˆ–é¡¶çº§æ–‡æ¡£è§†çª—(viewport)äº¤å‰çŠ¶æ€çš„æ–¹æ³•</p>
<blockquote>
<p>fromï¼š MDN</p>
</blockquote>
<h3 id="ç¤ºä¾‹"><a href="#ç¤ºä¾‹" class="headerlink" title="ç¤ºä¾‹"></a>ç¤ºä¾‹</h3><p>é€šè¿‡ç›®æ ‡å…ƒç´ æ˜¯å¦åœ¨å¯è§†åŒºï¼Œæ¥å®ç°æ— é™æ»šåŠ¨</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> intersectionObserver = <span class="keyword">new</span> IntersectionObserver(<span class="function"><span class="keyword">function</span> (<span class="params">entries</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// intersectionRatio &lt;= 0ï¼Œ ç›®æ ‡å…ƒç´ ä¸åœ¨å¯è§†åŒºï¼Œä¹Ÿå°±æ˜¯çœ‹ä¸è§</span></span><br><span class="line">  <span class="keyword">if</span> (entries[<span class="number">0</span>].intersectionRatio &lt;= <span class="number">0</span>) <span class="keyword">return</span>;</span><br><span class="line">  <span class="comment">//</span></span><br><span class="line">  loadItems(<span class="number">10</span>);</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&quot;Loaded new items&quot;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// å¼€å§‹è§‚å¯Ÿå…ƒç´ </span></span><br><span class="line">intersectionObserver.observe(<span class="built_in">document</span>.querySelector(<span class="string">&quot;.scrollerFooter&quot;</span>));</span><br></pre></td></tr></table></figure>

<p>å‚æ•°</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> intersectionObserver = <span class="keyword">new</span> IntersectionObserver(callback, &#123;</span><br><span class="line">  threshold: [<span class="number">0.5</span>, <span class="number">1</span>], <span class="comment">// æŒ‡å®šé˜ˆå€¼æ—¶è§¦å‘</span></span><br><span class="line">  root: <span class="built_in">document</span>.querySelector(<span class="string">&quot;.scrollerFooter&quot;</span>), <span class="comment">// æŒ‡å®šroot</span></span><br><span class="line">  rootMargin: <span class="string">&quot;&quot;</span>, <span class="comment">// å¯æ§åˆ¶äº¤å‰åŒºåŸŸçš„å¤§å°</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h3 id="æ–¹æ³•"><a href="#æ–¹æ³•" class="headerlink" title="æ–¹æ³•"></a>æ–¹æ³•</h3><p>é€šè¿‡è§‚å¯Ÿå™¨çš„è¿”å›å€¼ï¼Œä½¿ç”¨ API æä¾›çš„æ–¹æ³•</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// è§‚å¯Ÿç›®æ ‡</span></span><br><span class="line">intersectionObserver.observe(<span class="built_in">document</span>.querySelector(<span class="string">&quot;.scrollerFooter&quot;</span>));</span><br><span class="line"><span class="comment">// å–æ¶ˆè§‚å¯Ÿï¼Œç‰¹å®šç›®æ ‡</span></span><br><span class="line">intersectionObserver.unobserve(<span class="built_in">document</span>.querySelector(<span class="string">&quot;.scrollerFooter&quot;</span>));</span><br><span class="line"><span class="comment">// è¿”å›ä»¥è§‚å¯Ÿç›®æ ‡</span></span><br><span class="line">intersectionObserver.takeRecords();</span><br><span class="line"><span class="comment">// åœæ­¢è§‚å¯Ÿï¼Œä¸éœ€è¦å‚æ•°</span></span><br><span class="line">intersectionObserver.disconnect();</span><br></pre></td></tr></table></figure>

<h3 id="å±æ€§"><a href="#å±æ€§" class="headerlink" title="å±æ€§"></a>å±æ€§</h3><p>å›è°ƒå‡½æ•°ä¸­ entries[] å±æ€§</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">boundingClientRect ç›®æ ‡çŸ©å½¢åŒºåŸŸä¿¡æ¯</span><br><span class="line">intersectionRatio ç›®æ ‡å…ƒç´ å¯è§æ¯”ä¾‹ï¼ŒintersectionRatio &#x3D;&#x3D; 1 å®Œå…¨å¯è§ï¼Œ intersectionRatio &lt;&#x3D; 0 ä¸åœ¨å¯è§†èŒƒå›´å†…</span><br><span class="line">intersectionRect ä¸è·ŸåŒºåŸŸç›¸äº¤éƒ¨åˆ†çš„ä¿¡æ¯ &#x2F;&#x2F; TODO</span><br><span class="line">rootBounds è·Ÿå…ƒç´ çš„çŸ©å½¢åŒºåŸŸä¿¡æ¯</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>web api</category>
      </categories>
  </entry>
  <entry>
    <title>babelç›¸å…³é—®é¢˜</title>
    <url>/blog/2020/11/06/babel%E7%9B%B8%E5%85%B3%E9%97%AE%E9%A2%98/</url>
    <content><![CDATA[<h3 id="ç¼–è¯‘æ—¶é‡åˆ°ä¸€äº›é—®é¢˜"><a href="#ç¼–è¯‘æ—¶é‡åˆ°ä¸€äº›é—®é¢˜" class="headerlink" title="ç¼–è¯‘æ—¶é‡åˆ°ä¸€äº›é—®é¢˜"></a>ç¼–è¯‘æ—¶é‡åˆ°ä¸€äº›é—®é¢˜</h3><p>ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ ç¼–è¯‘è£…é¥°å™¨æµ‹è¯• demoï¼Œé‡åˆ°é—®é¢˜</p>
<p>å‘½ä»¤</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npx babel .\decorators.js --out-dir ./dist/decorators</span><br></pre></td></tr></table></figure>

<p>é—®é¢˜</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">Support <span class="keyword">for</span> the experimental syntax <span class="string">&#x27;decorators-legacy&#x27;</span> isn<span class="string">&#x27;t currently enabled</span></span><br></pre></td></tr></table></figure>

<p>è§£å†³æ–¹æ³•</p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;presets&quot;</span>: [<span class="string">&quot;@babel/preset-env&quot;</span>],</span><br><span class="line">  <span class="attr">&quot;plugins&quot;</span>: [</span><br><span class="line">    ++ [<span class="string">&quot;@babel/plugin-proposal-decorators&quot;</span>, &#123; <span class="attr">&quot;legacy&quot;</span>: <span class="literal">true</span> &#125;],</span><br><span class="line">    ++ [<span class="string">&quot;@babel/plugin-proposal-class-properties&quot;</span>, &#123; <span class="attr">&quot;loose&quot;</span> : <span class="literal">true</span> &#125;]</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>å¦‚æœæƒ³æ”¯æŒè£…é¥°å™¨è¿˜éœ€è¦åˆ›å»º jsconfig.json æˆ– tsconfig.json é…ç½®æ–‡ä»¶ï¼Œå¹¶æ·»åŠ ä¸€ä¸‹é…ç½®</p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;compilerOptions&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;experimentalDecorators&quot;</span>: <span class="literal">true</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>q&amp;a</category>
      </categories>
      <tags>
        <tag>babel</tag>
      </tags>
  </entry>
  <entry>
    <title>gitå¸¸ç”¨æ“ä½œ</title>
    <url>/blog/2020/11/13/git%E5%B8%B8%E7%94%A8%E6%93%8D%E4%BD%9C/</url>
    <content><![CDATA[<h3 id="è·å–-git-ä»“åº“"><a href="#è·å–-git-ä»“åº“" class="headerlink" title="è·å– git ä»“åº“"></a>è·å– git ä»“åº“</h3><p>åœ¨å·²å­˜åœ¨çš„ç›®ä¸­ä¸­åˆå§‹åŒ–ä»“åº“</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ git init</span><br><span class="line">$ git add *.c</span><br><span class="line">$ git add LICENSE</span><br><span class="line">$ git commit -m <span class="string">&#x27;initial project version&#x27;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>å…‹éš†ç°æœ‰ä»“åº“</p>
<p>è¯·ç•™å¿ƒä¸€ä¸‹ä½ æ‰€ä½¿ç”¨çš„å‘½ä»¤æ˜¯â€cloneâ€è€Œä¸æ˜¯â€checkoutâ€ã€‚ è¿™æ˜¯ Git åŒºåˆ«äºå…¶å®ƒç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿçš„ä¸€ä¸ªé‡è¦ç‰¹æ€§ï¼ŒGit å…‹éš†çš„æ˜¯è¯¥ Git ä»“åº“æœåŠ¡å™¨ä¸Šçš„å‡ ä¹æ‰€æœ‰æ•°æ®ï¼Œè€Œä¸æ˜¯ä»…ä»…å¤åˆ¶å®Œæˆä½ çš„å·¥ä½œæ‰€éœ€è¦æ–‡ä»¶ã€‚</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ git <span class="built_in">clone</span> https://github.com/libgit2/libgit2</span><br></pre></td></tr></table></figure>

<h3 id="è·Ÿè¸ªæ–°æ–‡ä»¶"><a href="#è·Ÿè¸ªæ–°æ–‡ä»¶" class="headerlink" title="è·Ÿè¸ªæ–°æ–‡ä»¶"></a>è·Ÿè¸ªæ–°æ–‡ä»¶</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># readme.mdæ–‡ä»¶æ—¶æ–°æ·»åŠ çš„æ–‡ä»¶ï¼Œ</span></span><br><span class="line"><span class="comment"># ä½¿ç”¨git addå‘½ä»¤å¯ä»¥è®©ä»–å˜ä¸ºæš‚å­˜çŠ¶æ€</span></span><br><span class="line">$ git add readme.md</span><br></pre></td></tr></table></figure>
<h3 id="ä¿®æ”¹æ–‡ä»¶å"><a href="#ä¿®æ”¹æ–‡ä»¶å" class="headerlink" title="ä¿®æ”¹æ–‡ä»¶å"></a>ä¿®æ”¹æ–‡ä»¶å</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git mv file file1</span><br></pre></td></tr></table></figure>

<h3 id="æ¯”å¯¹æ–‡ä»¶"><a href="#æ¯”å¯¹æ–‡ä»¶" class="headerlink" title="æ¯”å¯¹æ–‡ä»¶"></a>æ¯”å¯¹æ–‡ä»¶</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># æ¯”å¯¹æœ¬åœ°æ–‡ä»¶å’Œæš‚å­˜åŒºçš„åŒºåˆ«</span></span><br><span class="line">&gt; git diff file file1</span><br></pre></td></tr></table></figure>

<p>æ¯”å¯¹æš‚å­˜åŒºå’Œæœ¬åœ°ä»“åº“æ–‡ä»¶çš„åŒºåˆ«</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># æ¯”å¯¹æš‚å­˜åŒºå’Œæœ¬åœ°ä»“åº“æ–‡ä»¶çš„åŒºåˆ«</span></span><br><span class="line">&gt; git diff --cached file1</span><br><span class="line"></span><br><span class="line">diff --git a/demo/test2.js b/demo/test2.js</span><br><span class="line">+++ b/demo/test2.js</span><br><span class="line">@@ -1 +1,2 @@</span><br><span class="line">-console.log(<span class="string">&quot;hello world&quot;</span>)</span><br><span class="line">\ No newline at end of file</span><br><span class="line">+console.log(<span class="string">&quot;hello world&quot;</span>)</span><br><span class="line">+console.log(<span class="string">&quot;add content&quot;</span>)</span><br></pre></td></tr></table></figure>

<h3 id="æäº¤"><a href="#æäº¤" class="headerlink" title="æäº¤"></a>æäº¤</h3><p>ä»æš‚å­˜åŒºå­˜åˆ°æœ¬åœ°ä»“åº“ã€‚æ¯æ¬¡ commit éƒ½ä¼šå¯¹æäº¤çš„æ–‡ä»¶åšä¸€æ¬¡å¿«ç…§</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git commit -m <span class="string">&quot;æäº¤è®°å½•&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æœ¬æ¬¡ä¿®æ”¹åˆå¹¶åˆ°ä¸Šæ¬¡æäº¤</span></span><br><span class="line">git commit --amend -m <span class="string">&quot;æäº¤è®°å½•ä¿®æ”¹&quot;</span></span><br><span class="line"><span class="comment"># ç›´æ¥åˆå¹¶åˆ°ä¸Šæ¬¡æäº¤ï¼Œä¸æ‰“å¼€ç¼–è¾‘å™¨</span></span><br><span class="line">git commit --amend --no-edit </span><br><span class="line"><span class="comment"># git add æš‚å­˜ä¹‹åä½¿ç”¨å‘½ä»¤å–æ¶ˆæš‚å­˜</span></span><br><span class="line">git reset head files/1.js</span><br></pre></td></tr></table></figure>

<h3 id="æäº¤è®°å½•"><a href="#æäº¤è®°å½•" class="headerlink" title="æäº¤è®°å½•"></a>æäº¤è®°å½•</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># æäº¤æ—¥å¿—</span></span><br><span class="line">&gt; git <span class="built_in">log</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># å”¯ä¸€å“ˆå¸Œå€¼</span></span><br><span class="line">commit f473064e538bf9894d501e077aa1a394ead1f1e3 (HEAD -&gt; master, blob/master)</span><br><span class="line"><span class="comment"># ä½œè€…ä¸ªäººä¿¡æ¯</span></span><br><span class="line">Author: liyq &lt;lyqhn2012@outlook.com&gt;</span><br><span class="line">Date:   Wed Nov 11 14:20:36 2020 +0800</span><br><span class="line">    <span class="comment"># å¤‡æ³¨</span></span><br><span class="line">    add åŠ¨æ€è§„åˆ’</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># æ¢å¤å†å²è®°å½•</span></span><br><span class="line">&gt; git reflog</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># ä¸€è¡Œæ˜¾ç¤º</span></span><br><span class="line">&gt; git <span class="built_in">log</span> --oneline</span><br><span class="line"></span><br><span class="line">PS E:\æ–‡æ¡£\Projects\MyBlob\hexo-blob\demo&gt; git <span class="built_in">log</span> --oneline</span><br><span class="line">f473064 (HEAD -&gt; master, blob/master) add åŠ¨æ€è§„åˆ’</span><br><span class="line">021d4e3 add æ’åºç®—æ³•</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ˜¾ç¤ºæœ€è¿‘ä¸¤æ¡è®°å½•çš„å·®å¼‚</span></span><br><span class="line">&gt; git <span class="built_in">log</span> -p -2</span><br><span class="line"></span><br></pre></td></tr></table></figure>


<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git <span class="built_in">log</span> --graph --pretty=oneline --abbrev-commit</span><br><span class="line"></span><br><span class="line">* 4439021 build</span><br><span class="line">*   24abb67 Merge branch <span class="string">&#x27;master&#x27;</span> of http://gitlab.com/system</span><br><span class="line">|\</span><br><span class="line">| * e14140c add åˆ—è¡¨</span><br><span class="line">* | e78fb16 .</span><br><span class="line">|/</span><br><span class="line">* a8ae400 build hetong</span><br><span class="line">* 2345733 ä¿®æ”¹</span><br><span class="line">* 1ed693d build</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆå¹¶æäº¤è®°å½•</span></span><br><span class="line">git rebase -i head~3</span><br><span class="line"></span><br><span class="line">git rebase master dev</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="æ–‡ä»¶å›é€€"><a href="#æ–‡ä»¶å›é€€" class="headerlink" title="æ–‡ä»¶å›é€€"></a>æ–‡ä»¶å›é€€</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># æäº¤æ–‡ä»¶åˆ°æš‚å­˜åŒº</span></span><br><span class="line">git add file2.js</span><br><span class="line"><span class="comment"># å–æ¶ˆæš‚å­˜ã€‚</span></span><br><span class="line">git restore --staged .\test2.js</span><br><span class="line"><span class="comment"># æ¢å¤æ–‡ä»¶ã€‚æ’¤é”€ä¿®æ”¹</span></span><br><span class="line">git restore .\test2.js</span><br><span class="line"><span class="comment"># ä»æœ¬åœ°ä»“åº“æ¢å¤æ–‡ä»¶test2.js</span></span><br><span class="line">git checkout .\test2.js</span><br></pre></td></tr></table></figure>

<p>å¤šæ¬¡æäº¤å›é€€</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># æ¨¡æ‹Ÿå¤šæ¬¡æäº¤</span></span><br><span class="line">&gt; git commit -m <span class="string">&quot;ç¬¬1æ¬¡æäº¤&quot;</span></span><br><span class="line">&gt; git commit -m <span class="string">&quot;ç¬¬2æ¬¡æäº¤&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 1. æŸ¥çœ‹log</span></span><br><span class="line">&gt; git <span class="built_in">log</span> --oneline .\test2.js</span><br><span class="line"></span><br><span class="line">5e97611 (HEAD -&gt; master) ç¬¬äºŒæ¬¡æäº¤</span><br><span class="line">4f68102 <span class="built_in">test</span></span><br><span class="line">0263eaf æäº¤</span><br><span class="line"></span><br><span class="line"><span class="comment"># 2. æ¢å¤</span></span><br><span class="line">git reset --hard 0263eaf</span><br></pre></td></tr></table></figure>

<h3 id="æ ‡ç­¾"><a href="#æ ‡ç­¾" class="headerlink" title="æ ‡ç­¾"></a>æ ‡ç­¾</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># æ·»åŠ æ ‡ç­¾</span></span><br><span class="line">git tag -a <span class="string">&quot;v1.0&quot;</span> -m <span class="string">&quot;æ ‡ç­¾ä¿¡æ¯&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æŸ¥çœ‹æ ‡ç­¾</span></span><br><span class="line">git tag</span><br><span class="line">git show v1.o</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ é™¤æ ‡ç­¾</span></span><br><span class="line">git tag v1.0 -d</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç»™æŸä¸€æ¬¡æäº¤æ·»åŠ æ–°æ ‡ç­¾</span></span><br><span class="line">git <span class="built_in">log</span> --oneline</span><br><span class="line">git tag -a <span class="string">&quot;v1.0.2&quot;</span> [æäº¤ID] -m <span class="string">&quot;æ ‡ç­¾ä¿¡æ¯&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ‡æ¢åˆ°æ ‡ç­¾</span></span><br><span class="line">git tag [tagName]</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ¨é€æ ‡ç­¾</span></span><br><span class="line">git push origin --tags</span><br><span class="line">git push origin [tagName]</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ é™¤tag</span></span><br><span class="line">git tag -d [tagName]</span><br><span class="line"><span class="comment"># åˆ é™¤æœ¬åœ°tag åˆ é™¤è¿œç¨‹tag</span></span><br><span class="line">git push origin :refs/tags/[tagName]</span><br><span class="line"></span><br><span class="line">git push origin --delete &lt;tagname&gt;</span><br></pre></td></tr></table></figure>

<h3 id="æš‚å­˜"><a href="#æš‚å­˜" class="headerlink" title="æš‚å­˜"></a>æš‚å­˜</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># æ‰§è¡Œå®Œæ›´æ”¹æ¶ˆå¤±äº†</span></span><br><span class="line">git stash push -m <span class="string">&quot;æ›´æ”¹äº†æŸäº›ä¸œè¥¿&quot;</span></span><br><span class="line"><span class="comment"># é€šè¿‡git stash list æŸ¥çœ‹å·²ä¿å­˜çš„æš‚å­˜åˆ—è¡¨</span></span><br><span class="line">git stash list</span><br><span class="line"><span class="comment"># æ¢å¤statshä¿å­˜çš„å†…å®¹</span></span><br><span class="line">git stash pop</span><br><span class="line"><span class="comment"># æ¢å¤idä¸ºstash@&#123;0&#125;çš„æ•°æ®ï¼Œä½†æ˜¯ä¸ä»stashåˆ—è¡¨ä¸­åˆ é™¤</span></span><br><span class="line">git stash apply stash@&#123;0&#125;</span><br></pre></td></tr></table></figure>

<h3 id="åˆ é™¤æ–‡ä»¶"><a href="#åˆ é™¤æ–‡ä»¶" class="headerlink" title="åˆ é™¤æ–‡ä»¶"></a>åˆ é™¤æ–‡ä»¶</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># åˆ é™¤æ–‡ä»¶file</span></span><br><span class="line">git rm [file]</span><br><span class="line"><span class="comment"># ç£ç›˜ä¸Šå­˜åœ¨ï¼Œä½†æ˜¯ä¸å†è·Ÿè¸ªæ–‡ä»¶</span></span><br><span class="line">git rm --cached [file]</span><br><span class="line"><span class="comment"># åˆ é™¤filesæ–‡ä»¶å¤¹ä¸‹æ‰€æœ‰æ–‡ä»¶</span></span><br><span class="line">git rm .\files\*</span><br><span class="line">git rm --cached .\files\*</span><br></pre></td></tr></table></figure>

<h3 id="å¿½ç•¥æ–‡ä»¶"><a href="#å¿½ç•¥æ–‡ä»¶" class="headerlink" title="å¿½ç•¥æ–‡ä»¶"></a>å¿½ç•¥æ–‡ä»¶</h3><p>æ–°å»ºæ–‡ä»¶ .gitignoreï¼Œåˆ—å‡ºè¦å¿½ç•¥çš„æ–‡ä»¶</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># å¿½ç•¥æ‰€æœ‰çš„ .a æ–‡ä»¶</span><br><span class="line">*.a</span><br><span class="line"></span><br><span class="line"># ä½†è·Ÿè¸ªæ‰€æœ‰çš„ lib.aï¼Œå³ä¾¿ä½ åœ¨å‰é¢å¿½ç•¥äº† .a æ–‡ä»¶</span><br><span class="line">!lib.a</span><br><span class="line"></span><br><span class="line"># åªå¿½ç•¥å½“å‰ç›®å½•ä¸‹çš„ TODO æ–‡ä»¶ï¼Œè€Œä¸å¿½ç•¥ subdir&#x2F;TODO</span><br><span class="line">&#x2F;TODO</span><br><span class="line"></span><br><span class="line"># å¿½ç•¥ä»»ä½•ç›®å½•ä¸‹åä¸º build çš„æ–‡ä»¶å¤¹</span><br><span class="line">build&#x2F;</span><br><span class="line"></span><br><span class="line"># å¿½ç•¥ doc&#x2F;notes.txtï¼Œä½†ä¸å¿½ç•¥ doc&#x2F;server&#x2F;arch.txt</span><br><span class="line">doc&#x2F;*.txt</span><br><span class="line"></span><br><span class="line"># å¿½ç•¥ doc&#x2F; ç›®å½•åŠå…¶æ‰€æœ‰å­ç›®å½•ä¸‹çš„ .pdf æ–‡ä»¶</span><br><span class="line">doc&#x2F;**&#x2F;*.pdf</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      <tags>
        <tag>git</tag>
      </tags>
  </entry>
  <entry>
    <title>es6</title>
    <url>/blog/2020/11/06/es6/</url>
    <content><![CDATA[<blockquote>
<p>å·¥å…·åº“å°½é‡å‘½åæ–¹å¼å¯¼å‡ºï¼Œä¸è¦ä½¿ç”¨å¯¹è±¡å¯¼å‡ºã€‚å¯¹è±¡åœ¨ç¼–è¯‘çš„æ—¶å€™ä¸èƒ½è¢«ä¼˜åŒ–æ‰</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// utils.js right</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> request = <span class="function">(<span class="params">params</span>) =&gt;</span> &#123;&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> debounce = <span class="function">(<span class="params">time</span>) =&gt;</span> &#123;&#125;;</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// utils.js wrong</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> utils = &#123;</span><br><span class="line"></span><br><span class="line">  request:<span class="function">(<span class="params">params</span>) =&gt;</span> &#123;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  debounce:<span class="function">(<span class="params">time</span>) =&gt;</span> &#123;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
  </entry>
  <entry>
    <title>CSSå‚è€ƒ</title>
    <url>/blog/2020/11/03/CSS%E5%8F%82%E8%80%83/</url>
    <content><![CDATA[<h3 id="var"><a href="#var" class="headerlink" title="var()"></a>var()</h3><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* å®šä¹‰ä¸€ä¸ªåä¸º &quot;--main-bg-color&quot; çš„å±æ€§ï¼Œç„¶åä½¿ç”¨ var() å‡½æ•°è°ƒç”¨è¯¥å±æ€§ï¼š */</span></span><br><span class="line"><span class="selector-pseudo">:root</span> &#123;</span><br><span class="line">  <span class="attribute">--main-bg-color</span>: coral;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#div1</span> &#123;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="built_in">var</span>(--main-bg-color);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#div2</span> &#123;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="built_in">var</span>(--main-bg-color);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="linear-gradient-çº¿æ€§æ¸å˜"><a href="#linear-gradient-çº¿æ€§æ¸å˜" class="headerlink" title="linear-gradient() çº¿æ€§æ¸å˜"></a>linear-gradient() çº¿æ€§æ¸å˜</h3><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* ä»å¤´éƒ¨å¼€å§‹çš„çº¿æ€§æ¸å˜ï¼Œä»çº¢è‰²å¼€å§‹ï¼Œè½¬ä¸ºé»„è‰²ï¼Œå†åˆ°è“è‰²ï¼š */</span></span><br><span class="line"><span class="selector-id">#grad</span> &#123;</span><br><span class="line">  <span class="attribute">background-image</span>: <span class="built_in">linear-gradient</span>(red, yellow, blue);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* ä»ä¸Šåˆ°ä¸‹ï¼Œè“è‰²æ¸å˜åˆ°çº¢è‰² */</span></span><br><span class="line"><span class="selector-tag">linear-gradient</span>(45<span class="selector-tag">deg</span>, <span class="selector-tag">blue</span>, <span class="selector-tag">red</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">/* æ¸å˜è½´ä¸º45åº¦ï¼Œä»è“è‰²æ¸å˜åˆ°çº¢è‰² */</span></span><br><span class="line"><span class="selector-tag">linear-gradient</span>(45<span class="selector-tag">deg</span>, <span class="selector-tag">blue</span>, <span class="selector-tag">red</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">/* ä»å³ä¸‹åˆ°å·¦ä¸Šã€ä»è“è‰²æ¸å˜åˆ°çº¢è‰² */</span></span><br><span class="line"><span class="selector-tag">linear-gradient</span>(<span class="selector-tag">to</span> <span class="selector-tag">left</span> <span class="selector-tag">top</span>, <span class="selector-tag">blue</span>, <span class="selector-tag">red</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">/* ä»ä¸‹åˆ°ä¸Šï¼Œä»è“è‰²å¼€å§‹æ¸å˜ã€åˆ°é«˜åº¦40%ä½ç½®æ˜¯ç»¿è‰²æ¸å˜å¼€å§‹ã€æœ€åä»¥çº¢è‰²ç»“æŸ */</span></span><br><span class="line"><span class="selector-tag">linear-gradient</span>(0<span class="selector-tag">deg</span>, <span class="selector-tag">blue</span>, <span class="selector-tag">green</span> 40%, <span class="selector-tag">red</span>);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="counter-è®¡æ•°å™¨"><a href="#counter-è®¡æ•°å™¨" class="headerlink" title="counter() è®¡æ•°å™¨"></a>counter() è®¡æ•°å™¨</h3><p>counter-reset: [è®¡æ•°å™¨åç§°]<br>counter(è®¡æ•°å™¨åç§°);</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line">  ol &#123;</span><br><span class="line">    counter-reset: list;</span><br><span class="line">  &#125;</span><br><span class="line">  li &#123;</span><br><span class="line">    counter-increment: list;</span><br><span class="line">  &#125;</span><br><span class="line"><span class="css">  <span class="selector-tag">li</span><span class="selector-pseudo">::after</span> &#123;</span></span><br><span class="line">    content: &#x27;---- â™¥&#x27; counter(list);</span><br><span class="line">  &#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">ol</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>1<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>2<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>3<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>4<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>5<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">ol</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>
<img src="/blog/2020/11/03/CSS%E5%8F%82%E8%80%83/counter.png" class>

<h3 id="é€‰æ‹©å™¨"><a href="#é€‰æ‹©å™¨" class="headerlink" title="é€‰æ‹©å™¨"></a>é€‰æ‹©å™¨</h3><p>:defined</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* é€‰æ‹©æ‰€æœ‰å·²å®šä¹‰çš„å…ƒç´  */</span></span><br><span class="line"><span class="selector-pseudo">:defined</span> &#123;</span><br><span class="line">  <span class="attribute">font-style</span>: italic;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* é€‰æ‹©æŒ‡å®šè‡ªå®šä¹‰å…ƒç´ çš„ä»»ä½•å®ä¾‹ */</span></span><br><span class="line"><span class="selector-tag">simple-custom</span><span class="selector-pseudo">:defined</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: block;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>::marker</p>
<p>css ä¼ªå…ƒç´ ï¼Œåªèƒ½åœ¨è¢«å®šä¹‰ä¸º display: list-item; çš„å…ƒç´ ä¸Šä½¿ç”¨ã€‚<br>åœ¨ marker é‡Œé¢å¯ä»¥ä½¿ç”¨çš„å±æ€§æœ‰ï¼š</p>
<ol>
<li>å­—ä½“å±æ€§</li>
<li>color</li>
<li>text-combine-upright</li>
<li>content</li>
</ol>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- å¦‚ä¸‹å›¾æ˜¾ç¤ºæ•ˆæœ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line">  h1 &#123;</span><br><span class="line">    display: list-item;</span><br><span class="line">  &#125;</span><br><span class="line"><span class="css">  <span class="selector-tag">h1</span><span class="selector-pseudo">::marker</span> &#123;</span></span><br><span class="line">    content: &#x27;ğŸ§¡&#x27;;</span><br><span class="line">  &#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">h1</span>&gt;</span>Hello Marker<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>

<img src="/blog/2020/11/03/CSS%E5%8F%82%E8%80%83/marker.png" class>
]]></content>
      <categories>
        <category>å‰ç«¯</category>
      </categories>
      <tags>
        <tag>css</tag>
      </tags>
  </entry>
  <entry>
    <title>htmlæ€»ç»“</title>
    <url>/blog/2020/10/29/html%E6%80%BB%E7%BB%93/</url>
    <content><![CDATA[<h3 id="html-è¯­ä¹‰åŒ–"><a href="#html-è¯­ä¹‰åŒ–" class="headerlink" title="html è¯­ä¹‰åŒ–"></a>html è¯­ä¹‰åŒ–</h3><ol>
<li>ä»£ç ç»“æ„æ¸…æ™°</li>
<li>æœ‰åˆ©äºæœç´¢å¼•æ“ä¼˜åŒ– SEO</li>
</ol>
<h3 id="BFC"><a href="#BFC" class="headerlink" title="BFC"></a>BFC</h3><p>Block format context å—çº§æ ¼å¼åŒ–ä¸Šä¸‹æ–‡, ä¸€å—ç‹¬ç«‹æ¸²æŸ“åŒºåŸŸï¼Œå†…éƒ¨å…ƒç´ çš„æ¸²æŸ“ä¸ä¼šå½±å“è¾¹ç•Œä»¥å¤–çš„å…ƒç´ </p>
<blockquote>
<p><b>å¦‚ä½•ç”Ÿæˆ BFC</b></p>
</blockquote>
<ol>
<li>float ä¸æ˜¯ none</li>
<li>display æ˜¯ inline-blockã€table-cellã€flexã€table-caption æˆ–è€… inline-flex</li>
<li>position æ˜¯ absolute æˆ– fixed</li>
<li>overflow ä¸æ˜¯ visible</li>
</ol>
<blockquote>
<p><b>BFC ç‰¹æ€§</b></p>
</blockquote>
<ol>
<li>ä½¿å†…éƒ¨æµ®åŠ¨ä¸ä¼šè¶Šå‡ºè¾¹ç•Œ</li>
<li>ç›¸é‚»æµ®åŠ¨å…ƒç´ äº§ç”Ÿè¾¹ç•Œ</li>
</ol>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;ie=edge&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>BFC<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h3</span>&gt;</span>ä½¿å†…éƒ¨æµ®åŠ¨ä¸ä¼šè¶Šå‡ºè¾¹ç•Œ<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;border: 1px solid #000;overflow: hidden;&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span></span></span><br><span class="line"><span class="tag">        <span class="attr">style</span>=<span class="string">&quot;width: 100px; height: 100px; background: #eee; float: left&quot;</span></span></span><br><span class="line"><span class="tag">      &gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h3</span>&gt;</span>ç›¸é‚»æµ®åŠ¨å…ƒç´ äº§ç”Ÿè¾¹ç•Œ<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;container2&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span></span></span><br><span class="line"><span class="tag">        <span class="attr">style</span>=<span class="string">&quot;height: 100px; width: 100px; float: left; background: lightblue&quot;</span></span></span><br><span class="line"><span class="tag">      &gt;</span></span><br><span class="line">        æˆ‘æ˜¯ä¸€ä¸ªå·¦æµ®åŠ¨çš„å…ƒç´ </span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span></span></span><br><span class="line"><span class="tag">        <span class="attr">style</span>=<span class="string">&quot;width: 200px; height: 200px; background: #eee; overflow: hidden;&quot;</span></span></span><br><span class="line"><span class="tag">      &gt;</span></span><br><span class="line">        æˆ‘æ˜¯ä¸€ä¸ªæ²¡æœ‰è®¾ç½®æµ®åŠ¨, ä¹Ÿæ²¡æœ‰è§¦å‘ BFC å…ƒç´ , width: 200px; height:200px;</span><br><span class="line">        background: #eee;</span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="margin-è´Ÿå€¼"><a href="#margin-è´Ÿå€¼" class="headerlink" title="margin è´Ÿå€¼"></a>margin è´Ÿå€¼</h3><ul>
<li>margin-topï¼Œmargin-left è´Ÿå€¼ï¼Œå…ƒç´ å‘ä¸Šï¼Œå‘å·¦ç§»åŠ¨</li>
<li>margin-right è´Ÿå€¼ï¼Œå³ä¾§å…ƒç´ å·¦ç§»ï¼Œè‡ªèº«ä¸å—å½±å“</li>
<li>margin-bottom è´Ÿå€¼ï¼Œä¸‹æ–¹å…ƒç´ ä¸Šç§»ï¼Œè‡ªèº«ä¸å—å½±å“</li>
</ul>
<h3 id="åœ£æ¯å¸ƒå±€"><a href="#åœ£æ¯å¸ƒå±€" class="headerlink" title="åœ£æ¯å¸ƒå±€"></a>åœ£æ¯å¸ƒå±€</h3><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;ie=edge&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>åœ£æ¯å¸ƒå±€<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="css">      <span class="selector-class">.row</span> &#123;</span></span><br><span class="line">        position: relative;</span><br><span class="line">        float: left;</span><br><span class="line">        text-align: center;</span><br><span class="line">        height: 300px;</span><br><span class="line">        line-height: 300px;</span><br><span class="line">      &#125;</span><br><span class="line"><span class="css">      <span class="selector-class">.container</span> <span class="selector-class">.header</span>,</span></span><br><span class="line"><span class="css">      <span class="selector-class">.container</span> <span class="selector-class">.footer</span> &#123;</span></span><br><span class="line"><span class="css">        <span class="selector-tag">background</span>: <span class="selector-tag">rgba</span>(29, 27, 27, 0<span class="selector-class">.726</span>);</span></span><br><span class="line">        text-align: center;</span><br><span class="line">        height: 60px;</span><br><span class="line">        line-height: 60px;</span><br><span class="line">      &#125;</span><br><span class="line"><span class="css">      <span class="selector-class">.container</span> <span class="selector-class">.content</span> &#123;</span></span><br><span class="line">        padding-left: 150px;</span><br><span class="line">        padding-right: 200px;</span><br><span class="line">      &#125;</span><br><span class="line"><span class="css">      <span class="selector-class">.content</span> <span class="selector-class">.center</span> &#123;</span></span><br><span class="line">        width: 100%;</span><br><span class="line">      &#125;</span><br><span class="line"><span class="css">      <span class="selector-class">.content</span> <span class="selector-class">.left</span> &#123;</span></span><br><span class="line">        width: 150px;</span><br><span class="line">        right: 150px;</span><br><span class="line">        margin-left: -100%;</span><br><span class="line"><span class="css">        <span class="selector-tag">background-color</span>: <span class="selector-id">#cccccc</span>;</span></span><br><span class="line">      &#125;</span><br><span class="line"><span class="css">      <span class="selector-class">.content</span> <span class="selector-class">.right</span> &#123;</span></span><br><span class="line">        width: 200px;</span><br><span class="line">        margin-right: -200px;</span><br><span class="line"><span class="css">        <span class="selector-tag">background-color</span>: <span class="selector-id">#cccccc</span>;</span></span><br><span class="line">      &#125;</span><br><span class="line"><span class="css">      <span class="selector-class">.clearfix</span><span class="selector-pseudo">::after</span> &#123;</span></span><br><span class="line">        content: &quot;&quot;;</span><br><span class="line">        clear: both;</span><br><span class="line">        display: table;</span><br><span class="line">      &#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;container&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;header&quot;</span>&gt;</span>header<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;content clearfix&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;center row&quot;</span>&gt;</span>center<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;left row&quot;</span>&gt;</span>left<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;right row&quot;</span>&gt;</span>right<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;footer&quot;</span>&gt;</span>footer<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>å‰ç«¯</category>
      </categories>
      <tags>
        <tag>HTML</tag>
        <tag>å‰ç«¯</tag>
      </tags>
  </entry>
  <entry>
    <title>jsè£…é¥°å™¨-decorators</title>
    <url>/blog/2020/11/06/js%E8%A3%85%E9%A5%B0%E5%99%A8-decorators/</url>
    <content><![CDATA[<h3 id="å®‰è£…-babel-è½¬è¯‘æ”¯æŒ"><a href="#å®‰è£…-babel-è½¬è¯‘æ”¯æŒ" class="headerlink" title="å®‰è£… babel è½¬è¯‘æ”¯æŒ"></a>å®‰è£… babel è½¬è¯‘æ”¯æŒ</h3><ol>
<li>å®‰è£… babel ç¼–è¯‘å™¨</li>
</ol>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">npm install --save-dev @babel&#x2F;cli</span><br><span class="line">npm install --save-dev @babel&#x2F;core</span><br><span class="line">npm install --save-dev @babel&#x2F;plugin-proposal-class-properties</span><br><span class="line">npm install --save-dev @babel&#x2F;preset-env</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>æ·»åŠ é…ç½®æ–‡ä»¶[.babelrc]</li>
</ol>
<blockquote>
<p>æ³¨æ„é…ç½®ä¸­æ’ä»¶çš„ä½ç½®</p>
</blockquote>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;presets&quot;</span>: [<span class="string">&quot;@babel/preset-env&quot;</span>],</span><br><span class="line">  <span class="attr">&quot;plugins&quot;</span>: [</span><br><span class="line">    [<span class="string">&quot;@babel/plugin-proposal-decorators&quot;</span>, &#123; <span class="attr">&quot;legacy&quot;</span>: <span class="literal">true</span> &#125;],</span><br><span class="line">    [<span class="string">&quot;@babel/plugin-proposal-class-properties&quot;</span>, &#123; <span class="attr">&quot;loose&quot;</span>: <span class="literal">true</span> &#125;]</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>æ‰‹åŠ¨ç¼–è¯‘æ–¹æ³•</li>
</ol>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npx babel [æµ‹è¯•æ–‡ä»¶ç›¸å¯¹è·¯å¾„] --out-dir [è¾“å‡ºä½ç½®]</span><br></pre></td></tr></table></figure>

<h3 id="ç±»è£…é¥°å™¨"><a href="#ç±»è£…é¥°å™¨" class="headerlink" title="ç±»è£…é¥°å™¨"></a>ç±»è£…é¥°å™¨</h3><p>å¯¹ç±»è¿›è¡Œæ“ä½œï¼Œtarget å‚æ•°æ˜¯ç±»æœ¬èº«</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> itemFy = <span class="function">(<span class="params">target</span>) =&gt;</span> &#123;</span><br><span class="line">  target.prototype.click = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;click&quot;</span>);</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">@itemFy</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyComponent</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="title">render</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;&lt;div&gt;&lt;/div&gt;&quot;</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> comp = <span class="keyword">new</span> MyComponent();</span><br><span class="line"></span><br><span class="line">comp.click(); <span class="comment">// log: click</span></span><br></pre></td></tr></table></figure>

<h3 id="å±æ€§è£…é¥°å™¨"><a href="#å±æ€§è£…é¥°å™¨" class="headerlink" title="å±æ€§è£…é¥°å™¨"></a>å±æ€§è£…é¥°å™¨</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> itemPropFy = <span class="function">(<span class="params">targetPrototype, propName</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">let</span> originRender = targetPrototype.render;</span><br><span class="line">  targetPrototype.render = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">`&lt;div class=&quot;outer&quot;&gt;<span class="subst">$&#123;originRender.call(<span class="built_in">this</span>)&#125;</span>&lt;/div&gt;`</span>;</span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="comment">// æ³¨æ„è¿”å›å€¼</span></span><br><span class="line">  <span class="keyword">return</span> targetPrototype;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyComponent</span> </span>&#123;</span><br><span class="line">  @itemPropFy</span><br><span class="line">  <span class="function"><span class="title">render</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;&lt;div&gt;å†…å®¹&lt;/div&gt;&quot;</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> comp = <span class="keyword">new</span> MyComponent();</span><br><span class="line"><span class="built_in">console</span>.log(comp.render()); <span class="comment">// &lt;div class=&quot;outer&quot;&gt;&lt;div&gt;å†…å®¹&lt;/div&gt;&lt;/div&gt;</span></span><br></pre></td></tr></table></figure>

<p>å¸¦å‚è£…é¥°å™¨</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> updateText = <span class="function">(<span class="params">content</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="function">(<span class="params">targetPrototype, propName</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> (targetPrototype[propName] = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> content;</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyComponent</span> </span>&#123;</span><br><span class="line">  @updateText(<span class="string">&quot;æˆ‘æ˜¯render&quot;</span>)</span><br><span class="line">  <span class="function"><span class="title">render</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  @updateText(<span class="string">&quot;æˆ‘æ˜¯renderTwo&quot;</span>)</span><br><span class="line">  <span class="function"><span class="title">renderTwo</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> comp = <span class="keyword">new</span> MyComponent();</span><br><span class="line"><span class="built_in">console</span>.log(comp.render());</span><br><span class="line"><span class="built_in">console</span>.log(comp.renderTwo());</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>babel</category>
      </categories>
      <tags>
        <tag>babel</tag>
        <tag>decorators</tag>
      </tags>
  </entry>
  <entry>
    <title>jsè®¾è®¡æ¨¡å¼</title>
    <url>/blog/2020/11/11/js%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/</url>
    <content><![CDATA[<h3 id="å•ä¾‹æ¨¡å¼"><a href="#å•ä¾‹æ¨¡å¼" class="headerlink" title="å•ä¾‹æ¨¡å¼"></a>å•ä¾‹æ¨¡å¼</h3><blockquote>
<p>å®ä¾‹å’Œæ–¹æ³•ç³…åˆåœ¨ä¸€èµ·ï¼Œä¸ç¬¦åˆå•ä¸€èŒè´£</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> Singleton = <span class="function"><span class="keyword">function</span> (<span class="params">name</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">this</span>.name = name;</span><br><span class="line">  <span class="built_in">this</span>.instance = <span class="literal">null</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">Singleton.prototype.getName = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&quot;name&quot;</span>);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">Singleton.getInstance = <span class="function"><span class="keyword">function</span> (<span class="params">name</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (!<span class="built_in">this</span>.instance) &#123;</span><br><span class="line">    <span class="built_in">this</span>.instance = <span class="keyword">new</span> Singleton(name);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">this</span>.instance;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> instance1 = Singleton.getInstance(<span class="string">&quot;a&quot;</span>);</span><br><span class="line"><span class="keyword">var</span> instance2 = Singleton.getInstance(<span class="string">&quot;b&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(instance1 === instance2); <span class="comment">// true</span></span><br></pre></td></tr></table></figure>

<p>ä»£ç†å•ä¾‹æ¨¡å¼</p>
<blockquote>
<p>ç¬¦åˆå•ä¸€èŒè´£</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> ProxySingleton = (<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> instance = <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params">name</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (!instance) &#123;</span><br><span class="line">      instance = <span class="keyword">new</span> Singleton(name);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> instance;</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;)();</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> Singleton = <span class="function"><span class="keyword">function</span> (<span class="params">name</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">this</span>.name = name;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">Singleton.prototype.getName = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="built_in">this</span>.name);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> a = ProxySingleton(<span class="string">&quot;a&quot;</span>);</span><br><span class="line"><span class="keyword">var</span> b = ProxySingleton(<span class="string">&quot;b&quot;</span>);</span><br><span class="line"></span><br><span class="line">a.getName(); <span class="comment">// a</span></span><br><span class="line">b.getName(); <span class="comment">// a</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(a === b);</span><br></pre></td></tr></table></figure>

<h3 id="å‘å¸ƒè®¢é˜…æ¨¡å¼"><a href="#å‘å¸ƒè®¢é˜…æ¨¡å¼" class="headerlink" title="å‘å¸ƒè®¢é˜…æ¨¡å¼"></a>å‘å¸ƒè®¢é˜…æ¨¡å¼</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Observable</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="title">constructor</span>(<span class="params">subscriber</span>)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>._subscriber = subscriber;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="title">subscribe</span>(<span class="params">observer</span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> Subscription(observer, <span class="built_in">this</span>._subscriber);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Subscription</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="title">constructor</span>(<span class="params">observer, subscriber</span>)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>._subscriber = subscriber;</span><br><span class="line">    <span class="keyword">let</span> so = <span class="keyword">new</span> SubscriptionObserver(observer);</span><br><span class="line">    subscriber.call(<span class="literal">null</span>, so);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SubscriptionObserver</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="title">constructor</span>(<span class="params">observer</span>)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>._observer = observer;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="title">next</span>(<span class="params">value</span>)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>._observer.call(<span class="literal">null</span>, value);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> observable = <span class="keyword">new</span> Observable(<span class="function"><span class="keyword">function</span> (<span class="params">subscriber</span>) </span>&#123;</span><br><span class="line">  subscriber.next(<span class="string">&quot;a&quot;</span>);</span><br><span class="line">  subscriber.next(<span class="string">&quot;b&quot;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  observable.subscribe(<span class="function"><span class="keyword">function</span> (<span class="params">params</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;subscribe:&quot;</span>, params);</span><br><span class="line">  &#125;);</span><br><span class="line">  observable.subscribe(<span class="function"><span class="keyword">function</span> (<span class="params">params</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;subscribe2:&quot;</span>, params);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;, <span class="number">3000</span>);</span><br></pre></td></tr></table></figure>
]]></content>
  </entry>
  <entry>
    <title>leetcodeç®—æ³•æ€»ç»“</title>
    <url>/blog/2020/10/26/leetcode%E7%AE%97%E6%B3%95/</url>
    <content><![CDATA[<p>æ€»ç»“ leetcode ä¸Šå¯¹åº”é¢˜ç›®çš„ä¼˜ç§€ç®—æ³•ï¼Œç”¨æ¥å­¦ä¹ äº¤æµè¿›æ­¥</p>
<h3 id="åªå‡ºç°ä¸€æ¬¡çš„æ•°å­—"><a href="#åªå‡ºç°ä¸€æ¬¡çš„æ•°å­—" class="headerlink" title="åªå‡ºç°ä¸€æ¬¡çš„æ•°å­—"></a>åªå‡ºç°ä¸€æ¬¡çš„æ•°å­—</h3><p>ç»™å®šä¸€ä¸ªéç©ºæ•´æ•°æ•°ç»„ï¼Œé™¤äº†æŸä¸ªå…ƒç´ åªå‡ºç°ä¸€æ¬¡ä»¥å¤–ï¼Œå…¶ä½™æ¯ä¸ªå…ƒç´ å‡å‡ºç°ä¸¤æ¬¡ã€‚æ‰¾å‡ºé‚£ä¸ªåªå‡ºç°äº†ä¸€æ¬¡çš„å…ƒç´ ã€‚</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> singleNumber = <span class="function"><span class="keyword">function</span> (<span class="params">nums</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> ans = nums[<span class="number">0</span>];</span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">1</span>; i &lt; nums.length; i++) &#123;</span><br><span class="line">    ans = ans ^ nums[i];</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> ans;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>å¼‚æˆ–è¿ç®—æ³•åˆ™</p>
<blockquote>
<ol>
<li>å½’é›¶å¾‹ï¼ša âŠ• a = 0</li>
<li>æ’ç­‰å¾‹ï¼ša âŠ• 0 = a</li>
<li>äº¤æ¢å¾‹ï¼ša âŠ• b = b âŠ• a</li>
<li>ç»“åˆå¾‹ï¼ša âŠ•b âŠ• c = a âŠ• (b âŠ• c) = (a âŠ• b) âŠ• c;</li>
<li>è‡ªåï¼ša âŠ• b âŠ• a = b.</li>
<li>d = a âŠ• b âŠ• c å¯ä»¥æ¨å‡º a = d âŠ• b âŠ• c</li>
</ol>
</blockquote>
<h3 id="åŠ ä¸€"><a href="#åŠ ä¸€" class="headerlink" title="åŠ ä¸€"></a>åŠ ä¸€</h3><p>ç»™å®šä¸€ä¸ªç”±æ•´æ•°ç»„æˆçš„éç©ºæ•°ç»„æ‰€è¡¨ç¤ºçš„éè´Ÿæ•´æ•°ï¼Œåœ¨è¯¥æ•°çš„åŸºç¡€ä¸ŠåŠ ä¸€ã€‚æœ€é«˜ä½æ•°å­—å­˜æ”¾åœ¨æ•°ç»„çš„é¦–ä½ï¼Œ æ•°ç»„ä¸­æ¯ä¸ªå…ƒç´ åªå­˜å‚¨å•ä¸ªæ•°å­—ã€‚ä½ å¯ä»¥å‡è®¾é™¤äº†æ•´æ•° 0 ä¹‹å¤–ï¼Œè¿™ä¸ªæ•´æ•°ä¸ä¼šä»¥é›¶å¼€å¤´ã€‚</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> plusOne = <span class="function"><span class="keyword">function</span> (<span class="params">digits</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = digits.length - <span class="number">1</span>; i &gt;= <span class="number">0</span>; i--) &#123;</span><br><span class="line">    digits[i]++;</span><br><span class="line">    digits[i] = digits[i] % <span class="number">10</span>;</span><br><span class="line">    <span class="comment">// é™¤äº†99...ä¹‹å¤–çš„æƒ…å†µï¼Œå…¶ä»–éƒ½å¯ä»¥è‡ªåŠ¨åŠ 1è¿”å›</span></span><br><span class="line">    <span class="keyword">if</span> (digits[i] != <span class="number">0</span>) <span class="keyword">return</span> digits;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  digits = <span class="keyword">new</span> <span class="built_in">Array</span>(digits.length + <span class="number">1</span>).fill(<span class="number">0</span>);</span><br><span class="line">  digits[<span class="number">0</span>] = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> digits;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h3 id="ç§»åŠ¨-0"><a href="#ç§»åŠ¨-0" class="headerlink" title="ç§»åŠ¨ 0"></a>ç§»åŠ¨ 0</h3><p>ç»™å®šä¸€ä¸ªæ•°ç»„ numsï¼Œç¼–å†™ä¸€ä¸ªå‡½æ•°å°†æ‰€æœ‰ 0 ç§»åŠ¨åˆ°æ•°ç»„çš„æœ«å°¾ï¼ŒåŒæ—¶ä¿æŒéé›¶å…ƒç´ çš„ç›¸å¯¹é¡ºåº</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> moveZeroes = <span class="function"><span class="keyword">function</span> (<span class="params">nums</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// è®°å½•å½“å‰ä¸ä¸º0çš„ç´¢å¼•</span></span><br><span class="line">  <span class="keyword">let</span> current = <span class="number">0</span>;</span><br><span class="line">  <span class="comment">// å¦‚æœä¸ç­‰äº0ï¼Œæ”¾å…¥nums[current], currentåŠ 1</span></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; nums.length; i++) &#123;</span><br><span class="line">    <span class="keyword">if</span> (nums[i] !== <span class="number">0</span>) &#123;</span><br><span class="line">      nums[current++] = nums[i];</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// æ•°ç»„å‰©ä½™éƒ¨åˆ†å¡«å……0</span></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = current; i &lt; nums.length; i++) &#123;</span><br><span class="line">    nums[i] = <span class="number">0</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> nums;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h3 id="åˆ é™¤æ’åºæ•°ç»„ä¸­çš„é‡å¤é¡¹"><a href="#åˆ é™¤æ’åºæ•°ç»„ä¸­çš„é‡å¤é¡¹" class="headerlink" title="åˆ é™¤æ’åºæ•°ç»„ä¸­çš„é‡å¤é¡¹"></a>åˆ é™¤æ’åºæ•°ç»„ä¸­çš„é‡å¤é¡¹</h3><p>ç»™å®šä¸€ä¸ªæ’åºæ•°ç»„ï¼Œä½ éœ€è¦åœ¨ åŸåœ° åˆ é™¤é‡å¤å‡ºç°çš„å…ƒç´ ï¼Œä½¿å¾—æ¯ä¸ªå…ƒç´ åªå‡ºç°ä¸€æ¬¡ï¼Œè¿”å›ç§»é™¤åæ•°ç»„çš„æ–°é•¿åº¦ã€‚ä¸è¦ä½¿ç”¨é¢å¤–çš„æ•°ç»„ç©ºé—´ï¼Œä½ å¿…é¡»åœ¨ åŸåœ° ä¿®æ”¹è¾“å…¥æ•°ç»„ å¹¶åœ¨ä½¿ç”¨ O(1) é¢å¤–ç©ºé—´çš„æ¡ä»¶ä¸‹å®Œæˆã€‚</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// åŒæŒ‡é’ˆæ³•</span></span><br><span class="line"><span class="keyword">var</span> removeDuplicates = <span class="function"><span class="keyword">function</span> (<span class="params">nums</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (nums.length == <span class="number">0</span>) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">let</span> i = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> j = <span class="number">1</span>; j &lt; nums.length; j++) &#123;</span><br><span class="line">    <span class="keyword">if</span> (nums[j] != nums[i]) &#123;</span><br><span class="line">      i++;</span><br><span class="line">      nums[i] = nums[j];</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> i + <span class="number">1</span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h3 id="æ—‹è½¬æ•°ç»„"><a href="#æ—‹è½¬æ•°ç»„" class="headerlink" title="æ—‹è½¬æ•°ç»„"></a>æ—‹è½¬æ•°ç»„</h3><p>ç»™å®šä¸€ä¸ªæ•°ç»„ï¼Œå°†æ•°ç»„ä¸­çš„å…ƒç´ å‘å³ç§»åŠ¨ k ä¸ªä½ç½®ï¼Œå…¶ä¸­ k æ˜¯éè´Ÿæ•°</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// æ—‹è½¬æ•°ç»„ï¼Œä¸‰æ¬¡ç¿»è½¬</span></span><br><span class="line"><span class="keyword">var</span> rotate = <span class="function"><span class="keyword">function</span> (<span class="params">nums, k</span>) </span>&#123;</span><br><span class="line">  k %= nums.length;</span><br><span class="line">  <span class="comment">// 1. æ•´ä½“åè½¬</span></span><br><span class="line">  reverse(nums, <span class="number">0</span>, nums.length - <span class="number">1</span>);</span><br><span class="line">  <span class="comment">// 2. åè½¬å‰Kä¸ª</span></span><br><span class="line">  reverse(nums, <span class="number">0</span>, k - <span class="number">1</span>);</span><br><span class="line">  <span class="comment">// 3. åè½¬å n-k ä¸ªæ•°å­—</span></span><br><span class="line">  reverse(nums, k, nums.length - <span class="number">1</span>);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">reverse</span>(<span class="params">nums, start, end</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">while</span> (start &lt; end) &#123;</span><br><span class="line">    <span class="keyword">let</span> temp = nums[start];</span><br><span class="line">    nums[start] = nums[end];</span><br><span class="line">    nums[end] = temp;</span><br><span class="line">    start++;</span><br><span class="line">    end--;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="ä¸¤æ•°ä¹‹å’Œ"><a href="#ä¸¤æ•°ä¹‹å’Œ" class="headerlink" title="ä¸¤æ•°ä¹‹å’Œ"></a>ä¸¤æ•°ä¹‹å’Œ</h3><p>ç»™å®šä¸€ä¸ªæ•´æ•°æ•°ç»„ nums å’Œä¸€ä¸ªç›®æ ‡å€¼ targetï¼Œè¯·ä½ åœ¨è¯¥æ•°ç»„ä¸­æ‰¾å‡ºå’Œä¸ºç›®æ ‡å€¼çš„é‚£ ä¸¤ä¸ª æ•´æ•°ï¼Œå¹¶è¿”å›ä»–ä»¬çš„æ•°ç»„ä¸‹æ ‡</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> twoSum = <span class="function"><span class="keyword">function</span> (<span class="params">nums, target</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> map = <span class="keyword">new</span> <span class="built_in">Map</span>();</span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>, len = nums.length; i &lt; len; i++) &#123;</span><br><span class="line">    <span class="comment">// ç¬¦åˆæ¡ä»¶å–å‡ºå½“å‰å€¼ï¼Œè¿”å›</span></span><br><span class="line">    <span class="keyword">if</span> (map.has(target - nums[i])) &#123;</span><br><span class="line">      <span class="keyword">return</span> [map.get(target - nums[i]), i];</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="comment">// ä¸åŒ¹é…çš„å€¼å­˜å…¥mapä¸­ï¼Œ[key,value] = [æ•°ç»„å€¼ï¼Œç´¢å¼•]</span></span><br><span class="line">      map.set(nums[i], i);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h3 id="æ—‹è½¬æ•°ç»„-1"><a href="#æ—‹è½¬æ•°ç»„-1" class="headerlink" title="æ—‹è½¬æ•°ç»„"></a>æ—‹è½¬æ•°ç»„</h3><p>ç»™å®šä¸€ä¸ªæ•°ç»„ï¼Œå°†æ•°ç»„ä¸­çš„å…ƒç´ å‘å³ç§»åŠ¨ k ä¸ªä½ç½®ï¼Œå…¶ä¸­ k æ˜¯éè´Ÿæ•°</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> rotate = <span class="function"><span class="keyword">function</span> (<span class="params">nums, k</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// çµé­‚</span></span><br><span class="line">  k %= nums.length;</span><br><span class="line">  <span class="comment">// æ•´ä½“ç¿»è½¬</span></span><br><span class="line">  reverse(nums, <span class="number">0</span>, nums.length - <span class="number">1</span>);</span><br><span class="line">  <span class="comment">// ç¿»è½¬å‰Kä¸ªæ•°</span></span><br><span class="line">  reverse(nums, <span class="number">0</span>, k - <span class="number">1</span>);</span><br><span class="line">  <span class="comment">// ç¿»è½¬åKä¸ª</span></span><br><span class="line">  reverse(nums, k, nums.length - <span class="number">1</span>);</span><br><span class="line">  <span class="keyword">return</span> nums;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> reverse = <span class="function"><span class="keyword">function</span> (<span class="params">nums, fromIndex, endIndex</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">while</span> (fromIndex &lt; endIndex) &#123;</span><br><span class="line">    <span class="keyword">let</span> temp = nums[endIndex];</span><br><span class="line">    nums[endIndex] = nums[fromIndex];</span><br><span class="line">    nums[fromIndex] = temp;</span><br><span class="line">    fromIndex++;</span><br><span class="line">    endIndex--;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> nums;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h3 id="å­˜åœ¨é‡å¤å…ƒç´ "><a href="#å­˜åœ¨é‡å¤å…ƒç´ " class="headerlink" title="å­˜åœ¨é‡å¤å…ƒç´ "></a>å­˜åœ¨é‡å¤å…ƒç´ </h3><p>ç»™å®šä¸€ä¸ªæ•´æ•°æ•°ç»„ï¼Œåˆ¤æ–­æ˜¯å¦å­˜åœ¨é‡å¤å…ƒç´ ã€‚å¦‚æœä»»æ„ä¸€å€¼åœ¨æ•°ç»„ä¸­å‡ºç°è‡³å°‘ä¸¤æ¬¡ï¼Œå‡½æ•°è¿”å› true ã€‚å¦‚æœæ•°ç»„ä¸­æ¯ä¸ªå…ƒç´ éƒ½ä¸ç›¸åŒï¼Œåˆ™è¿”å› false ã€‚</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> containsDuplicate = <span class="function"><span class="keyword">function</span> (<span class="params">nums</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> map = <span class="keyword">new</span> <span class="built_in">Map</span>();</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>, len = nums.length; i &lt; len; i++) &#123;</span><br><span class="line">    <span class="keyword">if</span> (map.has(nums[i])) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      map.set(nums[i], i);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h3 id="æ—‹è½¬å›¾åƒ"><a href="#æ—‹è½¬å›¾åƒ" class="headerlink" title="æ—‹è½¬å›¾åƒ"></a>æ—‹è½¬å›¾åƒ</h3><p>ç»™å®šä¸€ä¸ª n Ã— n çš„äºŒç»´çŸ©é˜µè¡¨ç¤ºä¸€ä¸ªå›¾åƒã€‚å°†å›¾åƒé¡ºæ—¶é’ˆæ—‹è½¬ 90 åº¦ã€‚[åŸåœ°æ—‹è½¬]</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> rotate = <span class="function"><span class="keyword">function</span> (<span class="params">matrix</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> n = matrix.length;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// æ—‹è½¬</span></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> j = i; j &lt; n; j++) &#123;</span><br><span class="line">      <span class="keyword">let</span> tmp = matrix[j][i];</span><br><span class="line">      matrix[j][i] = matrix[i][j];</span><br><span class="line">      matrix[i][j] = tmp;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// åè½¬</span></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> j = <span class="number">0</span>; j &lt; n / <span class="number">2</span>; j++) &#123;</span><br><span class="line">      <span class="keyword">let</span> tmp = matrix[i][j];</span><br><span class="line">      matrix[i][j] = matrix[i][n - j - <span class="number">1</span>];</span><br><span class="line">      matrix[i][n - j - <span class="number">1</span>] = tmp;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> matrix;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h3 id="åè½¬å­—ç¬¦ä¸²"><a href="#åè½¬å­—ç¬¦ä¸²" class="headerlink" title="åè½¬å­—ç¬¦ä¸²"></a>åè½¬å­—ç¬¦ä¸²</h3><p>ç¼–å†™ä¸€ä¸ªå‡½æ•°ï¼Œå…¶ä½œç”¨æ˜¯å°†è¾“å…¥çš„å­—ç¬¦ä¸²åè½¬è¿‡æ¥ã€‚è¾“å…¥å­—ç¬¦ä¸²ä»¥å­—ç¬¦æ•°ç»„ char[] çš„å½¢å¼ç»™å‡ºã€‚ä¸è¦ç»™å¦å¤–çš„æ•°ç»„åˆ†é…é¢å¤–çš„ç©ºé—´ï¼Œä½ å¿…é¡»åŸåœ°ä¿®æ”¹è¾“å…¥æ•°ç»„ã€ä½¿ç”¨ O(1) çš„é¢å¤–ç©ºé—´è§£å†³è¿™ä¸€é—®é¢˜ã€‚ä½ å¯ä»¥å‡è®¾æ•°ç»„ä¸­çš„æ‰€æœ‰å­—ç¬¦éƒ½æ˜¯ ASCII ç è¡¨ä¸­çš„å¯æ‰“å°å­—ç¬¦ã€‚</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// åŒæŒ‡é’ˆæ³•</span></span><br><span class="line"><span class="keyword">var</span> reverseString = <span class="function"><span class="keyword">function</span> (<span class="params">s</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> length = s.length;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> left = <span class="number">0</span>, right = length - <span class="number">1</span>; left &lt; right; left++, right--) &#123;</span><br><span class="line">    [s[left], s[right]] = [s[right], s[left]];</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> s;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h3 id="æ•´æ•°åè½¬"><a href="#æ•´æ•°åè½¬" class="headerlink" title="æ•´æ•°åè½¬"></a>æ•´æ•°åè½¬</h3><p>ç»™å‡ºä¸€ä¸ª 32 ä½çš„æœ‰ç¬¦å·æ•´æ•°ï¼Œä½ éœ€è¦å°†è¿™ä¸ªæ•´æ•°ä¸­æ¯ä½ä¸Šçš„æ•°å­—è¿›è¡Œåè½¬</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> reverse = <span class="function"><span class="keyword">function</span> (<span class="params">x</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> rev = <span class="number">0</span>,</span><br><span class="line">    INT_MIN = (-<span class="number">1</span> * <span class="number">2</span>) ** <span class="number">31</span>,</span><br><span class="line">    INT_MAX = <span class="number">2</span> ** <span class="number">31</span> - <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// æœ€åä¸€ä½é™¤10å–æ•´ç­‰äº0</span></span><br><span class="line">  <span class="keyword">while</span> (x != <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="comment">// æ¯æ¬¡æ¨¡10å¾—å‡ºæœ€åä¸€ä½æ•°å­—</span></span><br><span class="line">    <span class="keyword">let</span> pop = x % <span class="number">10</span>;</span><br><span class="line">    x = <span class="built_in">Math</span>.trunc(x / <span class="number">10</span>);</span><br><span class="line">    <span class="comment">// æ›´å…·rev = rev * 10 + popå¾—å‡ºæº¢å‡ºæ¡ä»¶</span></span><br><span class="line">    <span class="keyword">if</span> (rev &gt; INT_MAX / <span class="number">10</span> || (rev == INT_MAX / <span class="number">10</span> &amp;&amp; pop &gt; <span class="number">7</span>)) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">if</span> (rev &lt; INT_MIN / <span class="number">10</span> || (rev == INT_MIN / <span class="number">10</span> &amp;&amp; pop &lt; -<span class="number">8</span>)) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    <span class="comment">// è¿½åŠ åˆ°æœ«å°¾</span></span><br><span class="line">    rev = rev * <span class="number">10</span> + pop;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> rev;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h3 id="ç‹¬ä¸€æ— äºŒçš„å‡ºç°æ¬¡æ•°"><a href="#ç‹¬ä¸€æ— äºŒçš„å‡ºç°æ¬¡æ•°" class="headerlink" title="ç‹¬ä¸€æ— äºŒçš„å‡ºç°æ¬¡æ•°"></a>ç‹¬ä¸€æ— äºŒçš„å‡ºç°æ¬¡æ•°</h3><p>ç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„ arrï¼Œè¯·ä½ å¸®å¿™ç»Ÿè®¡æ•°ç»„ä¸­æ¯ä¸ªæ•°çš„å‡ºç°æ¬¡æ•°ã€‚å¦‚æœæ¯ä¸ªæ•°çš„å‡ºç°æ¬¡æ•°éƒ½æ˜¯ç‹¬ä¸€æ— äºŒçš„ï¼Œå°±è¿”å› trueï¼›å¦åˆ™è¿”å› false</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> uniqueOccurrences = <span class="function"><span class="keyword">function</span> (<span class="params">arr</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> occur = <span class="keyword">new</span> <span class="built_in">Map</span>();</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">const</span> x <span class="keyword">of</span> arr) &#123;</span><br><span class="line">    <span class="keyword">if</span> (occur.has(x)) &#123;</span><br><span class="line">      occur.set(x, occur.get(x) + <span class="number">1</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      occur.set(x, <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">const</span> times = <span class="keyword">new</span> <span class="built_in">Set</span>();</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">const</span> [, value] <span class="keyword">of</span> occur) &#123;</span><br><span class="line">    times.add(value);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> times.size === occur.size;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h3 id="ä¸¤ä¸ªæ•°ç»„çš„äº¤é›†"><a href="#ä¸¤ä¸ªæ•°ç»„çš„äº¤é›†" class="headerlink" title="ä¸¤ä¸ªæ•°ç»„çš„äº¤é›†"></a>ä¸¤ä¸ªæ•°ç»„çš„äº¤é›†</h3><p>ç»™å®šä¸¤ä¸ªæ•°ç»„ï¼Œç¼–å†™ä¸€ä¸ªå‡½æ•°æ¥è®¡ç®—å®ƒä»¬çš„äº¤é›†</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;number[]&#125;</span> <span class="variable">nums1</span></span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;number[]&#125;</span> <span class="variable">nums2</span></span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return <span class="type">&#123;number[]&#125;</span></span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">var</span> intersection = <span class="function"><span class="keyword">function</span> (<span class="params">nums1, nums2</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> result = <span class="keyword">new</span> <span class="built_in">Set</span>();</span><br><span class="line">  <span class="keyword">let</span> nums1Set = <span class="keyword">new</span> <span class="built_in">Set</span>(nums1);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>, len2 = nums2.length; i &lt; len2; i++) &#123;</span><br><span class="line">    <span class="keyword">if</span> (nums1Set.has(nums2[i])) &#123;</span><br><span class="line">      result.add(nums2[i]);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">Array</span>.from(result);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h3 id="æœ‰æ•ˆçš„å­—æ¯å¼‚ä½è¯"><a href="#æœ‰æ•ˆçš„å­—æ¯å¼‚ä½è¯" class="headerlink" title="æœ‰æ•ˆçš„å­—æ¯å¼‚ä½è¯"></a>æœ‰æ•ˆçš„å­—æ¯å¼‚ä½è¯</h3><p>ç»™å®šä¸¤ä¸ªå­—ç¬¦ä¸² s å’Œ t ï¼Œç¼–å†™ä¸€ä¸ªå‡½æ•°æ¥åˆ¤æ–­ t æ˜¯å¦æ˜¯ s çš„å­—æ¯å¼‚ä½è¯</p>
<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">è¾“å…¥: s = &quot;rat&quot;, t = &quot;car&quot;</span><br><span class="line">è¾“å‡º: false</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;string&#125;</span> <span class="variable">s</span></span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;string&#125;</span> <span class="variable">t</span></span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return <span class="type">&#123;boolean&#125;</span></span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">var</span> isAnagram = <span class="function"><span class="keyword">function</span> (<span class="params">s, t</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> count = <span class="built_in">Array</span>(<span class="number">26</span>).fill(<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (s.length != t.length) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; s.length; i++) &#123;</span><br><span class="line">    count[s[i].codePointAt() - <span class="number">97</span>]++;</span><br><span class="line">    count[t[i].codePointAt() - <span class="number">97</span>]--;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> c <span class="keyword">of</span> count) &#123;</span><br><span class="line">    <span class="keyword">if</span> (c != <span class="number">0</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h3 id="å…¨æ’åˆ—"><a href="#å…¨æ’åˆ—" class="headerlink" title="å…¨æ’åˆ—"></a>å…¨æ’åˆ—</h3><p>ç»™å®šä¸€ä¸ª æ²¡æœ‰é‡å¤ æ•°å­—çš„åºåˆ—ï¼Œè¿”å›å…¶æ‰€æœ‰å¯èƒ½çš„å…¨æ’åˆ—</p>
<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">è¾“å…¥: [1,2,3]</span><br><span class="line">è¾“å‡º:</span><br><span class="line">[</span><br><span class="line">[1,2,3],</span><br><span class="line">[1,3,2],</span><br><span class="line">[2,1,3],</span><br><span class="line">[2,3,1],</span><br><span class="line">[3,1,2],</span><br><span class="line">[3,2,1]</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;number[]&#125;</span> <span class="variable">nums</span></span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return <span class="type">&#123;number[][]&#125;</span></span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">var</span> permute = <span class="function"><span class="keyword">function</span> (<span class="params">nums</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> result = [],</span><br><span class="line">    used = [];</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> generatePermute(result, nums, [], used);</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;number[]&#125;</span> <span class="variable">result</span></span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;number[]&#125;</span> <span class="variable">nums</span></span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;number[]&#125;</span> </span>current å½“å‰æ­£åœ¨ç”¨çš„æ’åˆ—</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;boolean[]&#125;</span> </span>used å½“å‰æ•°å­—æ˜¯å¦å·²ä½¿ç”¨</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return <span class="type">&#123;number[][]&#125;</span></span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">var</span> generatePermute = <span class="function"><span class="keyword">function</span> (<span class="params">result, nums, current, used</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (current.length === nums.length) &#123;</span><br><span class="line">    result.push(current.slice(<span class="number">0</span>));</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; nums.length; i++) &#123;</span><br><span class="line">    <span class="comment">// å¦‚æœæ²¡æœ‰ä½¿ç”¨</span></span><br><span class="line">    <span class="keyword">if</span> (!used[i]) &#123;</span><br><span class="line">      current.push(nums[i]);</span><br><span class="line">      used[i] = <span class="literal">true</span>;</span><br><span class="line"></span><br><span class="line">      generatePermute(result, nums, current, used);</span><br><span class="line">      <span class="comment">// ä¸€æ¬¡è°ƒç”¨æ‰§è¡Œå®Œæ¯•ï¼Œå›æº¯</span></span><br><span class="line">      used[i] = <span class="literal">false</span>;</span><br><span class="line">      current.pop();</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> result;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">permute([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]);</span><br></pre></td></tr></table></figure>

<h3 id="å­—æ¯å¼‚ä½è¯åˆ†ç»„"><a href="#å­—æ¯å¼‚ä½è¯åˆ†ç»„" class="headerlink" title="å­—æ¯å¼‚ä½è¯åˆ†ç»„"></a>å­—æ¯å¼‚ä½è¯åˆ†ç»„</h3><p>ç»™å®šä¸€ä¸ªå­—ç¬¦ä¸²æ•°ç»„ï¼Œå°†å­—æ¯å¼‚ä½è¯ç»„åˆåœ¨ä¸€èµ·ã€‚å­—æ¯å¼‚ä½è¯æŒ‡å­—æ¯ç›¸åŒï¼Œä½†æ’åˆ—ä¸åŒçš„å­—ç¬¦ä¸²</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;string[]&#125;</span> <span class="variable">strs</span></span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return <span class="type">&#123;string[][]&#125;</span></span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">var</span> groupAnagrams = <span class="function"><span class="keyword">function</span> (<span class="params">strs</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> map = <span class="keyword">new</span> <span class="built_in">Map</span>();</span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> str <span class="keyword">of</span> strs) &#123;</span><br><span class="line">    <span class="keyword">let</span> s = str.split(<span class="string">&quot;&quot;</span>).sort().join(<span class="string">&quot;&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (map.has(s)) &#123;</span><br><span class="line">      map.set(s, [...map.get(s), str]);</span><br><span class="line">      <span class="keyword">continue</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    map.set(s, [str]);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> [...map.values()];</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">groupAnagrams([<span class="string">&quot;eat&quot;</span>, <span class="string">&quot;tea&quot;</span>, <span class="string">&quot;tan&quot;</span>, <span class="string">&quot;ate&quot;</span>, <span class="string">&quot;nat&quot;</span>, <span class="string">&quot;bat&quot;</span>]);</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>ç®—æ³•</category>
      </categories>
      <tags>
        <tag>leetcode</tag>
        <tag>ç®—æ³•</tag>
      </tags>
  </entry>
  <entry>
    <title>nodejsåŸºç¡€</title>
    <url>/blog/2020/11/07/nodejs%E5%9F%BA%E7%A1%80/</url>
    <content><![CDATA[<h3 id="nodejs-è°ƒè¯•"><a href="#nodejs-è°ƒè¯•" class="headerlink" title="nodejs è°ƒè¯•"></a>nodejs è°ƒè¯•</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">node --inspect-brk .\test.js</span><br></pre></td></tr></table></figure>

<h3 id="path"><a href="#path" class="headerlink" title="path"></a>path</h3><p>path æ¨¡å—å¸¸ç”¨è¯­æ³•</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&quot;path&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> resolvePath = path.resolve(__dirname, <span class="string">&quot;a&quot;</span>, <span class="string">&quot;b&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> joinPath = path.join(<span class="string">&quot;a&quot;</span>, <span class="string">&quot;b&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// é¡¹ç›®æ ¹ç›®å½•</span></span><br><span class="line"><span class="comment">// E:\æ–‡æ¡£\Projects</span></span><br><span class="line"><span class="built_in">console</span>.log(path.resolve());</span><br><span class="line"><span class="comment">// E:\æ–‡æ¡£\Projects\demo\a\b</span></span><br><span class="line"><span class="built_in">console</span>.log(resolvePath);</span><br><span class="line"><span class="comment">// å½“å‰å·¥ä½œç›®å½•</span></span><br><span class="line"><span class="built_in">console</span>.log(process.cwd());</span><br><span class="line"><span class="comment">// a\b</span></span><br><span class="line"><span class="built_in">console</span>.log(joinPath);</span><br><span class="line"><span class="comment">// å½“å‰æ–‡ä»¶æ‰€åœ¨çš„ç›®å½•</span></span><br><span class="line"><span class="comment">// E:\æ–‡æ¡£\Projects\demo\path.js</span></span><br><span class="line"><span class="built_in">console</span>.log(__filename);</span><br><span class="line"></span><br><span class="line"><span class="comment">// E:\æ–‡æ¡£\Projects\demo</span></span><br><span class="line"><span class="built_in">console</span>.log(__dirname);</span><br><span class="line"></span><br><span class="line"><span class="comment">// åç¼€ .js</span></span><br><span class="line"><span class="built_in">console</span>.log(path.extname(__filename));</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ–‡ä»¶å path.js</span></span><br><span class="line"><span class="built_in">console</span>.log(path.basename(__filename));</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ–‡ä»¶è·¯å¾„ E:\æ–‡æ¡£\Projects\demo</span></span><br><span class="line"><span class="built_in">console</span>.log(path.dirname(__filename));</span><br></pre></td></tr></table></figure>

<h3 id="fs"><a href="#fs" class="headerlink" title="fs"></a>fs</h3><ol start="2">
<li>promise å°è£…è¯»å–æ–‡ä»¶</li>
</ol>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&quot;fs&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&quot;path&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> pathToFile = path.resolve(__dirname, <span class="string">&quot;./file.txt&quot;</span>);</span><br><span class="line"><span class="comment">// å°†æ–¹æ³•func å°è£…æˆpromise</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">promisify</span>(<span class="params">func</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params">...args</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">      args.push(<span class="function"><span class="keyword">function</span> (<span class="params">err, result</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (err) reject(err);</span><br><span class="line">        <span class="keyword">return</span> resolve(result);</span><br><span class="line">      &#125;);</span><br><span class="line">      <span class="keyword">return</span> func.apply(func, args);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">promisify(fs.readFile)(pathToFile, <span class="string">&quot;utf-8&quot;</span>)</span><br><span class="line">  .then(<span class="function">(<span class="params">content</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(content);</span><br><span class="line">  &#125;)</span><br><span class="line">  .catch(<span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(e);</span><br><span class="line">  &#125;);</span><br></pre></td></tr></table></figure>

<h3 id="require-åŠŸèƒ½å®ç°"><a href="#require-åŠŸèƒ½å®ç°" class="headerlink" title="require åŠŸèƒ½å®ç°"></a>require åŠŸèƒ½å®ç°</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> vm = <span class="built_in">require</span>(<span class="string">&quot;vm&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&quot;path&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&quot;fs&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// è®°å½•ä¸€ä¸‹ï¼Œä»¥ä¾¿æ—¥åæ·±å…¥å­¦ä¹ </span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">r</span>(<span class="params">filename</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> pathToFile = path.resolve(__dirname, filename);</span><br><span class="line">  <span class="keyword">const</span> content = fs.readFileSync(pathToFile, <span class="string">&quot;utf-8&quot;</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> wrapper = [<span class="string">&quot;(function(require, module, exports)&#123;&quot;</span>, <span class="string">&quot;&#125;)&quot;</span>];</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> wrappedConent = wrapper[<span class="number">0</span>] + content + wrapper[<span class="number">1</span>];</span><br><span class="line">  <span class="comment">// ä½¿å­—ç¬¦ä¸²è½¬æ¢ä¸ºå¯æ‰§è¡Œjsè„šæœ¬</span></span><br><span class="line">  <span class="keyword">const</span> script = <span class="keyword">new</span> vm.Script(wrappedConent, &#123;</span><br><span class="line">    filename: <span class="string">&quot;index.js&quot;</span>,</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> <span class="built_in">module</span> = &#123;</span><br><span class="line">    <span class="keyword">export</span>: &#123;&#125;,</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> result = script.runInThisContext();</span><br><span class="line">  <span class="comment">// ç­‰äºwrapperå†…çš„åŒ¿åå‡½æ•°</span></span><br><span class="line">  result(r, <span class="built_in">module</span>, <span class="built_in">module</span>.exports);</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">module</span>.exports;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">global</span>.r = r;</span><br></pre></td></tr></table></figure>

<p>ä½¿ç”¨æ—¶åªéœ€è¦è¿™æ ·ç”¨</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="built_in">require</span>(<span class="string">&quot;./require&quot;</span>);</span><br><span class="line"></span><br><span class="line">r(<span class="string">&quot;./test.js&quot;</span>);</span><br></pre></td></tr></table></figure>

<h3 id="module-exports"><a href="#module-exports" class="headerlink" title="module.exports"></a>module.exports</h3><p>ä¸ºä»€ä¹ˆ module.exports ä¸èƒ½ç”¨ exports ç›´æ¥èµ‹å€¼</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> obj = &#123;</span><br><span class="line">  key: &#123;&#125;,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">obj.key = <span class="string">&quot;æˆ‘å¯ä»¥æ”¹å˜å€¼&quot;</span>;</span><br><span class="line"><span class="built_in">console</span>.log(obj.key); <span class="comment">// æˆ‘å¯ä»¥æ”¹å˜å€¼</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// let key = obj.key;</span></span><br><span class="line"><span class="comment">// key = &quot;æ²¡æœ‰æ”¹å˜&quot;;</span></span><br><span class="line"><span class="comment">// console.log(obj.key); // &#123;&#125;</span></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>node</category>
      </categories>
      <tags>
        <tag>node</tag>
      </tags>
  </entry>
  <entry>
    <title>nginxæ“ä½œæ€»ç»“</title>
    <url>/blog/2020/10/23/nginx%E6%93%8D%E4%BD%9C%E6%80%BB%E7%BB%93/</url>
    <content><![CDATA[<p><b>1.nginx éƒ¨ç½² web é¡¹ç›®åˆ·æ–° 404</b><br>è¿™ç§æƒ…å†µä¸€èˆ¬åœ¨é¡¹ç›®ä½¿ç”¨ history æ¨¡å¼æ—¶å‘ç”Ÿï¼Œæˆ‘ä»¬éœ€è¦å¯¹ nginx.conf åšä»¥ä¸‹ä¿®æ”¹</p>
<figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="attr">server</span> <span class="string">&#123;</span></span><br><span class="line">  <span class="attr">listen</span> <span class="string">4400;</span></span><br><span class="line">    <span class="attr">location</span> <span class="string">/api/ &#123;</span></span><br><span class="line">    <span class="attr">proxy_pass</span> <span class="string">http://localhost:8080/;</span></span><br><span class="line">  <span class="attr">&#125;</span></span><br><span class="line">  <span class="attr">location</span> <span class="string">/ &#123;</span></span><br><span class="line">    <span class="attr">root</span> <span class="string">/home/web/handy;</span></span><br><span class="line"><span class="comment">    # æ·»åŠ </span></span><br><span class="line">    <span class="attr">try_files</span> <span class="string">$uri $uri/ /index.html;</span></span><br><span class="line">  <span class="attr">&#125;</span></span><br><span class="line"><span class="attr">&#125;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>try_filesï¼šå½“è®¿é—® <a href="http://localhost/example/">http://localhost/example/</a>, $uri å°±æ˜¯/exampleï¼Œnginx ä¼šå°è¯•æ­¤è·¯å¾„ï¼Œæ‰¾åˆ°å†…å®¹åè¿”å›ç»™å®¢æˆ·ç«¯</p>
<p><b>2.ubuntuä¸­nginxç›¸å…³æ“ä½œ</b></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># å¹³æ»‘é‡å¯</span></span><br><span class="line">$ nginx -s reload</span><br><span class="line"><span class="comment"># å¼ºåˆ¶é‡å¯</span></span><br><span class="line">$ systemctl restart nginx</span><br><span class="line"><span class="comment"># åœæ­¢nginx</span></span><br><span class="line">$ nginx -s stop</span><br><span class="line"><span class="comment"># å¹³æ»‘åœæ­¢</span></span><br><span class="line">$ nginx -s quit</span><br><span class="line"><span class="comment"># å¯åŠ¨nginxæœåŠ¡</span></span><br><span class="line">$ systemctl start nginx</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>å·¥å…·</category>
      </categories>
      <tags>
        <tag>nginx</tag>
      </tags>
  </entry>
  <entry>
    <title>npm-link</title>
    <url>/blog/2020/11/25/npm-link/</url>
    <content><![CDATA[<h3 id="npm-link"><a href="#npm-link" class="headerlink" title="npm link"></a>npm link</h3><p>ä¸ä¸€ä¸ª package å»ºç«‹ç¬¦å·é“¾æ¥ï¼Œæ€»åˆ†ä¸ºä¸¤æ­¥</p>
<ol>
<li>package æ ¹ç›®å½•æ‰§è¡Œå‘½ä»¤ npm link</li>
</ol>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">E:\Projects\package&gt; npm link</span><br></pre></td></tr></table></figure>

<p>package.json</p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;name&quot;</span>: <span class="string">&quot;mypack&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;version&quot;</span>: <span class="string">&quot;1.0.0&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;description&quot;</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;main&quot;</span>: <span class="string">&quot;index.js&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;bin&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;my-pack&quot;</span>: <span class="string">&quot;./bin/mypack.js&quot;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">&quot;scripts&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;test&quot;</span>: <span class="string">&quot;echo \&quot;Error: no test specified\&quot; &amp;&amp; exit 1&quot;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">&quot;keywords&quot;</span>: [],</span><br><span class="line">  <span class="attr">&quot;author&quot;</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;license&quot;</span>: <span class="string">&quot;ISC&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>åœ¨ä½¿ç”¨çš„ç›®å½•æ‰§è¡Œå‘½ä»¤ npm link mypack</li>
</ol>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># åœ¨node_modulesä¸‹å»ºç«‹é“¾æ¥</span></span><br><span class="line">E:\Projects\examples\linkdemo&gt; npm link mypack</span><br><span class="line"><span class="comment"># å»ºç«‹é“¾æ¥ä¹‹å,å¯ä»¥æ‰§è¡Œå‘½ä»¤my-pack</span></span><br><span class="line">E:\Projects\examples\linkdemo&gt; my-pack</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>å·¥å…·</category>
      </categories>
      <tags>
        <tag>npm cli</tag>
      </tags>
  </entry>
  <entry>
    <title>npmå‘å¸ƒå¼€æºåº“</title>
    <url>/blog/2020/11/16/npm%E5%8F%91%E5%B8%83%E5%BC%80%E6%BA%90%E5%BA%93/</url>
    <content><![CDATA[<p>é€šè¿‡ npm å¼€æºæˆ–ç§æœ‰åº“ï¼Œè§£å†³ç»„ä»¶å…±ç”¨çš„é—®é¢˜</p>
<h3 id="å¼€å§‹"><a href="#å¼€å§‹" class="headerlink" title="å¼€å§‹"></a>å¼€å§‹</h3><p>åˆ›å»ºé¡¹ç›®ç›®å½•</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">mkdir date-with-format</span><br><span class="line"><span class="built_in">cd</span> date-with-format</span><br><span class="line"></span><br><span class="line"><span class="comment"># å¦‚æœç”¨åˆ°tséœ€è¦å®‰è£…tsä¾èµ–</span></span><br><span class="line">npm install typescript -D</span><br><span class="line"><span class="comment"># tsc -v å…¨å±€ç¯å¢ƒç‰ˆæœ¬</span></span><br><span class="line"><span class="comment"># npx tsc -v ç›®å½•ä¸‹ç¯å¢ƒç‰ˆæœ¬</span></span><br><span class="line">npx tsc -v</span><br><span class="line"><span class="comment"># ç”Ÿæˆtsconfig.json</span></span><br><span class="line">npx tsc --init</span><br></pre></td></tr></table></figure>

<p>ç”Ÿæˆ package.json</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">npm init</span><br></pre></td></tr></table></figure>

<p>package.json</p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;name&quot;</span>: <span class="string">&quot;date-with-format&quot;</span>, <span class="comment">// å¼€æºåº“åç§°</span></span><br><span class="line">  <span class="attr">&quot;version&quot;</span>: <span class="string">&quot;0.0.0&quot;</span>, <span class="comment">// å‘å¸ƒçš„ç‰ˆæœ¬å·</span></span><br><span class="line">  <span class="attr">&quot;description&quot;</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;main&quot;</span>: <span class="string">&quot;dist/index.js&quot;</span>, <span class="comment">// å…¥å£æ–‡ä»¶</span></span><br><span class="line">  <span class="attr">&quot;types&quot;</span>: <span class="string">&quot;dist/index.d.ts&quot;</span>, <span class="comment">// ç”Ÿæˆå®šä¹‰æ–‡ä»¶çš„ç»å¯¹è·¯å¾„ï¼Œé€šè¿‡tsconfig.json ä¸­ declarationå±æ€§é…ç½®è‡ªåŠ¨ç”Ÿæˆ</span></span><br><span class="line">  <span class="attr">&quot;scripts&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;build&quot;</span>: <span class="string">&quot;npx tsc -p .&quot;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">&quot;keywords&quot;</span>: [],</span><br><span class="line">  <span class="attr">&quot;author&quot;</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;license&quot;</span>: <span class="string">&quot;ISC&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;devDependencies&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;typescript&quot;</span>: <span class="string">&quot;^4.0.5&quot;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>tsconfig.json</p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;compilerOptions&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;target&quot;</span>: <span class="string">&quot;es5&quot;</span> <span class="comment">/* Specify ECMAScript target version: &#x27;ES3&#x27; (default), &#x27;ES5&#x27;, &#x27;ES2015&#x27;, &#x27;ES2016&#x27;, &#x27;ES2017&#x27;, &#x27;ES2018&#x27;, &#x27;ES2019&#x27;, &#x27;ES2020&#x27;, or &#x27;ESNEXT&#x27;. */</span>,</span><br><span class="line">    <span class="attr">&quot;module&quot;</span>: <span class="string">&quot;commonjs&quot;</span> <span class="comment">/* Specify module code generation: &#x27;none&#x27;, &#x27;commonjs&#x27;, &#x27;amd&#x27;, &#x27;system&#x27;, &#x27;umd&#x27;, &#x27;es2015&#x27;, &#x27;es2020&#x27;, or &#x27;ESNext&#x27;. */</span>,</span><br><span class="line">    <span class="attr">&quot;declaration&quot;</span>: <span class="literal">true</span> <span class="comment">/* Generates corresponding &#x27;.d.ts&#x27; file. */</span>,</span><br><span class="line">    <span class="attr">&quot;sourceMap&quot;</span>: <span class="literal">true</span> <span class="comment">/* Generates corresponding &#x27;.map&#x27; file. */</span>,</span><br><span class="line">    <span class="attr">&quot;outDir&quot;</span>: <span class="string">&quot;./dist&quot;</span> <span class="comment">/* Redirect output structure to the directory. */</span>,</span><br><span class="line">    <span class="attr">&quot;rootDir&quot;</span>: <span class="string">&quot;./src&quot;</span> <span class="comment">/* Specify the root directory of input files. Use to control the output directory structure with --outDir. */</span>,</span><br><span class="line"></span><br><span class="line">    <span class="attr">&quot;strict&quot;</span>: <span class="literal">true</span> <span class="comment">/* Enable all strict type-checking options. */</span>,</span><br><span class="line">    <span class="attr">&quot;esModuleInterop&quot;</span>: <span class="literal">true</span> <span class="comment">/* Enables emit interoperability between CommonJS and ES Modules via creation of namespace objects for all imports. Implies &#x27;allowSyntheticDefaultImports&#x27;. */</span>,</span><br><span class="line">    <span class="attr">&quot;skipLibCheck&quot;</span>: <span class="literal">true</span> <span class="comment">/* Skip type checking of declaration files. */</span>,</span><br><span class="line">    <span class="attr">&quot;forceConsistentCasingInFileNames&quot;</span>: <span class="literal">true</span> <span class="comment">/* Disallow inconsistently-cased references to the same file. */</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿è¡Œ build å‘½ä»¤</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm run build</span><br></pre></td></tr></table></figure>

<p>å‘å¸ƒåˆ° npm,è¿™é‡Œéœ€è¦å…ˆæ³¨å†Œ npm è´¦æˆ·ï¼Œç„¶åé€šè¿‡ npm login ç™»å½•</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm publish</span><br></pre></td></tr></table></figure>

<p>å‘å¸ƒä¹‹åï¼Œè¿‡ä¸€ä¼šå¯ä»¥é€šè¿‡ä»¥ä¸‹å‘½ä»¤å®‰è£…ï¼Œå¯¼å…¥ä½¿ç”¨å°±å¯ä»¥äº†</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm i date-with-format</span><br></pre></td></tr></table></figure>

<p>æµ‹è¯•å‘å¸ƒçš„å¼€æºåº“</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">let dateWithFormat &#x3D; require(&quot;date-with-format&quot;).default</span><br><span class="line"></span><br><span class="line">let formatDate &#x3D; dateWithFormat(Date.now())</span><br><span class="line"></span><br><span class="line">console.log(formatDate); &#x2F;&#x2F; 2020-11-16</span><br></pre></td></tr></table></figure>

<p>é‡æ–°å‘å¸ƒéœ€è¦ç”Ÿæˆä¸€ä¸ªæ–°çš„ç‰ˆæœ¬å·</p>
<blockquote>
<p>è¯­ä¹‰åŒ–ç‰ˆæœ¬å·<a href="https://semver.org/lang/zh-CN/">å‚è€ƒ</a></p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># npm version  [major | minor | patch | premajor | preminor | prepatch | prerelease]</span><br><span class="line"># ä¿®è®¢å·ï¼Œ0.0.1 -&gt; 0.0.2</span><br><span class="line">npm version patch</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>å·¥å…·</category>
      </categories>
  </entry>
  <entry>
    <title>path-to-regxp</title>
    <url>/blog/2020/11/18/path-to-regxp/</url>
    <content><![CDATA[<h3 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># current: v6.2.0</span></span><br><span class="line">npm install path-to-regexp --save</span><br></pre></td></tr></table></figure>

<h3 id="ç”¨æ³•"><a href="#ç”¨æ³•" class="headerlink" title="ç”¨æ³•"></a>ç”¨æ³•</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123; pathToRegexp, match, parse, compile &#125; = <span class="built_in">require</span>(<span class="string">&quot;path-to-regexp&quot;</span>);</span><br></pre></td></tr></table></figure>

<p>match</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// æ·»åŠ decodeæ—¶ï¼Œè¿”å›ç»“æœä¼šè¢«è§£ç </span></span><br><span class="line"><span class="keyword">const</span> matchPath = match(<span class="string">&quot;/user/:id&quot;</span>, &#123; <span class="attr">decode</span>: <span class="built_in">decodeURIComponent</span> &#125;);</span><br><span class="line"></span><br><span class="line">matchPath(<span class="string">&quot;/user/1&quot;</span>);</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">output: </span></span><br><span class="line"><span class="comment">&#123; path: &#x27;/user/1&#x27;,</span></span><br><span class="line"><span class="comment">  index: 0,</span></span><br><span class="line"><span class="comment">  params: [Object: null prototype] &#123; id: &#x27;1&#x27; &#125; &#125;</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">matchPath(<span class="string">&quot;/user/&quot;</span>); <span class="comment">// false</span></span><br><span class="line"></span><br><span class="line">matchPath(<span class="string">&quot;/user/caf%C3%A9&quot;</span>);</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">output: </span></span><br><span class="line"><span class="comment">&#123; path: &#x27;/user/caf%C3%A9&#x27;,</span></span><br><span class="line"><span class="comment">  index: 0,</span></span><br><span class="line"><span class="comment">  params: [Object: null prototype] &#123; id: &#x27;cafÃ©&#x27; &#125; &#125;</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<p>pathToRegexp</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> regexp = pathToRegexp(<span class="string">&quot;/:foo/:bar&quot;</span>);</span><br><span class="line"><span class="comment">// è¿”å›å€¼ç±»å‹</span></span><br><span class="line"><span class="comment">// Object.prototype.toString.call(regexp) == [object RegExp]</span></span><br><span class="line"><span class="comment">// æ‰¾åˆ°æ–‡æœ¬è¿”å›ä¸€ä¸ªç»“æœæ•°ç»„</span></span><br><span class="line">regexp.exec(<span class="string">&quot;/test/route&quot;</span>);</span><br></pre></td></tr></table></figure>

<p>parse</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// è¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²å’Œkeyçš„åˆ—è¡¨</span></span><br><span class="line"><span class="keyword">const</span> tokens = parse(<span class="string">&quot;/route/:foo/(.*)&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(tokens);</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">[</span></span><br><span class="line"><span class="comment">  &quot;/route&quot;,</span></span><br><span class="line"><span class="comment">  &#123;</span></span><br><span class="line"><span class="comment">    name: &quot;foo&quot;,</span></span><br><span class="line"><span class="comment">    prefix: &quot;/&quot;,</span></span><br><span class="line"><span class="comment">    suffix: &quot;&quot;,</span></span><br><span class="line"><span class="comment">    pattern: &quot;[^\\/#\\?]+?&quot;,</span></span><br><span class="line"><span class="comment">    modifier: &quot;&quot;,</span></span><br><span class="line"><span class="comment">  &#125;,</span></span><br><span class="line"><span class="comment">  &#123; name: 0, prefix: &quot;/&quot;, suffix: &quot;&quot;, pattern: &quot;.*&quot;, modifier: &quot;&quot; &#125;,</span></span><br><span class="line"><span class="comment">];</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>
<p>compile</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// Make sure you encode your path segments consistently.</span></span><br><span class="line"><span class="keyword">const</span> toPath = compile(<span class="string">&quot;/user/:id&quot;</span>, &#123; <span class="attr">encode</span>: <span class="built_in">encodeURIComponent</span> &#125;);</span><br><span class="line"> </span><br><span class="line">toPath(&#123; <span class="attr">id</span>: <span class="number">123</span> &#125;); <span class="comment">//=&gt; &quot;/user/123&quot;</span></span><br><span class="line">toPath(&#123; <span class="attr">id</span>: <span class="string">&quot;cafÃ©&quot;</span> &#125;); <span class="comment">//=&gt; &quot;/user/caf%C3%A9&quot;</span></span><br><span class="line">toPath(&#123; <span class="attr">id</span>: <span class="string">&quot;/&quot;</span> &#125;); <span class="comment">//=&gt; &quot;/user/%2F&quot;</span></span><br><span class="line"> </span><br><span class="line">toPath(&#123; <span class="attr">id</span>: <span class="string">&quot;:/&quot;</span> &#125;); <span class="comment">//=&gt; &quot;/user/%3A%2F&quot;</span></span><br><span class="line"> </span><br><span class="line"><span class="comment">// Without `encode`, you need to make sure inputs are encoded correctly.</span></span><br><span class="line"><span class="keyword">const</span> toPathRaw = compile(<span class="string">&quot;/user/:id&quot;</span>);</span><br><span class="line"> </span><br><span class="line">toPathRaw(&#123; <span class="attr">id</span>: <span class="string">&quot;%3A%2F&quot;</span> &#125;); <span class="comment">//=&gt; &quot;/user/%3A%2F&quot;</span></span><br><span class="line">toPathRaw(&#123; <span class="attr">id</span>: <span class="string">&quot;:/&quot;</span> &#125;, &#123; <span class="attr">validate</span>: <span class="literal">false</span> &#125;); <span class="comment">//=&gt; &quot;/user/:/&quot;</span></span><br><span class="line"> </span><br><span class="line"><span class="keyword">const</span> toPathRepeated = compile(<span class="string">&quot;/:segment+&quot;</span>);</span><br><span class="line"> </span><br><span class="line">toPathRepeated(&#123; <span class="attr">segment</span>: <span class="string">&quot;foo&quot;</span> &#125;); <span class="comment">//=&gt; &quot;/foo&quot;</span></span><br><span class="line">toPathRepeated(&#123; <span class="attr">segment</span>: [<span class="string">&quot;a&quot;</span>, <span class="string">&quot;b&quot;</span>, <span class="string">&quot;c&quot;</span>] &#125;); <span class="comment">//=&gt; &quot;/a/b/c&quot;</span></span><br><span class="line"> </span><br><span class="line"><span class="keyword">const</span> toPathRegexp = compile(<span class="string">&quot;/user/:id(\\d+)&quot;</span>);</span><br><span class="line"> </span><br><span class="line">toPathRegexp(&#123; <span class="attr">id</span>: <span class="number">123</span> &#125;); <span class="comment">//=&gt; &quot;/user/123&quot;</span></span><br><span class="line">toPathRegexp(&#123; <span class="attr">id</span>: <span class="string">&quot;123&quot;</span> &#125;); <span class="comment">//=&gt; &quot;/user/123&quot;</span></span><br><span class="line">toPathRegexp(&#123; <span class="attr">id</span>: <span class="string">&quot;abc&quot;</span> &#125;); <span class="comment">//=&gt; Throws `TypeError`.</span></span><br><span class="line">toPathRegexp(&#123; <span class="attr">id</span>: <span class="string">&quot;abc&quot;</span> &#125;, &#123; <span class="attr">validate</span>: <span class="literal">false</span> &#125;); <span class="comment">//=&gt; &quot;/user/abc&quot;</span></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>å·¥å…·</category>
      </categories>
      <tags>
        <tag>npm</tag>
      </tags>
  </entry>
  <entry>
    <title>npmå¼€æºåº“</title>
    <url>/blog/2020/11/24/npm%E5%BC%80%E6%BA%90%E5%BA%93/</url>
    <content><![CDATA[<h3 id="driver-js"><a href="#driver-js" class="headerlink" title="driver.js"></a>driver.js</h3><p>è½»é‡çº§é¡µé¢æ˜¾ç¤ºåº“ï¼Œå±€éƒ¨é«˜äº®ï¼Œé¡µé¢å¼•å¯¼</p>
<img src="/blog/2020/11/24/npm%E5%BC%80%E6%BA%90%E5%BA%93/02.png" class>
<img src="/blog/2020/11/24/npm%E5%BC%80%E6%BA%90%E5%BA%93/03.png" class>

<h3 id="Luckysheet"><a href="#Luckysheet" class="headerlink" title="Luckysheet"></a>Luckysheet</h3><p>å¼€æºåœ¨çº¿è¡¨æ ¼å·¥å…·ã€‚<a href="https://github.com/961109899/Luckysheet">è®¿é—®</a></p>
<img src="/blog/2020/11/24/npm%E5%BC%80%E6%BA%90%E5%BA%93/luckysheet.png" class>

<h3 id="é²ç­-H5"><a href="#é²ç­-H5" class="headerlink" title="é²ç­ H5"></a>é²ç­ H5</h3><p>å¼€æºç§»åŠ¨é¡µé¢ç”Ÿæˆå™¨ã€‚<a href="http://docs.luban-h5.surge.sh/">è®¿é—®</a></p>
<img src="/blog/2020/11/24/npm%E5%BC%80%E6%BA%90%E5%BA%93/luban.png" class>

<h3 id="é²ç­-H5-1"><a href="#é²ç­-H5-1" class="headerlink" title="é²ç­ H5"></a>é²ç­ H5</h3><p>å›¾å½¢éªŒè¯ç </p>
<img src="/blog/2020/11/24/npm%E5%BC%80%E6%BA%90%E5%BA%93/ajcaptcha.png" class>
<img src="/blog/2020/11/24/npm%E5%BC%80%E6%BA%90%E5%BA%93/ajcaptcha2.png" class>

<h3 id="filepond-æ–‡ä»¶ä¸Šä¼ "><a href="#filepond-æ–‡ä»¶ä¸Šä¼ " class="headerlink" title="filepond æ–‡ä»¶ä¸Šä¼ "></a>filepond æ–‡ä»¶ä¸Šä¼ </h3><p>éå¸¸ä¼˜ç§€çš„æ–‡ä»¶ä¸Šä¼ åº“ï¼Œå¯ä»¥ä¸Šä¼ æ–‡ä»¶ï¼Œç›®å½•ï¼Œblobs, URLS</p>
<img src="/blog/2020/11/24/npm%E5%BC%80%E6%BA%90%E5%BA%93/filepond.png" class>

<h3 id="cors"><a href="#cors" class="headerlink" title="cors"></a>cors</h3><p>express ä¸­é—´ä»¶ï¼Œå¤šç§æ–¹å¼å®ç° corsï¼ˆè·¨åŸŸèµ„æºå…±äº«ï¼‰ã€‚æ‰‹åŠ¨é…ç½®ï¼ŒåŠ¨æ€åŸŸåç­‰</p>
<p>ç®€å•ç”¨æ³•ï¼š</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> express = <span class="built_in">require</span>(<span class="string">&quot;express&quot;</span>);</span><br><span class="line"><span class="keyword">var</span> cors = <span class="built_in">require</span>(<span class="string">&quot;cors&quot;</span>);</span><br><span class="line"><span class="keyword">var</span> app = express();</span><br><span class="line"></span><br><span class="line">app.use(cors());</span><br><span class="line"></span><br><span class="line">app.get(<span class="string">&quot;/products/:id&quot;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">req, res, next</span>) </span>&#123;</span><br><span class="line">  res.json(&#123; <span class="attr">msg</span>: <span class="string">&quot;This is CORS-enabled for all origins!&quot;</span> &#125;);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">app.listen(<span class="number">80</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&quot;CORS-enabled web server listening on port 80&quot;</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>å·¥å…·</category>
      </categories>
  </entry>
  <entry>
    <title>react</title>
    <url>/blog/2020/11/16/react/</url>
    <content><![CDATA[<h3 id="reduxåŸºæœ¬å®ç°åŸç†"><a href="#reduxåŸºæœ¬å®ç°åŸç†" class="headerlink" title="reduxåŸºæœ¬å®ç°åŸç†"></a>reduxåŸºæœ¬å®ç°åŸç†</h3><figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">createStore</span>(<span class="params">reducer</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> state;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">getState</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> state;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">dispatch</span>(<span class="params">action</span>) </span>&#123;</span><br><span class="line">    state = reducer(state, action);</span><br><span class="line">    <span class="keyword">return</span> action;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  dispatch(&#123; <span class="attr">type</span>: <span class="string">&quot;init&quot;</span> &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    getState,</span><br><span class="line">    dispatch</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> createStore;</span><br></pre></td></tr></table></figure>]]></content>
      <tags>
        <tag>react</tag>
      </tags>
  </entry>
  <entry>
    <title>Tapable</title>
    <url>/blog/2020/11/20/tapable/</url>
    <content><![CDATA[<blockquote>
<p>version 2.1.1</p>
</blockquote>
<p>Tapable æš´éœ²å¾ˆå¤šé’©å­å‡½æ•°ï¼Œåˆ†ä¸ºåŒæ­¥é’©å­å’Œå¼‚æ­¥é’©å­ä¸¤éƒ¨åˆ†ã€‚åŒæ­¥é’©å­åªæœ‰ <code>tap()</code>ä¸€ä¸ªå¯ç”¨æ–¹æ³•</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123;</span><br><span class="line">  SyncHook,</span><br><span class="line">  SyncBailHook,</span><br><span class="line">  SyncWaterfallHook,</span><br><span class="line">  SyncLoopHook,</span><br><span class="line">  AsyncParallelHook,</span><br><span class="line">  AsyncParallelBailHook,</span><br><span class="line">  AsyncSeriesHook,</span><br><span class="line">  AsyncSeriesBailHook,</span><br><span class="line">  AsyncSeriesWaterfallHook,</span><br><span class="line">&#125; = <span class="built_in">require</span>(<span class="string">&quot;tapable&quot;</span>);</span><br></pre></td></tr></table></figure>

<h3 id="SyncHook"><a href="#SyncHook" class="headerlink" title="SyncHook"></a>SyncHook</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123; SyncHook &#125; = <span class="built_in">require</span>(<span class="string">&quot;tapable&quot;</span>);</span><br><span class="line"><span class="comment">// åˆ›å»ºåŒæ­¥é’©å­</span></span><br><span class="line"><span class="keyword">let</span> hook = <span class="keyword">new</span> SyncHook([<span class="string">&quot;newSpeed&quot;</span>]);</span><br><span class="line"></span><br><span class="line">hook.tap(<span class="string">&quot;1&quot;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">params</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(params);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">hook.call(<span class="string">&quot;å‚æ•°&quot;</span>);</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123; SyncHook &#125; = <span class="built_in">require</span>(<span class="string">&quot;tapable&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Car</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="title">constructor</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.hooks = &#123;</span><br><span class="line">      accelerate: <span class="keyword">new</span> SyncHook([<span class="string">&quot;newSpeed&quot;</span>]),</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> myCar = <span class="keyword">new</span> Car();</span><br><span class="line"></span><br><span class="line">myCar.hooks.accelerate.tap(<span class="string">&quot;1&quot;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">speed</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&quot;ä¼ å…¥çš„å‚æ•°ï¼š&quot;</span>, speed);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">myCar.hooks.accelerate.tap(<span class="string">&quot;2&quot;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">speed</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&quot;ä¼ å…¥çš„å‚æ•°ï¼š&quot;</span>, speed);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">myCar.hooks.accelerate.call(<span class="string">&quot;50&quot;</span>);</span><br><span class="line"><span class="comment">// logï¼š</span></span><br><span class="line"><span class="comment">// ä¼ å…¥çš„å‚æ•°ï¼š 50</span></span><br><span class="line"><span class="comment">// ä¼ å…¥çš„å‚æ•°ï¼š 50</span></span><br></pre></td></tr></table></figure>

<h3 id="SyncBailHook"><a href="#SyncBailHook" class="headerlink" title="SyncBailHook"></a>SyncBailHook</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123; SyncBailHook &#125; = <span class="built_in">require</span>(<span class="string">&quot;tapable&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> hook = <span class="keyword">new</span> SyncBailHook([<span class="string">&quot;params&quot;</span>]);</span><br><span class="line"></span><br><span class="line">hook.tap(<span class="string">&quot;ç†”æ–­é’©å­&quot;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">param</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&quot;è¿”å›å€¼ä¸ç­‰äºundefinedï¼Œä¼šé˜»æ­¢å‡½æ•°å‘ä¸‹çš„æ‰§è¡Œ&quot;</span>);</span><br><span class="line">  <span class="keyword">return</span> <span class="string">&quot;ä¸­æ–­&quot;</span>;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">hook.tap(<span class="string">&quot;ç†”æ–­é’©å­&quot;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">param</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&quot;è¿™é‡Œä¸ä¼šè¢«æ‰§è¡Œ&quot;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">hook.call(<span class="string">&quot;ä¼ å…¥çš„å‚æ•°&quot;</span>);</span><br></pre></td></tr></table></figure>

<h3 id="SyncWaterfallHook"><a href="#SyncWaterfallHook" class="headerlink" title="SyncWaterfallHook"></a>SyncWaterfallHook</h3><p>å°†è¿”å›å€¼å½“ä½œå‚æ•°ï¼Œä¼ é€’ç»™ä¸‹ä¸€ä¸ªå‡½æ•°ã€‚ä¸Šä¸€ä¸ªå‡½æ•°æ²¡æœ‰è¿”å›å€¼ï¼Œå‚æ•°çš„é»˜è®¤ä¸ºè°ƒç”¨æ—¶ä¼ å…¥çš„å‚æ•°</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123; SyncWaterfallHook &#125; = <span class="built_in">require</span>(<span class="string">&quot;tapable&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> hook = <span class="keyword">new</span> SyncWaterfallHook([<span class="string">&quot;params&quot;</span>]);</span><br><span class="line"></span><br><span class="line">hook.tap(<span class="string">&quot;SyncWaterfallHook1&quot;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">param</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&quot;SyncWaterfallHook1:&quot;</span>, param);</span><br><span class="line">  <span class="keyword">return</span> param;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">hook.tap(<span class="string">&quot;SyncWaterfallHook2&quot;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">param</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&quot;SyncWaterfallHook2:&quot;</span>, param);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">hook.call(<span class="string">&quot;ä¼ å…¥çš„å‚æ•°&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// SyncWaterfallHook1: ä¼ å…¥çš„å‚æ•°</span></span><br><span class="line"><span class="comment">// SyncWaterfallHook2: ä¼ å…¥çš„å‚æ•°</span></span><br></pre></td></tr></table></figure>

<h3 id="SyncLoopHook"><a href="#SyncLoopHook" class="headerlink" title="SyncLoopHook"></a>SyncLoopHook</h3><p>å¦‚æœè¿”å›å€¼ä¸æ˜¯ undefinedï¼Œåˆ™ä¼šå¾ªç¯æ‰§è¡Œå½“å‰å‡½æ•°</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> hook = <span class="keyword">new</span> SyncLoopHook([<span class="string">&quot;params&quot;</span>]);</span><br><span class="line"><span class="keyword">let</span> count = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">hook.tap(<span class="string">&quot;SyncLoopHook1&quot;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">param</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(count);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (++count &gt; <span class="number">5</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">undefined</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> count;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">hook.tap(<span class="string">&quot;SyncLoopHook2&quot;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">param</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&quot;SyncLoopHook:&quot;</span>, param);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">hook.call(<span class="string">&quot;ä¼ å…¥çš„å‚æ•°&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 0,1,2,3,4,5</span></span><br><span class="line"><span class="comment">// SyncLoopHook: ä¼ å…¥çš„å‚æ•°</span></span><br></pre></td></tr></table></figure>

<h3 id="AsyncParallelHook"><a href="#AsyncParallelHook" class="headerlink" title="AsyncParallelHook"></a>AsyncParallelHook</h3><p>å¼‚æ­¥å¹¶è¡Œçš„é’©å­, æ‰€æœ‰å‡½æ•°æ‰§è¡Œå®Œæ¯•ä¹‹åï¼Œæ‰§è¡Œæœ€åçš„å›è°ƒï¼Œæ‰“å°å‡º end</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> hook = <span class="keyword">new</span> AsyncParallelHook([<span class="string">&quot;param1&quot;</span>]);</span><br><span class="line"></span><br><span class="line">hook.tapAsync(<span class="string">&quot;AsyncParallelHook1&quot;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">arg, cb</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">setTimeout</span>(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;AsyncParallelHook1&quot;</span>, arg);</span><br><span class="line">    cb();</span><br><span class="line">  &#125;, <span class="number">1000</span>);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// tapAsyncå¿…é¡»è°ƒç”¨cbå›è°ƒå‡½æ•°ï¼Œå¦åˆ™ä¸ä¼šæ‰§è¡Œæœ€åçš„å®Œæˆå›è°ƒå‡½æ•°</span></span><br><span class="line">hook.tapAsync(<span class="string">&quot;AsyncParallelHook2&quot;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">arg, cb</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&quot;AsyncParallelHook2&quot;</span>, arg);</span><br><span class="line">  cb();</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// è¿™é‡Œæ²¡æœ‰ä½¿ç”¨tapAsuncï¼Œä¸éœ€è¦ä½¿ç”¨cb</span></span><br><span class="line">hook.tap(<span class="string">&quot;AsyncParallelHook3&quot;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">arg</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&quot;AsyncParallelHook3&quot;</span>, arg);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.time(<span class="string">&quot;call time&quot;</span>);</span><br><span class="line">hook.callAsync(<span class="string">&quot;å‚æ•°&quot;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&quot;end&quot;</span>);</span><br><span class="line">  <span class="built_in">console</span>.timeEnd(<span class="string">&quot;call time&quot;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// AsyncParallelHook2 å‚æ•°</span></span><br><span class="line"><span class="comment">// AsyncParallelHook3 å‚æ•°</span></span><br><span class="line"><span class="comment">// AsyncParallelHook1 å‚æ•°</span></span><br><span class="line"><span class="comment">// end</span></span><br><span class="line"><span class="comment">// call time: 1004.477ms</span></span><br></pre></td></tr></table></figure>

<p>tapPromise()æ–¹æ³•ï¼Œè¿”å›å€¼å¿…é¡»æ˜¯ä¸€ä¸ª promise å¯¹è±¡</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> hook = <span class="keyword">new</span> AsyncParallelHook([<span class="string">&quot;param1&quot;</span>]);</span><br><span class="line"></span><br><span class="line">hook.tapPromise(<span class="string">&quot;AsyncParallelHook1&quot;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">arg</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(arg);</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> <span class="built_in">setTimeout</span>(resolve, <span class="number">1000</span>));</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">hook.tapPromise(<span class="string">&quot;AsyncParallelHook2&quot;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">arg</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(arg);</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> <span class="built_in">setTimeout</span>(resolve, <span class="number">2000</span>));</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.time(<span class="string">&quot;call time&quot;</span>);</span><br><span class="line"><span class="comment">// ä¸¤ç§è°ƒç”¨æ–¹æ³•ï¼Œ callAsync, promise</span></span><br><span class="line"><span class="comment">// hook.callAsync(&quot;å‚æ•°&quot;, () =&gt; &#123;</span></span><br><span class="line"><span class="comment">//   console.log(&#x27;end&#x27;);</span></span><br><span class="line"><span class="comment">//   console.timeEnd(&quot;call time&quot;)</span></span><br><span class="line"><span class="comment">// &#125;);</span></span><br><span class="line"></span><br><span class="line">hook.promise(<span class="string">&quot;å‚æ•°&quot;</span>).then(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&quot;end&quot;</span>);</span><br><span class="line">  <span class="built_in">console</span>.timeEnd(<span class="string">&quot;call time&quot;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// å‚æ•°</span></span><br><span class="line"><span class="comment">// å‚æ•°</span></span><br><span class="line"><span class="comment">// end</span></span><br><span class="line"><span class="comment">// call time: 2006.843ms</span></span><br></pre></td></tr></table></figure>

<h3 id="AsyncParallelBailHook"><a href="#AsyncParallelBailHook" class="headerlink" title="AsyncParallelBailHook"></a>AsyncParallelBailHook</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// TODO</span></span><br><span class="line">cb(err, <span class="string">&quot;args&quot;</span>); <span class="comment">// æŠ¥é”™ä¼šç›´æ¥æ‰§è¡Œæœ€åå›è°ƒï¼Œä½†æ˜¯å¹¶ä¸å½±å“ä¸‹ä¸€ä¸ªæ–¹æ³•çš„æ‰§è¡Œ</span></span><br></pre></td></tr></table></figure>

<h3 id="AsyncSeriesHook"><a href="#AsyncSeriesHook" class="headerlink" title="AsyncSeriesHook"></a>AsyncSeriesHook</h3><p>å¼‚æ­¥ä¸²è¡Œï¼Œé¡ºåºæ‰§è¡Œ</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> hook = <span class="keyword">new</span> AsyncSeriesHook([<span class="string">&quot;param1&quot;</span>]);</span><br><span class="line"></span><br><span class="line">hook.tapAsync(<span class="string">&quot;AsyncSeriesHook1&quot;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">arg, cb</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;AsyncSeriesHook1:&quot;</span>, arg);</span><br><span class="line">    cb();</span><br><span class="line">  &#125;, <span class="number">2000</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">hook.tapAsync(<span class="string">&quot;AsyncSeriesHook2&quot;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">arg, cb</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;AsyncSeriesHook2:&quot;</span>, arg);</span><br><span class="line">    cb();</span><br><span class="line">  &#125;, <span class="number">1000</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.time(<span class="string">&quot;call time&quot;</span>);</span><br><span class="line">hook.callAsync(<span class="string">&quot;å‚æ•°&quot;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&quot;end&quot;</span>);</span><br><span class="line">  <span class="built_in">console</span>.timeEnd(<span class="string">&quot;call time&quot;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// AsyncSeriesHook1: å‚æ•°</span></span><br><span class="line"><span class="comment">// AsyncSeriesHook2: å‚æ•°</span></span><br><span class="line"><span class="comment">// end</span></span><br><span class="line"><span class="comment">// call time: 3012.718ms</span></span><br></pre></td></tr></table></figure>

<h3 id="AsyncSeriesWaterfallHook"><a href="#AsyncSeriesWaterfallHook" class="headerlink" title="AsyncSeriesWaterfallHook"></a>AsyncSeriesWaterfallHook</h3><p>æŠŠå›è°ƒå‡½æ•°çš„ç¬¬äºŒä¸ªå‚æ•°ï¼Œå½“ä½œå…¥å‚ä¼ ç»™ä¸‹ä¸€ä¸ªå‡½æ•°ã€‚å›è°ƒå‡½æ•° cb ç¬¬ä¸€ä¸ªå‚æ•°å¦‚æœä¸ä¸º nullï¼Œå‡½æ•°ä¸ä¼šå‘ä¸‹æ‰§è¡Œï¼Œç›´æ¥æ‰§è¡Œæœ€åå›è°ƒ</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> hook = <span class="keyword">new</span> AsyncSeriesWaterfallHook([<span class="string">&quot;param1&quot;</span>]);</span><br><span class="line"></span><br><span class="line">hook.tapAsync(<span class="string">&quot;AsyncSeriesWaterfallHook1&quot;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">arg, cb</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;AsyncSeriesWaterfallHook1:&quot;</span>, arg);</span><br><span class="line">    cb(<span class="literal">null</span>, <span class="string">&quot;AsyncSeriesWaterfallHook1&quot;</span>);</span><br><span class="line">  &#125;, <span class="number">2000</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">hook.tapAsync(<span class="string">&quot;AsyncSeriesWaterfallHook2&quot;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">arg, cb</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;AsyncSeriesWaterfallHook2:&quot;</span>, arg);</span><br><span class="line">    cb();</span><br><span class="line">  &#125;, <span class="number">1000</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.time(<span class="string">&quot;call time&quot;</span>);</span><br><span class="line">hook.callAsync(<span class="string">&quot;å‚æ•°&quot;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&quot;end&quot;</span>);</span><br><span class="line">  <span class="built_in">console</span>.timeEnd(<span class="string">&quot;call time&quot;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// AsyncSeriesWaterfallHook1: å‚æ•°</span></span><br><span class="line"><span class="comment">// AsyncSeriesWaterfallHook2: AsyncSeriesWaterfallHook1</span></span><br><span class="line"><span class="comment">// end</span></span><br><span class="line"><span class="comment">// call time: 3010.715ms</span></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>å·¥å…·</category>
      </categories>
      <tags>
        <tag>npm</tag>
      </tags>
  </entry>
  <entry>
    <title>web-components</title>
    <url>/blog/2020/11/27/web-components/</url>
    <content><![CDATA[<p>Web Components æ˜¯ä¸€å¥—åˆ›å»ºè‡ªå®šä¹‰å¯å¤ç”¨å…ƒç´ çš„æŠ€æœ¯ã€‚å®ç° web Compnent ä¸»è¦ç”¨åˆ°ä¸‰ç§æŠ€æœ¯ï¼š</p>
<ul>
<li>Custom elementsï¼ˆè‡ªå®šä¹‰å…ƒç´ ï¼‰ï¼šä¸»è¦é€šè¿‡ window.customElements çš„ API åˆ›å»ºè‡ªå®šä¹‰å…ƒç´ ã€‚ä¾‹å¦‚ï¼š<code> window.customElements.define(&#39;my-custom-element&#39;, MyCustomElement);</code></li>
<li>Shadow DOMï¼šå°†é€šè¿‡ shadow dom åˆ›å»ºçš„å…ƒç´ ç§æœ‰åŒ–ï¼Œä¸æ–‡æ¡£ä¸­å…¶ä»–å…ƒç´ æ ·å¼ä¸è„šæœ¬çš„éš”ç¦»ï¼Œä½¿å…¶ä¸ä¼šç›¸äº’å½±å“ã€‚</li>
<li>HTML templatesï¼ˆHTML æ¨¡æ¿ï¼‰ï¼šhtml æ¨¡æ¿ï¼Œé€šè¿‡æ ‡ç­¾ <code>&lt;template&gt;</code> å’Œ<code>&lt;slot&gt;</code> å®šä¹‰,è§ç”¨æ³• 2</li>
</ul>
<h3 id="ä½¿ç”¨æ–¹æ³•"><a href="#ä½¿ç”¨æ–¹æ³•" class="headerlink" title="ä½¿ç”¨æ–¹æ³•"></a>ä½¿ç”¨æ–¹æ³•</h3><p>ç”¨æ³• 1ï¼Œåˆ›å»ºä¸€ä¸ªè‡ªå®šä¹‰å…ƒç´  simple-custom</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">customElements.define(</span><br><span class="line">  <span class="string">&quot;simple-custom&quot;</span>,</span><br><span class="line">  <span class="class"><span class="keyword">class</span> <span class="keyword">extends</span> <span class="title">HTMLElement</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="title">constructor</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">      <span class="built_in">super</span>();</span><br><span class="line"></span><br><span class="line">      <span class="keyword">const</span> divElem = <span class="built_in">document</span>.createElement(<span class="string">&quot;div&quot;</span>);</span><br><span class="line">      divElem.textContent = <span class="built_in">this</span>.getAttribute(<span class="string">&quot;text&quot;</span>);</span><br><span class="line"></span><br><span class="line">      <span class="keyword">const</span> shadowRoot = <span class="built_in">this</span>.attachShadow(&#123; <span class="attr">mode</span>: <span class="string">&quot;open&quot;</span> &#125;);</span><br><span class="line">      shadowRoot.appendChild(divElem);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">h1</span>&gt;</span><span class="tag">&lt;<span class="name">code</span>&gt;</span>:defined<span class="tag">&lt;/<span class="name">code</span>&gt;</span> demo<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">simple-custom</span> <span class="attr">text</span>=<span class="string">&quot;Custom element example text&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">simple-custom</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span>&gt;</span>Standard paragraph example text<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>ç”¨æ³• 2</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> template = <span class="built_in">document</span>.createElement(<span class="string">&quot;template&quot;</span>);</span><br><span class="line"></span><br><span class="line">template.innerHTML = <span class="string">`</span></span><br><span class="line"><span class="string">  &lt;style&gt; h3 &#123; color: blue; &#125;&lt;/style&gt;</span></span><br><span class="line"><span class="string">  &lt;h3&gt;Hello World&lt;/h3&gt;</span></span><br><span class="line"><span class="string">`</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">UserCard</span> <span class="keyword">extends</span> <span class="title">HTMLElement</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="title">constructor</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="built_in">super</span>();</span><br><span class="line"></span><br><span class="line">    <span class="built_in">this</span>.attachShadow(&#123; <span class="attr">mode</span>: <span class="string">&quot;open&quot;</span> &#125;);</span><br><span class="line">    <span class="built_in">this</span>.shadowRoot.appendChild(template.content.cloneNode(<span class="literal">true</span>));</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> userNameTemplate = <span class="built_in">document</span>.getElementById(<span class="string">&quot;userNameTemplate&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="built_in">this</span>.shadowRoot.appendChild(userNameTemplate.content);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">window</span>.customElements.define(<span class="string">&quot;user-card&quot;</span>, UserCard);</span><br></pre></td></tr></table></figure>

<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">h3</span>&gt;</span>Hello World<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">user-card</span>&gt;</span><span class="tag">&lt;/<span class="name">user-card</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">template</span> <span class="attr">id</span>=<span class="string">&quot;userNameTemplate&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h3</span>&gt;</span>å§“åï¼šJone<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;userCard.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>æ•ˆæœå±•ç¤º</p>
<img src="/blog/2020/11/27/web-components/01.png" class>

<h3 id="ç”Ÿå‘½å‘¨æœŸ"><a href="#ç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="ç”Ÿå‘½å‘¨æœŸ"></a>ç”Ÿå‘½å‘¨æœŸ</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Square</span> <span class="keyword">extends</span> <span class="title">HTMLElement</span> </span>&#123;</span><br><span class="line">  <span class="comment">// ç›‘å¬è¿™ä¸ªå±æ€§ï¼Œä½¿attributeChangedCallbackå›è°ƒå‡½æ•°ç”Ÿæ•ˆï¼Œè¿”å›éœ€è¦ç›‘å¬çš„å±æ€§åç§°ã€‚</span></span><br><span class="line">  <span class="keyword">static</span> <span class="keyword">get</span> <span class="title">observedAttributes</span>() &#123;</span><br><span class="line">    <span class="keyword">return</span> [<span class="string">&quot;c&quot;</span>, <span class="string">&quot;l&quot;</span>];</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="title">constructor</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="comment">// Always call super first in constructor</span></span><br><span class="line">    <span class="built_in">super</span>();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> shadow = <span class="built_in">this</span>.attachShadow(&#123; <span class="attr">mode</span>: <span class="string">&quot;open&quot;</span> &#125;);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> div = <span class="built_in">document</span>.createElement(<span class="string">&quot;div&quot;</span>);</span><br><span class="line">    <span class="keyword">const</span> style = <span class="built_in">document</span>.createElement(<span class="string">&quot;style&quot;</span>);</span><br><span class="line">    shadow.appendChild(style);</span><br><span class="line">    shadow.appendChild(div);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// é¦–æ¬¡è¢«æ’å…¥DOMæ—¶è°ƒç”¨</span></span><br><span class="line">  <span class="function"><span class="title">connectedCallback</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;Custom square element added to page.&quot;</span>);</span><br><span class="line">    updateStyle(<span class="built_in">this</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// ä»DOMä¸­åˆ é™¤æ—¶è°ƒç”¨, document.body.removeChild</span></span><br><span class="line">  <span class="function"><span class="title">disconnectedCallback</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;Custom square element removed from page.&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// ç§»åŠ¨åˆ°æ–°DOMæ—¶è°ƒç”¨</span></span><br><span class="line">  <span class="function"><span class="title">adoptedCallback</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;Custom square element moved to new page.&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// å¢åŠ ã€åˆ é™¤ã€ä¿®æ”¹è‡ªèº«å±æ€§æ—¶è¢«è°ƒç”¨</span></span><br><span class="line">  <span class="function"><span class="title">attributeChangedCallback</span>(<span class="params">name, oldValue, newValue</span>)</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;Custom square element attributes changed.&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">customElements.define(<span class="string">&quot;custom-square&quot;</span>, Square);</span><br></pre></td></tr></table></figure>

<h3 id="ç”¨åˆ°-API"><a href="#ç”¨åˆ°-API" class="headerlink" title="ç”¨åˆ° API"></a>ç”¨åˆ° API</h3><p>attachShadow({ mode: â€˜openâ€™ }): ShadowRoot, ç”Ÿæˆä¸€ä¸ªå¯ä»¥è¢«æŒ‚åœ¨çš„å…ƒç´ ï¼Œè¿”å› ShadowRoot</p>
<ul>
<li>mode: openï¼Œå…ƒç´ å¯ä»¥è¢«å¤–éƒ¨å…ƒç´ é€šè¿‡ js è·å–</li>
<li>mode: close, ä¸èƒ½è¢«è·å–</li>
</ul>
]]></content>
      <categories>
        <category>å‰ç«¯</category>
      </categories>
  </entry>
  <entry>
    <title>webpack</title>
    <url>/blog/2020/11/17/webpack/</url>
    <content><![CDATA[<h3 id="webpack-config-js"><a href="#webpack-config-js" class="headerlink" title="webpack.config.js"></a>webpack.config.js</h3><p>è¯¥é…ç½®åªæ˜¯ä»‹ç»ï¼Œåœ¨å®é™…é¡¹ç›®ä¸­å–æ‰€éœ€å³å¯ï¼Œversion 5</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&quot;path&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> webpack = <span class="built_in">require</span>(<span class="string">&quot;webpack&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> HtmlWebpackPlugin = <span class="built_in">require</span>(<span class="string">&quot;html-webpack-plugin&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> &#123; CleanWebpackPlugin &#125; = <span class="built_in">require</span>(<span class="string">&quot;clean-webpack-plugin&quot;</span>);</span><br><span class="line"><span class="comment">// å·²è¿‡æ—¶</span></span><br><span class="line"><span class="keyword">const</span> ExtractTextPlugin = <span class="built_in">require</span>(<span class="string">&quot;extract-text-webpack-plugin&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  mode: <span class="string">&quot;production&quot;</span>, <span class="comment">// &quot;production&quot; | &quot;development&quot; | &quot;none&quot;</span></span><br><span class="line">  entry: <span class="string">&quot;./src/index.js&quot;</span>,</span><br><span class="line">  output: &#123;</span><br><span class="line">    filename: <span class="string">&quot;bundle.js&quot;</span>, <span class="comment">// string</span></span><br><span class="line">    <span class="comment">// filename: &quot;[name].js&quot;, // ç”¨äºå¤šä¸ªå…¥å£ç‚¹(entry point)ï¼ˆå‡ºå£ç‚¹ï¼Ÿï¼‰</span></span><br><span class="line">    <span class="comment">// filename: &quot;[chunkhash].js&quot;, // ç”¨äºé•¿æ•ˆç¼“å­˜</span></span><br><span class="line">    <span class="comment">// filename: &quot;[name].[hash].bundle.js&quot;</span></span><br><span class="line">    <span class="comment">// filename: &quot;[id].bundle.js&quot;</span></span><br><span class="line"></span><br><span class="line">    path: path.resolve(__dirname, <span class="string">&quot;dist&quot;</span>),</span><br><span class="line">    <span class="comment">// ç”Ÿæˆæ–‡ä»¶çš„è·¯å¾„ä¿¡æ¯</span></span><br><span class="line">    pathinfo: <span class="literal">true</span>,</span><br><span class="line"></span><br><span class="line">    <span class="comment">// èµ„æºæ–‡ä»¶çš„è®¿é—®è·¯å¾„ï¼Œå¦‚æœä½¿ç”¨CDNæ–¹å¼ï¼Œå¯ä»¥ä¿®æ”¹æ­¤é…ç½®</span></span><br><span class="line">    <span class="comment">// publicPath: &quot;https://cdn.example.com/&quot;,</span></span><br><span class="line">    publicPath: <span class="string">&quot;&quot;</span>,</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è‡ªå®šä¹‰èµ„æºç›®å½•/æ–‡ä»¶å</span></span><br><span class="line">    assetModuleFilename: <span class="string">&quot;images/[hash][ext][query]&quot;</span>,</span><br><span class="line">    <span class="comment">// ä¸libraryTargetä¸€èµ·ä½¿ç”¨</span></span><br><span class="line">    library: <span class="string">&quot;mylibrary&quot;</span>,</span><br><span class="line">    <span class="comment">// umd ç»Ÿä¸€æ¨¡å—å®šä¹‰ï¼Œæ”¯æŒamd commonjsç­‰</span></span><br><span class="line">    libraryTarget: <span class="string">&quot;umd&quot;</span></span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// åŒ…(bundle)åº”è¯¥è¿è¡Œçš„ç¯å¢ƒ</span></span><br><span class="line">  <span class="comment">// å¯ä»¥ç»´æŠ¤å¤šä¸ª</span></span><br><span class="line">  target: [<span class="string">&quot;node12.18&quot;</span>, <span class="string">&quot;es5&quot;</span>, <span class="string">&quot;web&quot;</span>],</span><br><span class="line">  plugins: [</span><br><span class="line">    <span class="comment">// æ‰“åŒ…å‰æ¸…ç†æ„å»ºç›®å½•</span></span><br><span class="line">    <span class="keyword">new</span> CleanWebpackPlugin(),</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å°†cssæŠ½ç¦»å•ç‹¬çš„cssæ–‡ä»¶ï¼Œé…åˆmodule.rulesä½¿ç”¨</span></span><br><span class="line">    <span class="keyword">new</span> ExtractTextPlugin(<span class="string">&quot;styles.css&quot;</span>),</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ç”Ÿæˆindex.htmlï¼Œå¹¶è‡ªåŠ¨å°†bundle.jså¯¼å…¥</span></span><br><span class="line">    <span class="keyword">new</span> HtmlWebpackPlugin(&#123;</span><br><span class="line">      <span class="comment">// html titleå±æ€§</span></span><br><span class="line">      title: <span class="string">&quot;Hot Module Replacement&quot;</span>,</span><br><span class="line">      <span class="comment">// ç”Ÿæˆhtmlçš„æ–‡ä»¶å</span></span><br><span class="line">      filename: <span class="string">&quot;index2.html&quot;</span>,</span><br><span class="line">      <span class="comment">// &lt;base href=&quot;http://example.com/some/page.html&quot; target=&quot;_blank&quot;&gt;</span></span><br><span class="line">      base: &#123;</span><br><span class="line">        <span class="comment">// string | object</span></span><br><span class="line">        href: <span class="string">&quot;http://example.com/some/page.html&quot;</span>,</span><br><span class="line">        target: <span class="string">&quot;_blank&quot;</span>,</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;),</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ã€ç¼–è¯‘æ—¶ã€‘å¯ä»¥å®šä¹‰çš„å…¨å±€å¸¸é‡ã€‚eg:</span></span><br><span class="line">    <span class="comment">// if (!PRODUCTION) &#123;</span></span><br><span class="line">    <span class="comment">//   console.log(&#x27;Debug info&#x27;)</span></span><br><span class="line">    <span class="comment">// &#125;</span></span><br><span class="line">    <span class="keyword">new</span> webpack.DefinePlugin(&#123;</span><br><span class="line">      PRODUCTION: <span class="built_in">JSON</span>.stringify(<span class="literal">true</span>),</span><br><span class="line">      VERSION: <span class="built_in">JSON</span>.stringify(<span class="string">&quot;5fa3b9&quot;</span>),</span><br><span class="line">      BROWSER_SUPPORTS_HTML5: <span class="literal">true</span>,</span><br><span class="line">      TWO: <span class="string">&quot;1+1&quot;</span>,</span><br><span class="line">      <span class="string">&quot;typeof window&quot;</span>: <span class="built_in">JSON</span>.stringify(<span class="string">&quot;object&quot;</span>),</span><br><span class="line">    &#125;),</span><br><span class="line">  ],</span><br><span class="line">  <span class="comment">// ä¼˜åŒ–å±æ€§</span></span><br><span class="line">  optimization: &#123;</span><br><span class="line">    <span class="comment">// å‘ŠçŸ¥ webpack ä½¿ç”¨ TerserPlugin æˆ–å…¶å®ƒåœ¨ optimization.minimizer å®šä¹‰çš„æ’ä»¶å‹ç¼© bundleã€‚</span></span><br><span class="line">    minimize: <span class="literal">true</span>,</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å¤šä¸ªchunkå…±äº«ä¸€ä¸ªå®ä¾‹</span></span><br><span class="line">    runtimeChunk: <span class="string">&quot;single&quot;</span>,</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ç”Ÿæˆæ¨¡å—IDéœ€è¦çš„ç®—æ³•</span></span><br><span class="line">    <span class="comment">// &#x27;natural&#x27; | &#x27;named&#x27; | &#x27;deterministic&#x27; | &#x27;size&#x27;</span></span><br><span class="line">    moduleIds: <span class="string">&quot;deterministic&quot;</span>, <span class="comment">// deterministicæœ‰ç›Šäºé•¿æœŸç¼“å­˜</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// é€šè¿‡æ­¤å±æ€§è‡ªå®šä¹‰å‹ç¼©bundleæ’ä»¶</span></span><br><span class="line">    minimizer: [</span><br><span class="line">      <span class="keyword">new</span> TerserPlugin(&#123;</span><br><span class="line">        <span class="comment">// å¹¶å‘è¿›ç¨‹æ•°</span></span><br><span class="line">        parallel: <span class="literal">true</span>, <span class="comment">// boolean | number</span></span><br><span class="line">        sourceMap: <span class="literal">true</span>, <span class="comment">// å¦‚æœåœ¨ç”Ÿäº§ç¯å¢ƒä¸­ä½¿ç”¨ source-mapsï¼Œå¿…é¡»è®¾ç½®ä¸º true</span></span><br><span class="line">        <span class="comment">// https://github.com/webpack-contrib/terser-webpack-plugin#terseroptions</span></span><br><span class="line">        terserOptions: &#123;</span><br><span class="line">          compress: &#123;</span><br><span class="line">            <span class="comment">// åˆ é™¤æ‰€æœ‰console.*æ–¹æ³•</span></span><br><span class="line">            drop_console: <span class="literal">true</span>,</span><br><span class="line">          &#125;,</span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;),</span><br><span class="line">    ],</span><br><span class="line"></span><br><span class="line">    removeAvailableModules: <span class="literal">false</span>,</span><br><span class="line">    removeEmptyChunks: <span class="literal">false</span>,</span><br><span class="line"></span><br><span class="line">    <span class="comment">// v4ç‰ˆæœ¬å¼€å§‹ï¼Œä½¿ç”¨æ­¤å±æ€§ä»£æ›¿CommonsChunkPlugin</span></span><br><span class="line">    splitChunks: &#123;</span><br><span class="line">      chunks: <span class="string">&quot;async&quot;</span>, <span class="comment">// all | async | () =&gt; boolean // å‡½æ•°å¯ç”¨äºæ’é™¤æ¨¡å—</span></span><br><span class="line">      <span class="comment">// ç”Ÿæˆchunkçš„æœ€å°å€¼</span></span><br><span class="line">      minSize: <span class="number">20000</span>,</span><br><span class="line">      minRemainingSize: <span class="number">0</span>,</span><br><span class="line">      maxSize: <span class="number">0</span>,</span><br><span class="line">      <span class="comment">// æ‹†åˆ†å‰ï¼Œå¿…é¡»å…±äº«çš„chunksæ•°</span></span><br><span class="line">      minChunks: <span class="number">1</span>,</span><br><span class="line">      maxAsyncRequests: <span class="number">30</span>,</span><br><span class="line">      maxInitialRequests: <span class="number">30</span>,</span><br><span class="line">      automaticNameDelimiter: <span class="string">&quot;~&quot;</span>,</span><br><span class="line">      enforceSizeThreshold: <span class="number">50000</span>,</span><br><span class="line">      <span class="comment">// TODO</span></span><br><span class="line">      cacheGroups: &#123;</span><br><span class="line">        defaultVendors: &#123;</span><br><span class="line">          test: <span class="regexp">/[\\/]node_modules[\\/]/</span>,</span><br><span class="line">          priority: -<span class="number">10</span>,</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="keyword">default</span>: &#123;</span><br><span class="line">          minChunks: <span class="number">2</span>,</span><br><span class="line">          priority: -<span class="number">20</span>,</span><br><span class="line">          reuseExistingChunk: <span class="literal">true</span>,</span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// ä¾‹å¦‚ï¼Œä½¿ç”¨cdnæ—¶ï¼Œå¯ä»¥ç”¨</span></span><br><span class="line">  <span class="comment">// é˜²æ­¢å°†æŸäº› import çš„åŒ…(package)æ‰“åŒ…åˆ° bundle ä¸­ï¼Œè€Œæ˜¯åœ¨è¿è¡Œæ—¶(runtime)å†å»ä»å¤–éƒ¨è·å–è¿™äº›æ‰©å±•ä¾èµ–</span></span><br><span class="line">  externals: &#123;</span><br><span class="line">    jquery: <span class="string">&quot;jQuery&quot;</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// æ¨¡å—å¦‚ä½•è§£æ</span></span><br><span class="line">  resolve: &#123;</span><br><span class="line">    <span class="comment">// å¼•ç”¨å¿…é¡»å¸¦æ‰©å±•å</span></span><br><span class="line">    <span class="comment">// require(&#x27;./foo.js&#x27;)</span></span><br><span class="line">    enforceExtension: <span class="literal">true</span>,</span><br><span class="line"></span><br><span class="line">    <span class="comment">// importæ–‡ä»¶æ—¶ï¼ŒæŒ‰é¡ºåºè§£ææ‰©å±•å</span></span><br><span class="line">    <span class="comment">// import File from &#x27;../path/to/file&#x27;;</span></span><br><span class="line">    extensions: [<span class="string">&#x27;.wasm&#x27;</span>, <span class="string">&#x27;.mjs&#x27;</span>, <span class="string">&#x27;.js&#x27;</span>, <span class="string">&#x27;.json&#x27;</span>]</span><br><span class="line"></span><br><span class="line">    <span class="comment">// åˆ«åï¼Œæ ¹æ®package.jsonä¸­çš„browser(æ•°ç»„ä¸­å®šä¹‰çš„å­—æ®µ)å±æ€§é…ç½®, è§ resolve.aliasFields</span></span><br><span class="line">    aliasFields: [<span class="string">&#x27;browser&#x27;</span>]</span><br><span class="line"></span><br><span class="line">    <span class="comment">// åˆ›å»ºä¸€ä¸ªåˆ«åï¼Œæ”¹å˜å¼•å…¥æ–¹å¼ã€‚</span></span><br><span class="line">    <span class="comment">// import &#123; square &#125; from &quot;@/math.js&quot;;</span></span><br><span class="line">    <span class="comment">// import &#123; square &#125; from &quot;src/math.js&quot;;</span></span><br><span class="line">    alias: &#123;</span><br><span class="line">      <span class="string">&quot;@&quot;</span>: path.resolve(__dirname, <span class="string">&quot;src&quot;</span>),</span><br><span class="line">      <span class="comment">// æœ«å°¾åŠ $. ç²¾ç¡®åŒ¹é…</span></span><br><span class="line">      <span class="comment">// import Test1 from &#x27;xyz&#x27;;</span></span><br><span class="line">      xyz$: path.resolve(__dirname, <span class="string">&quot;path/to/file.js&quot;</span>),</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// è§£æå¤±è´¥æ—¶ï¼Œè®¿é—®æŒ‡å®šçš„module</span></span><br><span class="line">    fallback: &#123;</span><br><span class="line">      xyz: path.resolve(__dirname, <span class="string">&quot;path/to/file.js&quot;</span>),</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// å‘Šè¯‰ webpack è§£ææ¨¡å—æ—¶åº”è¯¥æœç´¢çš„ç›®å½•ã€‚</span></span><br><span class="line">    modules: [path.resolve(__dirname, <span class="string">&#x27;src&#x27;</span>), <span class="string">&#x27;node_modules&#x27;</span>]</span><br><span class="line">  &#125;,</span><br><span class="line">  devServer: &#123;</span><br><span class="line">    <span class="comment">// TODO èµ„æºè®¿é—®åœ°å€</span></span><br><span class="line">    public: <span class="string">&quot;myapp.test:80&quot;</span>,</span><br><span class="line">    publicPath: <span class="string">&quot;/assets/&quot;</span>,</span><br><span class="line">    <span class="comment">// å¼€å¯gzipå‹ç¼©</span></span><br><span class="line">    compress: <span class="literal">true</span>,</span><br><span class="line">    port: <span class="number">9000</span>,</span><br><span class="line">    proxy: &#123;</span><br><span class="line">      <span class="string">&quot;/api&quot;</span>: &#123;</span><br><span class="line">        target: <span class="string">&quot;http://localhost:3000&quot;</span>,</span><br><span class="line">        <span class="comment">// é‡å†™path /api =&gt; /path&quot;</span></span><br><span class="line">        pathRewrite: &#123; <span class="string">&quot;^/api&quot;</span>: <span class="string">&quot;/path&quot;</span> &#125;,</span><br><span class="line">        <span class="comment">// ä¸é€‚ç”¨httpsè®¿é—®</span></span><br><span class="line">        secure: <span class="literal">false</span>,</span><br><span class="line">        changeOrigin: <span class="literal">true</span>,</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// ä»£ç†å¤šä¸ªpathï¼ŒæŒ‡å‘åŒä¸€ä¸ªåœ°å€</span></span><br><span class="line">    proxy: [</span><br><span class="line">      &#123;</span><br><span class="line">        context: [<span class="string">&quot;/auth&quot;</span>, <span class="string">&quot;/api&quot;</span>],</span><br><span class="line">        target: <span class="string">&quot;http://localhost:3000&quot;</span>,</span><br><span class="line">      &#125;,</span><br><span class="line">    ],</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="built_in">module</span>: &#123;</span><br><span class="line">    rules: [</span><br><span class="line">      <span class="comment">// cssæ ·å¼è§£é‡Šå™¨</span></span><br><span class="line">      &#123;</span><br><span class="line">        test: <span class="regexp">/\.css$/</span>,</span><br><span class="line">        use: [<span class="string">&quot;style-loader&quot;</span>, <span class="string">&quot;css-loader&quot;</span>],</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        test: <span class="regexp">/\.js$/</span>,</span><br><span class="line">        <span class="comment">// éœ€è¦babelç¼–è¯‘çš„æ–‡ä»¶</span></span><br><span class="line">        include: path.resolve(__dirname, <span class="string">&quot;src&quot;</span>),</span><br><span class="line">        loader: <span class="string">&quot;babel-loader&quot;</span>,</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        test: <span class="regexp">/\.tsx?$/</span>,</span><br><span class="line">        use: [</span><br><span class="line">          &#123;</span><br><span class="line">            loader: <span class="string">&quot;ts-loader&quot;</span>,</span><br><span class="line">            options: &#123;</span><br><span class="line">              <span class="comment">// ä¸é€‚ç”¨ç±»å‹æ£€æŸ¥ï¼Œæé«˜æ„å»ºæ•ˆç‡</span></span><br><span class="line">              transpileOnly: <span class="literal">true</span>,</span><br><span class="line">            &#125;,</span><br><span class="line">          &#125;,</span><br><span class="line">        ],</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="comment">// åœ¨jsä¸­å¯¼å…¥å›¾ç‰‡ï¼Œè¯¦è§ï¼šAsset Modules</span></span><br><span class="line">      <span class="comment">// import Icon from &quot;../assets/images/01-1.png&quot;;</span></span><br><span class="line">      <span class="comment">//  const myIcon = new Image();</span></span><br><span class="line">      <span class="comment">//  myIcon.src = Icon;</span></span><br><span class="line">      &#123;</span><br><span class="line">        test: <span class="regexp">/\.(png|svg|jpg|jpeg|gif)$/i</span>,</span><br><span class="line">        type: <span class="string">&quot;asset/resource&quot;</span>,</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="comment">// é…åˆExtractTextPluginä½¿ç”¨</span></span><br><span class="line">      <span class="comment">//use: ExtractTextPlugin.extract(&#123;</span></span><br><span class="line">      <span class="comment">//   fallback: &quot;style-loader&quot;,</span></span><br><span class="line">      <span class="comment">//   use: &quot;css-loader&quot;</span></span><br><span class="line">      <span class="comment">// &#125;)</span></span><br><span class="line"></span><br><span class="line">      <span class="comment">// åŠ è½½å­—ä½“</span></span><br><span class="line">      &#123;</span><br><span class="line">        test: <span class="regexp">/\.(woff|woff2|eot|ttf|otf)$/i</span>,</span><br><span class="line">        type: <span class="string">&quot;asset/resource&quot;</span>,</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="comment">// import Notes from &#x27;./data.csv&#x27;;</span></span><br><span class="line">      &#123;</span><br><span class="line">        test: <span class="regexp">/\.(csv|tsv)$/i</span>,</span><br><span class="line">        use: [<span class="string">&quot;csv-loader&quot;</span>],</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        test: <span class="regexp">/\.xml$/i</span>,</span><br><span class="line">        use: [<span class="string">&quot;xml-loader&quot;</span>],</span><br><span class="line">      &#125;,</span><br><span class="line">    ],</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h3 id="æ¨¡å—çƒ­æ›¿æ¢"><a href="#æ¨¡å—çƒ­æ›¿æ¢" class="headerlink" title="æ¨¡å—çƒ­æ›¿æ¢"></a>æ¨¡å—çƒ­æ›¿æ¢</h3><h3 id="å¼€å‘"><a href="#å¼€å‘" class="headerlink" title="å¼€å‘"></a>å¼€å‘</h3><p>ä½¿ç”¨ inline-source-map å·¥å…·ï¼Œå¯ä»¥è¿½è¸ªé”™è¯¯å’Œè­¦å‘Šåœ¨æºä»£ç ä¸­çš„ä½ç½®ã€‚</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="Asset-Modules"><a href="#Asset-Modules" class="headerlink" title="Asset Modules"></a>Asset Modules</h3><h3 id="ä»£ç åˆ†å‰²"><a href="#ä»£ç åˆ†å‰²" class="headerlink" title="ä»£ç åˆ†å‰²"></a>ä»£ç åˆ†å‰²</h3><ol>
<li>å•é¡µé¢å¤šå…¥å£</li>
</ol>
<p>å•é¡µé¢å¤šå…¥å£æ—¶ï¼Œéœ€è¦æ·»åŠ é…ç½® <code>optimization.runtimeChunk = &quot;single&quot;</code>ï¼Œä½¿æ¯ä¸ªæ¨¡å—å…±äº«ä¸€ä¸ªå®ä¾‹ã€‚</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&quot;path&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> &#123; CleanWebpackPlugin &#125; = <span class="built_in">require</span>(<span class="string">&quot;clean-webpack-plugin&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> HtmlWebpackPlugin = <span class="built_in">require</span>(<span class="string">&quot;html-webpack-plugin&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  entry: &#123;</span><br><span class="line">    <span class="string">&quot;component-1&quot;</span>: <span class="string">&quot;./src/component-1.js&quot;</span>,</span><br><span class="line">    <span class="string">&quot;component-2&quot;</span>: <span class="string">&quot;./src/component-2.js&quot;</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// inline-cheap-source-map | eval-source-map and so on</span></span><br><span class="line">  devtool: <span class="string">&quot;inline-source-map&quot;</span>, <span class="comment">// æ„å»ºé€Ÿåº¦ç›¸å¯¹cheapç¼“æ…¢</span></span><br><span class="line">  plugins: [</span><br><span class="line">    <span class="keyword">new</span> CleanWebpackPlugin(),</span><br><span class="line">    <span class="keyword">new</span> HtmlWebpackPlugin(&#123;</span><br><span class="line">      title: <span class="string">&quot;Production&quot;</span>,</span><br><span class="line">    &#125;),</span><br><span class="line">  ],</span><br><span class="line">  optimization: &#123;</span><br><span class="line">    runtimeChunk: <span class="string">&quot;single&quot;</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  output: &#123;</span><br><span class="line">    filename: <span class="string">&quot;[name].[contenthash].bundle.js&quot;</span>,</span><br><span class="line">    path: path.resolve(__dirname, <span class="string">&quot;dist&quot;</span>),</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>component-1.js</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> obj <span class="keyword">from</span> <span class="string">&quot;./obj.js&quot;</span>;</span><br><span class="line">obj.count++;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&quot;component-1&quot;</span>, obj.count);</span><br></pre></td></tr></table></figure>

<p>component-2.js</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> obj <span class="keyword">from</span> <span class="string">&quot;./obj.js&quot;</span>;</span><br><span class="line">obj.count++;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&quot;component-2&quot;</span>, obj.count);</span><br></pre></td></tr></table></figure>

<p>obj.js</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123; <span class="attr">count</span>: <span class="number">0</span> &#125;;</span><br></pre></td></tr></table></figure>

<p>æ·»åŠ  runtimeChunk: â€œsingleâ€ï¼Œå…±äº«ä¸€ä¸ªå®ä¾‹</p>
<img src="/blog/2020/11/17/webpack/runtimeChunk-single.png" class>

<p>ä¸¤ä¸ªæ¨¡å—åˆ†åˆ«å®ä¾‹ï¼Œcount ä¸º 1</p>
<img src="/blog/2020/11/17/webpack/no-runtimeChunk-single.png" class>

<ol start="2">
<li>é˜²æ­¢é‡å¤</li>
</ol>
<p>æ·»åŠ å±æ€§ dependOn ä½¿ä¸¤ä¸ª chunk ä¹‹é—´å…±äº«ä¸€ä¸ª module</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&quot;path&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  mode: <span class="string">&quot;development&quot;</span>,</span><br><span class="line">  entry: &#123;</span><br><span class="line">    index: <span class="string">&quot;./src/index.js&quot;</span>,</span><br><span class="line">    another: <span class="string">&quot;./src/another-module.js&quot;</span>,</span><br><span class="line">    index: &#123;</span><br><span class="line">      <span class="keyword">import</span>: <span class="string">&quot;./src/index.js&quot;</span>,</span><br><span class="line">      dependOn: <span class="string">&quot;shared&quot;</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">    another: &#123;</span><br><span class="line">      <span class="keyword">import</span>: <span class="string">&quot;./src/another-module.js&quot;</span>,</span><br><span class="line">      dependOn: <span class="string">&quot;shared&quot;</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">    shared: <span class="string">&quot;lodash&quot;</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  output: &#123;</span><br><span class="line">    filename: <span class="string">&quot;[name].bundle.js&quot;</span>,</span><br><span class="line">    path: path.resolve(__dirname, <span class="string">&quot;dist&quot;</span>),</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>åŠ¨æ€å¯¼å…¥</li>
</ol>
<p>webpack æä¾›çš„æ¥å£<code>import() or require.ensure</code>ï¼Œå®ç°æ¨¡å—çš„æ‡’åŠ è½½</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getComponent</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> element = <span class="built_in">document</span>.createElement(<span class="string">&quot;div&quot;</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">import</span>(<span class="string">&quot;lodash&quot;</span>)</span><br><span class="line">    .then(<span class="function">(<span class="params">&#123; <span class="keyword">default</span>: _ &#125;</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">const</span> element = <span class="built_in">document</span>.createElement(<span class="string">&quot;div&quot;</span>);</span><br><span class="line"></span><br><span class="line">      element.innerHTML = _.join([<span class="string">&quot;Hello&quot;</span>, <span class="string">&quot;webpack&quot;</span>], <span class="string">&quot; &quot;</span>);</span><br><span class="line"></span><br><span class="line">      <span class="keyword">return</span> element;</span><br><span class="line">    &#125;)</span><br><span class="line">    .catch(<span class="function">(<span class="params">error</span>) =&gt;</span> <span class="string">&quot;An error occurred while loading the component&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">getComponent().then(<span class="function">(<span class="params">component</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">document</span>.body.appendChild(component);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h3 id="resolve"><a href="#resolve" class="headerlink" title="resolve"></a>resolve</h3><ol>
<li>resolve.aliasFields</li>
</ol>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  <span class="comment">//...</span></span><br><span class="line">  resolve: &#123;</span><br><span class="line">    aliasFields: [<span class="string">&quot;browser&quot;</span>],</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>package.json</p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">  <span class="attr">&quot;browser&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;module-a&quot;</span>: <span class="string">&quot;./webpack/browser.js&quot;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>index.js</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> br <span class="keyword">from</span> <span class="string">&quot;module-a&quot;</span>;</span><br><span class="line"><span class="comment">// ...</span></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>å·¥å…·</category>
      </categories>
      <tags>
        <tag>webpack</tag>
      </tags>
  </entry>
  <entry>
    <title>ä½¿ç”¨hexoå¿«é€Ÿå»ºè‡ªå·±çš„åšå®¢</title>
    <url>/blog/2020/10/20/%E4%BD%BF%E7%94%A8hexo%E5%BF%AB%E9%80%9F%E5%BB%BA%E8%87%AA%E5%B7%B1%E7%9A%84%E5%8D%9A%E5%AE%A2/</url>
    <content><![CDATA[<p>Hexo æ˜¯ä¸€ä¸ªå¿«é€Ÿã€ç®€æ´ä¸”é«˜æ•ˆçš„åšå®¢æ¡†æ¶</p>
<h3 id="å®‰è£…-hexo"><a href="#å®‰è£…-hexo" class="headerlink" title="å®‰è£… hexo"></a>å®‰è£… hexo</h3><p>ä½¿ç”¨ npm å…¨å±€å®‰è£… hexo</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ npm install -g hexo-cli</span><br></pre></td></tr></table></figure>

<h3 id="é¡¹ç›®åˆå§‹åŒ–"><a href="#é¡¹ç›®åˆå§‹åŒ–" class="headerlink" title="é¡¹ç›®åˆå§‹åŒ–"></a>é¡¹ç›®åˆå§‹åŒ–</h3><p>å®‰è£…å®Œæˆ hexo åï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤æ–°å»ºé¡¹ç›®å¹¶å®‰è£…ä¾èµ–åº“</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo init &lt;folder&gt;</span><br><span class="line">$ <span class="built_in">cd</span> &lt;folder&gt;</span><br><span class="line">$ npm install</span><br></pre></td></tr></table></figure>

<h3 id="è¿è¡Œ"><a href="#è¿è¡Œ" class="headerlink" title="è¿è¡Œ"></a>è¿è¡Œ</h3><p>æ‰€æœ‰æ­¥éª¤æ‰§è¡Œå®Œæ¯•ä¹‹åï¼Œæ‰§è¡Œå‘½ä»¤ hexo s åœ¨æœ¬åœ°è¿è¡ŒæŸ¥çœ‹æ•ˆæœ</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo s</span><br></pre></td></tr></table></figure>

<h3 id="éƒ¨ç½²åˆ°-github"><a href="#éƒ¨ç½²åˆ°-github" class="headerlink" title="éƒ¨ç½²åˆ° github"></a>éƒ¨ç½²åˆ° github</h3><p>çœ‹å®Œæ•ˆæœè§‰å¾—è¿˜ä¸é”™ï¼Œæƒ³éƒ¨ç½²åˆ° github ä¸Šè®©æ‰€æœ‰äººçœ‹åˆ°ï¼Ÿæ¥è¯•è¯•ä¿®æ”¹_config.yml æ–‡ä»¶</p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">deploy:</span></span><br><span class="line">  <span class="attr">type:</span> <span class="string">git</span></span><br><span class="line">  <span class="attr">repo:</span> <span class="string">&lt;åšå®¢ä»“åº“åœ°å€&gt;</span> <span class="comment">#https://bitbucket.org/JohnSmith/johnsmith.bitbucket.io</span></span><br><span class="line">  <span class="attr">branch:</span> [<span class="string">åˆ†æ”¯</span>]</span><br><span class="line">  <span class="attr">message:</span> [<span class="string">è‡ªå®šä¹‰æäº¤ä¿¡æ¯</span>]</span><br></pre></td></tr></table></figure>

<h3 id="å®‰è£…éƒ¨ç½²æ’ä»¶"><a href="#å®‰è£…éƒ¨ç½²æ’ä»¶" class="headerlink" title="å®‰è£…éƒ¨ç½²æ’ä»¶"></a>å®‰è£…éƒ¨ç½²æ’ä»¶</h3><p>ç­‰ç­‰ï¼Œé…ç½®æ–‡ä»¶ä¿®æ”¹å®Œäº†ï¼Œå°±ç›´æ¥éƒ¨ç½²åˆ° github ä¸Šäº†å—ï¼Ÿ|â€” â€“ |</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ npm install hexo-deployer-git --save</span><br><span class="line"><span class="comment"># æ¸…ç†ç¼“å­˜</span></span><br><span class="line">$ hexo clean &amp;&amp; hexo deploy</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="éƒ¨ç½²åˆ°-github-æ²¡æœ‰æ ·å¼"><a href="#éƒ¨ç½²åˆ°-github-æ²¡æœ‰æ ·å¼" class="headerlink" title="éƒ¨ç½²åˆ° github æ²¡æœ‰æ ·å¼"></a>éƒ¨ç½²åˆ° github æ²¡æœ‰æ ·å¼</h3><p>éƒ¨ç½²åˆ° github ä¸Šå‘ç°æ²¡æœ‰æ ·å¼ï¼Œå‘ç°èµ„æºæ–‡ä»¶è·¯å¾„ä¸å¯¹ï¼Œäºæ˜¯ä¿®æ”¹ä»¥ä¸‹é…ç½®ï¼Œé‡æ–°å‘å¸ƒ</p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">url:</span> <span class="string">https://yaqilee.github.io/resposity</span></span><br><span class="line"><span class="attr">root:</span> <span class="string">/resposity/</span></span><br></pre></td></tr></table></figure>

<p>æ¸…ç†ç¼“å­˜ï¼Œé‡æ–°ç”Ÿæˆ, å¦‚æœåˆ é™¤æ–‡ä»¶æŠ¥é”™ï¼Œå¤šè¯•å‡ æ¬¡</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo clean</span><br><span class="line">$ hexo g</span><br><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure>

<p>æ‰§è¡Œä¸‹åˆ—ä»»ä¸€å‘½ä»¤ï¼Œä¹Ÿå¯ä»¥è‡ªåŠ¨éƒ¨ç½²ç½‘ç«™</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo generate --deploy</span><br><span class="line">$ hexo deploy --generate</span><br></pre></td></tr></table></figure>

<h3 id="å¯ç”¨ç«™å†…æœç´¢"><a href="#å¯ç”¨ç«™å†…æœç´¢" class="headerlink" title="å¯ç”¨ç«™å†…æœç´¢"></a>å¯ç”¨ç«™å†…æœç´¢</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm install hexo-generator-searchdb --save</span><br></pre></td></tr></table></figure>
<p>_config.yml</p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">local_search:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span> <span class="comment"># å¯ç”¨</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æ·»åŠ é…ç½®</span></span><br><span class="line"><span class="attr">search:</span></span><br><span class="line">  <span class="attr">path:</span> <span class="string">search.xml</span></span><br><span class="line">  <span class="attr">field:</span> <span class="string">post</span></span><br><span class="line">  <span class="attr">format:</span> <span class="string">html</span></span><br><span class="line">  <span class="attr">limit:</span> <span class="number">10000</span></span><br></pre></td></tr></table></figure>

<h3 id="å…¶ä»–æ“ä½œ"><a href="#å…¶ä»–æ“ä½œ" class="headerlink" title="å…¶ä»–æ“ä½œ"></a>å…¶ä»–æ“ä½œ</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># æ–°å»ºé¡µé¢</span></span><br><span class="line">$ hexo new page [æ–°é¡µé¢åç§°]</span><br><span class="line"><span class="comment"># æ–°å»ºå¸–å­</span></span><br><span class="line">$ hexo new [åšå®¢æ ‡é¢˜]</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>å·¥å…·</category>
      </categories>
      <tags>
        <tag>hexo</tag>
      </tags>
  </entry>
  <entry>
    <title>åœ¨ubantuå®‰è£…MariaDB</title>
    <url>/blog/2020/10/20/%E5%AE%89%E8%A3%85maridb/</url>
    <content><![CDATA[<h3 id="å®‰è£…-MariaDB"><a href="#å®‰è£…-MariaDB" class="headerlink" title="å®‰è£… MariaDB"></a>å®‰è£… MariaDB</h3><p>é€šè¿‡è½¯ä»¶æºä»“åº“å®‰è£… MariaDBï¼Œè¿è¡Œä»¥ä¸‹å‘½ä»¤</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo apt update</span><br><span class="line">sudo apt install mariadb-server</span><br></pre></td></tr></table></figure>

<p>å®‰è£…å®Œæˆä¹‹åç¨‹åºä¼šè‡ªåŠ¨å¯åŠ¨ï¼Œæƒ³è¦éªŒè¯æ˜¯å¦è¿è¡Œï¼Œ</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo systemctl status mariadb</span><br></pre></td></tr></table></figure>

<h3 id="MariaDB-å®‰å…¨è®¾ç½®"><a href="#MariaDB-å®‰å…¨è®¾ç½®" class="headerlink" title="MariaDB å®‰å…¨è®¾ç½®"></a>MariaDB å®‰å…¨è®¾ç½®</h3><p>å®‰è£… mysql_secure_installation è„šæœ¬ï¼Œä»¥æ­¤æ¥è®¾ç½®å¯†ç ç­‰å®‰å…¨æ“ä½œï¼Œæ¥æé«˜æ•°æ®åº“çš„å®‰å…¨æ€§</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">apt install mariadb-server mysql_secure_installation</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>å·¥å…·</category>
      </categories>
      <tags>
        <tag>Ubantu</tag>
        <tag>MariaDB</tag>
      </tags>
  </entry>
  <entry>
    <title>æ’åºç®—æ³•</title>
    <url>/blog/2020/11/09/%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95/</url>
    <content><![CDATA[<h3 id="é€‰æ‹©æ’åº"><a href="#é€‰æ‹©æ’åº" class="headerlink" title="é€‰æ‹©æ’åº"></a>é€‰æ‹©æ’åº</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">selectSort</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; arr.length; i++) &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> j = i + <span class="number">1</span>; j &lt; arr.length; j++) &#123;</span><br><span class="line">      <span class="keyword">if</span> (arr[i] - arr[j] &gt; <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">let</span> temp = arr[i];</span><br><span class="line">        arr[i] = arr[j];</span><br><span class="line">        arr[j] = temp;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="æ’å…¥æ’åº"><a href="#æ’å…¥æ’åº" class="headerlink" title="æ’å…¥æ’åº"></a>æ’å…¥æ’åº</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">insertSort</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; arr.length; i++) &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> j = i; j &gt; <span class="number">0</span>; j--) &#123;</span><br><span class="line">      <span class="keyword">if</span> (arr[j] - arr[j - <span class="number">1</span>] &gt; <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      swap(arr, j, j - <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="å½’å¹¶æ’åº"><a href="#å½’å¹¶æ’åº" class="headerlink" title="å½’å¹¶æ’åº"></a>å½’å¹¶æ’åº</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">mergeSort</span>(<span class="params">arr</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (arr.length == <span class="number">1</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> arr;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">let</span> middle = <span class="built_in">Math</span>.floor(arr.length / <span class="number">2</span>),</span><br><span class="line">    left = arr.slice(<span class="number">0</span>, middle),</span><br><span class="line">    right = arr.slice(middle);</span><br><span class="line">  <span class="keyword">return</span> merge(mergeSort(left), mergeSort(right));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">merge</span>(<span class="params">left, right</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> result = [];</span><br><span class="line">  <span class="keyword">while</span> (left.length &gt; <span class="number">0</span> &amp;&amp; right.length &gt; <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (left[<span class="number">0</span>] &lt; right[<span class="number">0</span>]) &#123;</span><br><span class="line">      <span class="comment">/*shift()â½…æ³•â½¤äºæŠŠæ•°ç»„çš„ç¬¬â¼€ä¸ªå…ƒç´ ä»å…¶ä¸­åˆ é™¤ï¼Œå¹¶è¿”å›ç¬¬â¼€ä¸ªå…ƒç´ çš„å€¼ã€‚*/</span> result.push(</span><br><span class="line">        left.shift()</span><br><span class="line">      );</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      result.push(right.shift());</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> result.concat(left).concat(right);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="å¿«é€Ÿæ’åº"><a href="#å¿«é€Ÿæ’åº" class="headerlink" title="å¿«é€Ÿæ’åº"></a>å¿«é€Ÿæ’åº</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">quicksort</span>(<span class="params">arr = []</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (arr.length &lt;= <span class="number">1</span>) <span class="keyword">return</span> arr;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> pivot = <span class="built_in">Math</span>.floor(arr.length - <span class="number">1</span> / <span class="number">2</span>);</span><br><span class="line">  <span class="keyword">let</span> pivotVal = arr[pivot];</span><br><span class="line">  <span class="keyword">let</span> less = [],more = [];</span><br><span class="line"></span><br><span class="line">  arr.splice(pivot, <span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; pivot; i++) &#123;</span><br><span class="line">    <span class="keyword">if</span> (arr[i] &lt; pivotVal) &#123;</span><br><span class="line">      less.push(arr[i]); <span class="comment">// å°äºä¸­é—´å€¼ï¼Œå­˜less</span></span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      more.push(arr[i]); <span class="comment">// å¤§äºä¸­é—´å€¼ï¼Œå­˜less</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// æ¯æ¬¡å°†ç»“æœåˆå¹¶ï¼Œ é€’å½’è¿™é‡Œè¦ç®€å•ç‚¹æƒ³ï¼Œä¸è¦å»æƒ³ä»–çš„æ‰§è¡Œå“ªä¸€æ­¥ï¼Œè¿”å›çš„ç»“æœæ˜¯ä»€ä¹ˆ</span></span><br><span class="line">  <span class="keyword">return</span> [...quicksort(less), pivotVal, ...quicksort(more)];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>ç®—æ³•</category>
      </categories>
      <tags>
        <tag>ç®—æ³•</tag>
      </tags>
  </entry>
  <entry>
    <title>åŠ¨æ€è§„åˆ’</title>
    <url>/blog/2020/11/11/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92/</url>
    <content><![CDATA[<h3 id="åŒºé—´è°ƒåº¦"><a href="#åŒºé—´è°ƒåº¦" class="headerlink" title="åŒºé—´è°ƒåº¦"></a>åŒºé—´è°ƒåº¦</h3><p>[è´ªå¿ƒç®—æ³•][1,2],[3,4],[6,10],[4,6]]ï¼Œæ±‚æœ€å¤šæœ‰å‡ ä¸ªä¸ç›¸äº¤çš„åŒºé—´</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">intervalSchedule</span>(<span class="params">intvs</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (intvs.length === <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// æ ¹æ®å³åŒºé—´æ’åºï¼Œ[ [ 1, 4 ], [ 5, 7 ], [ 8, 10 ] ]</span></span><br><span class="line">  <span class="keyword">const</span> sortArray = intvs.sort(<span class="function">(<span class="params">a, b</span>) =&gt;</span> a[<span class="number">1</span>] - b[<span class="number">1</span>]);</span><br><span class="line">  <span class="keyword">let</span> xEnd = sortArray[<span class="number">0</span>][<span class="number">1</span>];</span><br><span class="line">  <span class="keyword">let</span> count = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span> (item <span class="keyword">of</span> intvs) &#123;</span><br><span class="line">    <span class="keyword">const</span> start = item[<span class="number">0</span>];</span><br><span class="line">    <span class="keyword">if</span> (start &gt;= xEnd) &#123;</span><br><span class="line">      count++;</span><br><span class="line">      xEnd = item[<span class="number">1</span>];</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> count;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">intervalSchedule([</span><br><span class="line">  [<span class="number">1</span>, <span class="number">4</span>],</span><br><span class="line">  [<span class="number">8</span>, <span class="number">10</span>],</span><br><span class="line">  [<span class="number">5</span>, <span class="number">7</span>],</span><br><span class="line">]);</span><br></pre></td></tr></table></figure>

<h3 id="ä¸¤åœ°è°ƒåº¦"><a href="#ä¸¤åœ°è°ƒåº¦" class="headerlink" title="ä¸¤åœ°è°ƒåº¦"></a>ä¸¤åœ°è°ƒåº¦</h3><p>[è´ªå¿ƒç®—æ³•]2N ä¸ªäººï¼Œå» A, B ä¸¤åº§åŸå¸‚æ—…æ¸¸ï¼Œæ¯åº§åŸå¸‚å» N ä¸ªäººã€‚ç¬¬ i ä¸ªäººå» A åº§åŸå¸‚è½¦è´¹ä¸º costs[i][0], B åº§åŸå¸‚è½¦è´¹ä¸º costs[i][1],é—®æ€æ ·åˆ†é…èŠ±è´¹æœ€å°‘</p>
<blockquote>
<p>å‡è®¾éƒ½å‡†å¤‡å» Bï¼Œç„¶åä» B ä¸­æŠ½å‡º N ä¸ªäººå» Aï¼Œæ€ä¹ˆæ ·æœ€çœé’±ï¼Ÿcosts[i][0] - costs[i][1] å€¼è¶Šå°è¶Šçœã€‚æ ¹æ® B-A æ’åº</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> twoCitySchedCost = <span class="function"><span class="keyword">function</span> (<span class="params">costs</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> sum = <span class="number">0</span>,</span><br><span class="line">    n = costs.length / <span class="number">2</span>;</span><br><span class="line">  costs.sort(<span class="function">(<span class="params">a, b</span>) =&gt;</span> a[<span class="number">0</span>] - a[<span class="number">1</span>] - (b[<span class="number">0</span>] - b[<span class="number">1</span>]));</span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">    sum += costs[i][<span class="number">0</span>] + costs[i + n][<span class="number">1</span>];</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> sum;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h3 id="æ–æ³¢é‚£å¥‘æ•°åˆ—"><a href="#æ–æ³¢é‚£å¥‘æ•°åˆ—" class="headerlink" title="æ–æ³¢é‚£å¥‘æ•°åˆ—"></a>æ–æ³¢é‚£å¥‘æ•°åˆ—</h3><p>1 1 2 3 5 8 â€¦ æ–æ³¢é‚£å¥‘æ•°åˆ—æ±‚ç¬¬ n ä¸ªæ•°æ˜¯å¤šå°‘</p>
<ol>
<li>é€’å½’</li>
</ol>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> fib = <span class="function"><span class="keyword">function</span> (<span class="params">n</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (n == <span class="number">1</span> || n == <span class="number">2</span>) <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> fib(n - <span class="number">1</span>) + fib(n - <span class="number">2</span>);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>åŠ¨æ€è§„åˆ’</li>
</ol>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fb</span>(<span class="params">n</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (n === <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (n == <span class="number">1</span> || n == <span class="number">2</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> prev = <span class="number">1</span>;</span><br><span class="line">  <span class="keyword">let</span> current = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">3</span>; i &lt;= n; i++) &#123;</span><br><span class="line">    <span class="keyword">let</span> sum = prev + current;</span><br><span class="line">    prev = current;</span><br><span class="line">    current = sum;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> current;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="æ•´æ•°æ‹†åˆ†"><a href="#æ•´æ•°æ‹†åˆ†" class="headerlink" title="æ•´æ•°æ‹†åˆ†"></a>æ•´æ•°æ‹†åˆ†</h3><p>ç»™å®šä¸€ä¸ªæ­£æ•´æ•° nï¼Œå°†å…¶æ‹†åˆ†ä¸ºè‡³å°‘ä¸¤ä¸ªæ­£æ•´æ•°çš„å’Œï¼Œå¹¶ä½¿è¿™äº›æ•´æ•°çš„ä¹˜ç§¯æœ€å¤§åŒ–ã€‚ è¿”å›ä½ å¯ä»¥è·å¾—çš„æœ€å¤§ä¹˜ç§¯ã€‚ä½ å¯ä»¥å‡è®¾ n ä¸å°äº 2 ä¸”ä¸å¤§äº 58</p>
<img src="/blog/2020/11/11/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92/dp-break-integer.png" class>

<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">è§£é¢˜æ€è·¯ï¼š f(n) &#x3D; f(n-i) + i</span><br><span class="line"></span><br><span class="line">1. å‡è®¾ n &#x3D;&#x3D; 4ï¼Œ åˆ™å¯ä»¥åˆ†å‰²æˆ f(3) + 1ï¼Œf(2) + 2ï¼Œf(1) + 3, æ‰€ä»¥å¾—å‡ºæ–¹ç¨‹ f(n) &#x3D; f(n-i) + iï¼›</span><br><span class="line">   å¾—å‡º i æ—¶çš„æœ€å¤§ä¹˜ç§¯ï¼šMath.max(f(n-i) * i, max)</span><br><span class="line">2. ä»£ç ä¸­ integerBreak(n - i)è¡¨ç¤ºå°†æ¯ä¸€ä¸ªå€¼éƒ½è‡³å°‘åˆ†å‰²n - iæ¬¡ï¼Œè¿˜æœ‰ä¸€ç§æƒ…å†µæ˜¯åªåˆ†å‰²ä¸€æ¬¡ï¼Œn å’Œ n - i, æ‰€ä»¥åŠ ä¸Š i * (n - i)</span><br></pre></td></tr></table></figure>

<ol>
<li>é€’å½’è§£æ³•</li>
</ol>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> integerBreak = <span class="function"><span class="keyword">function</span> (<span class="params">n</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> res = -<span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">1</span>; i &lt; n; i++) &#123;</span><br><span class="line">    <span class="comment">// f(n) = f(n-i) + i</span></span><br><span class="line">    res = <span class="built_in">Math</span>.max(res, i * (n - i), integerBreak(n - i) * i);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> res;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>è®°å¿†åŒ–æœç´¢ + é€’å½’ã€‚è‡ªé¡¶å‘ä¸‹çš„æ–¹æ³•</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> integerBreak = <span class="function"><span class="keyword">function</span> (<span class="params">n</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// åˆå§‹åŒ–é•¿åº¦ä¸ºn+1çš„æ•°ç»„ï¼Œé»˜è®¤å€¼-1ï¼Œå› ä¸ºç”¨åˆ°äº†memo[n]</span></span><br><span class="line">  <span class="keyword">var</span> memo = <span class="built_in">Array</span>(n + <span class="number">1</span>).fill(-<span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> breakInteger(n, memo);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> breakInteger = <span class="function"><span class="keyword">function</span> (<span class="params">n, memo</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> res = -<span class="number">1</span>;</span><br><span class="line">  <span class="comment">// ç›´æ¥è¿”å›ä¸ºnæ—¶å·²è®¡ç®—è¿‡çš„å€¼</span></span><br><span class="line">  <span class="keyword">if</span> (memo[n] != -<span class="number">1</span>) <span class="keyword">return</span> memo[n];</span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">1</span>; i &lt; n; i++) &#123;</span><br><span class="line">    <span class="comment">// f(n) = f(n-i) + i</span></span><br><span class="line">    res = <span class="built_in">Math</span>.max(res, i * (n - i), breakInteger(n - i, memo) * i);</span><br><span class="line">  &#125;</span><br><span class="line">  memo[n] = res;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> res;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>åŠ¨æ€è§„åˆ’</li>
</ol>
<p>è‡ªåº•å‘ä¸Šçš„é—®é¢˜ï¼Œå…ˆè§£å†³æœ€åŸºæœ¬çš„é—®é¢˜</p>
<p>f(2) = f(1) + 1<br>f(3) = f(2) + 1 =&gt; f(1) + 2</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> integerBreak = <span class="function"><span class="keyword">function</span> (<span class="params">n</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> memo = <span class="built_in">Array</span>(n + <span class="number">1</span>).fill(-<span class="number">1</span>);</span><br><span class="line">  <span class="comment">// iä¸º1æ—¶çš„æœ€å¤§ä¹˜ç§¯</span></span><br><span class="line">  memo[<span class="number">1</span>] = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">2</span>; i &lt;= n; i++) &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> j = <span class="number">1</span>; j &lt;= i - <span class="number">1</span>; j++) &#123;</span><br><span class="line">      <span class="comment">// console.log(j, i - j);</span></span><br><span class="line">      memo[i] = <span class="built_in">Math</span>.max(memo[i], j * (i - j), j * memo[i - j]);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> memo[n];</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// æ‰“å°é¡ºåº(è‡ªåº•å‘ä¸Š)ï¼Œå‚è€ƒå›¾ç‰‡</span></span><br><span class="line"><span class="comment">// (+1, 1) (+1, 2) (+2, 1) (+1, 3) (+2, 2) (+3, 1)</span></span><br></pre></td></tr></table></figure>

<h3 id="0-1-èƒŒåŒ…é—®é¢˜"><a href="#0-1-èƒŒåŒ…é—®é¢˜" class="headerlink" title="0-1 èƒŒåŒ…é—®é¢˜"></a>0-1 èƒŒåŒ…é—®é¢˜</h3><p>æœ‰ n ä¸ªå®¹é‡ä¸º c0,c1,c2..cn çš„ç‰©å“ï¼Œæ¯ä¸ªç‰©å“ä»·å€¼åˆ†åˆ«ä¸º v0,v1,v2â€¦vn æ”¾åˆ°æœ€å¤§å®¹é‡ä¸º C çš„èƒŒåŒ…é‡Œï¼Œæ€ä¹ˆæ”¾ä½¿èƒŒåŒ…é‡Œç‰©å“çš„ä»·å€¼æœ€å¤§</p>
<img src="/blog/2020/11/11/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92/01-1.png" class>

<p><b>é¢˜è§£</b><br>F(n, C) å°† n ä¸ªç‰©å“æ”¾è¿›å®¹é‡ä¸º C çš„èƒŒåŒ…ã€‚éœ€è¦è€ƒè™‘ä¸¤ç§æƒ…å†µ</p>
<ol>
<li>ä¸è€ƒè™‘ç¬¬ i ä¸ªç‰©å“</li>
</ol>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">F(i, c) = F(i - <span class="number">1</span>, c);</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>è€ƒè™‘ç¬¬ i ä¸ªç‰©å“</li>
</ol>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// v[i]ï¼šç¬¬iä¸ªç‰©å“çš„ä»·å€¼</span></span><br><span class="line"><span class="comment">// c - w[i]ï¼šæ­¤æ—¶å‰©ä¸‹èƒŒåŒ…çš„å®¹é‡éœ€è¦å‡å»ç¬¬ i ä¸ªç‰©å“å·²ç»å ç”¨çš„å®¹é‡</span></span><br><span class="line">F(i, c) = v[i] + F(i - <span class="number">1</span>, c - w[i]);</span><br></pre></td></tr></table></figure>

<p>ä¸¤ç§æƒ…å†µå–æœ€å¤§å€¼ï¼Œåˆ™æœ‰è½¬ç§»æ–¹ç¨‹</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">F(i, C) = max(F(i - <span class="number">1</span>, c), v(i) + F(i - <span class="number">1</span>, c - w(i)));</span><br></pre></td></tr></table></figure>

<img src="/blog/2020/11/11/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92/01-2.png" class>

<p><b>å®ç°</b></p>
<ol>
<li>é€’å½’å®ç°</li>
</ol>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> capacity = <span class="number">5</span>;</span><br><span class="line"><span class="keyword">var</span> weights = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</span><br><span class="line"><span class="keyword">var</span> values = [<span class="number">6</span>, <span class="number">10</span>, <span class="number">12</span>];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">bestValue</span>(<span class="params">w, v, i, c</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (i &lt; <span class="number">0</span> || c &lt; <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> res = bestValue(w, v, i - <span class="number">1</span>, c);</span><br><span class="line">  <span class="keyword">if</span> (c &gt;= w[i]) res = <span class="built_in">Math</span>.max(res, v[i] + bestValue(w, v, i - <span class="number">1</span>, c - w[i]));</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">bestValue(weights, values, values.length - <span class="number">1</span>, capacity);</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>è®°å¿†åŒ–æœç´¢</li>
</ol>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// i ä¸ªç‰©å“</span></span><br><span class="line"><span class="keyword">var</span> memo = <span class="built_in">Array</span>(values.length).fill(<span class="built_in">Array</span>(capacity + <span class="number">1</span>).fill(-<span class="number">1</span>));</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">bestValue</span>(<span class="params">w, v, i, c</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (i &lt; <span class="number">0</span> || c &lt; <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (memo[i][c] != -<span class="number">1</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> memo[i][c];</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> res = bestValue(w, v, i - <span class="number">1</span>, c);</span><br><span class="line">  <span class="keyword">if</span> (c &gt;= w[i]) res = <span class="built_in">Math</span>.max(res, v[i] + bestValue(w, v, i - <span class="number">1</span>, c - w[i]));</span><br><span class="line"></span><br><span class="line">  memo[i][c] = res;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">bestValue(weights, values, values.length - <span class="number">1</span>, capacity);</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>åŠ¨æ€è§„åˆ’</li>
</ol>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> capacity = <span class="number">5</span>;</span><br><span class="line"><span class="keyword">var</span> weights = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</span><br><span class="line"><span class="keyword">var</span> values = [<span class="number">6</span>, <span class="number">10</span>, <span class="number">12</span>];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">bestValue</span>(<span class="params">w, v, C</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> n = v.length;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (n == <span class="number">0</span>) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">  <span class="comment">// i ä¸ªç‰©å“</span></span><br><span class="line">  <span class="keyword">var</span> memo = <span class="built_in">Array</span>.from(<span class="built_in">Array</span>(n), <span class="function">() =&gt;</span> <span class="built_in">Array</span>(C + <span class="number">1</span>).fill(-<span class="number">1</span>));</span><br><span class="line">  <span class="comment">// è‡ªé¡¶å‘ä¸‹ï¼Œåˆå§‹åŒ–é»˜è®¤å€¼</span></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> j = <span class="number">0</span>; j &lt;= C; j++) &#123;</span><br><span class="line">    memo[<span class="number">0</span>][j] = j &gt;= w[<span class="number">0</span>] ? v[<span class="number">0</span>] : <span class="number">0</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// å¾ªç¯éå†nä¸ªå•†å“</span></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">1</span>; i &lt; n; i++) &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> j = <span class="number">0</span>; j &lt;= C; j++) &#123;</span><br><span class="line">      <span class="comment">// ç¬¬1ç§æƒ…å†µ</span></span><br><span class="line">      memo[i][j] = memo[i - <span class="number">1</span>][j];</span><br><span class="line"></span><br><span class="line">      <span class="keyword">if</span> (j &gt;= w[i]) &#123;</span><br><span class="line">        <span class="comment">// ç¬¬äºŒç§æƒ…å†µï¼Œå–æœ€å¤§å€¼</span></span><br><span class="line">        memo[i][j] = <span class="built_in">Math</span>.max(memo[i][j], v[i] + memo[i - <span class="number">1</span>][j - w[i]]);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> memo[n - <span class="number">1</span>][C];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="æœ€é•¿å…¬å…±å­åºåˆ—"><a href="#æœ€é•¿å…¬å…±å­åºåˆ—" class="headerlink" title="æœ€é•¿å…¬å…±å­åºåˆ—"></a>æœ€é•¿å…¬å…±å­åºåˆ—</h3><p>ç»™å®šä¸€ä¸ªæ— åºçš„æ•´æ•°æ•°ç»„ï¼Œæ‰¾åˆ°å…¶ä¸­æœ€é•¿ä¸Šå‡å­åºåˆ—çš„é•¿åº¦</p>
<p><b>è§£é¢˜æ€è·¯</b></p>
<img src="/blog/2020/11/11/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92/lis.png" class>

<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> lengthOfLIS = <span class="function"><span class="keyword">function</span> (<span class="params">nums</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (nums.length &lt;= <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// é»˜è®¤åªæœ‰ä¸€ä¸ªæœ€é•¿å­åºåˆ—ï¼Œå°±æ˜¯æ•°å€¼æœ¬èº«</span></span><br><span class="line">  <span class="keyword">let</span> memo = <span class="built_in">Array</span>(nums.length).fill(<span class="number">1</span>);</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">1</span>; i &lt; nums.length; i++) &#123;</span><br><span class="line">    <span class="comment">// nums[i]ä»¥å‰ï¼Œæ˜¯å¦æœ‰å°äºnums[i]çš„å€¼</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> j = <span class="number">0</span>; j &lt; i; j++) &#123;</span><br><span class="line">      <span class="keyword">if</span> (nums[i] &gt; nums[j]) &#123;</span><br><span class="line">        memo[i] = <span class="built_in">Math</span>.max(memo[i], <span class="number">1</span> + memo[j]);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">Math</span>.max(...memo);</span><br><span class="line">&#125;;</span><br><span class="line">lengthOfLIS([<span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>, <span class="number">3</span>, <span class="number">2</span>, <span class="number">3</span>]);</span><br></pre></td></tr></table></figure>

<h3 id="æ‰“å®¶åŠ«èˆ"><a href="#æ‰“å®¶åŠ«èˆ" class="headerlink" title="æ‰“å®¶åŠ«èˆ"></a>æ‰“å®¶åŠ«èˆ</h3><p>æ±‚æ‰€æœ‰ä¸ç›¸é‚»çš„æ•´æ•°çš„æœ€å¤§å€¼</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">1</span>];</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> rob = <span class="function">(<span class="params">nums</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// 1. è¾¹ç•Œæ¡ä»¶</span></span><br><span class="line">  <span class="keyword">if</span> (nums == <span class="literal">null</span> || nums.length == <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (nums.length == <span class="number">1</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> nums[<span class="number">0</span>];</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// 2. åˆå§‹åŒ–æ•°ç»„</span></span><br><span class="line">  <span class="keyword">let</span> dp = <span class="built_in">Array</span>(nums.length).fill(<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">  dp[<span class="number">0</span>] = nums[<span class="number">0</span>];</span><br><span class="line">  dp[<span class="number">1</span>] = <span class="built_in">Math</span>.max(nums[<span class="number">0</span>], nums[<span class="number">1</span>]);</span><br><span class="line">  <span class="comment">// 3ï¼š å¾ªç¯</span></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">2</span>; i &lt; nums.length; i++) &#123;</span><br><span class="line">    <span class="comment">// ä¸¤ç§æƒ…å†µï¼Œé€‰æˆ–è€…ä¸é€‰ä¸ºiæ—¶çš„å€¼ã€‚æ±‚ä¸¤ç§æƒ…å†µçš„æœ€å¤§å€¼</span></span><br><span class="line">    dp[i] = <span class="built_in">Math</span>.max(nums[i] + dp[i - <span class="number">2</span>], dp[i - <span class="number">1</span>]);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> dp[nums.length - <span class="number">1</span>];</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> ret = rob(arr);</span><br></pre></td></tr></table></figure>

<h3 id="é›¶é’±å…‘æ¢"><a href="#é›¶é’±å…‘æ¢" class="headerlink" title="é›¶é’±å…‘æ¢"></a>é›¶é’±å…‘æ¢</h3><p>ç»™å®šä¸åŒé¢é¢çš„ç¡¬å¸ coins å’Œä¸€ä¸ªæ€»é‡‘é¢ amountã€‚ç¼–å†™ä¸€ä¸ªå‡½æ•°æ¥è®¡ç®—å¯ä»¥å‡‘æˆæ€»é‡‘é¢æ‰€éœ€çš„æœ€å°‘çš„ç¡¬å¸ä¸ªæ•°ã€‚å¦‚æœæ²¡æœ‰ä»»ä½•ä¸€ç§ç¡¬å¸ç»„åˆèƒ½ç»„æˆæ€»é‡‘é¢ï¼Œè¿”å› Â -1ã€‚</p>
<p>ä½ å¯ä»¥è®¤ä¸ºæ¯ç§ç¡¬å¸çš„æ•°é‡æ˜¯æ— é™çš„ã€‚</p>
<ol>
<li>ç¡®å®šçŠ¶æ€<br>dp[x] æ€»é‡‘é¢ä¸º x æ—¶ï¼Œæ‰€éœ€çš„æœ€å°ç¡¬å¸æ•°<br>dp[x] = min(dp[x - coins[1]] + 1, dp[x])</li>
</ol>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;number&#125;</span> <span class="variable">amount</span></span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;number[]&#125;</span> <span class="variable">coins</span></span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return <span class="type">&#123;number&#125;</span></span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">var</span> change = <span class="function"><span class="keyword">function</span> (<span class="params">amount, coins</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> dp = <span class="built_in">Array</span>(amount + <span class="number">1</span>).fill(<span class="built_in">Number</span>.MAX_VALUE);</span><br><span class="line">  dp[<span class="number">0</span>] = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> currentAmount = <span class="number">1</span>; currentAmount &lt;= amount; currentAmount++) &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> coin <span class="keyword">of</span> coins) &#123;</span><br><span class="line">      <span class="comment">// å‡å»coinåçš„å‰©ä½™é‡‘é¢</span></span><br><span class="line">      <span class="keyword">let</span> leftAmount = currentAmount - coin;</span><br><span class="line">      <span class="comment">// å‰©ä½™é‡‘é¢å°äº0å°±ä¸ç”¨å†ç®—äº†</span></span><br><span class="line">      <span class="keyword">if</span> (leftAmount &lt; <span class="number">0</span> || dp[leftAmount] == <span class="built_in">Number</span>.MAX_VALUE) <span class="keyword">continue</span>;</span><br><span class="line">      dp[currentAmount] = <span class="built_in">Math</span>.min(<span class="number">1</span> + dp[leftAmount], dp[currentAmount]);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> dp[amount] == <span class="built_in">Number</span>.MAX_VALUE ? -<span class="number">1</span> : dp[amount];</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>ç®—æ³•</category>
      </categories>
  </entry>
  <entry>
    <title>æœ€è¿‘åšionicæœ‰ä¸€äº›æƒ³æ³•</title>
    <url>/blog/2020/10/21/%E6%9C%80%E8%BF%91%E5%81%9Aionic%E6%9C%89%E4%B8%80%E4%BA%9B%E6%83%B3%E6%B3%95/</url>
    <content><![CDATA[<p>é™æ€èµ„æºæœ‰ä¸¤ç§è®¿é—®å½¢å¼</p>
<ol>
<li>æ ¹æ®æœåŠ¡å™¨æ ¹ç›®å½•åŠ è½½ï¼Œé€‚ç”¨äº history æ¨¡å¼ä½¿ç”¨ï¼Œå¦‚ï¼š</li>
</ol>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- http://localhost:4000/project/add --&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- http://localhost:4000/project/update --&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;/static/js/4.01604861.chunk.js&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ol start="2">
<li>æ ¹æ®é¡¹ç›®å½“å‰è®¿é—®è·¯å¾„ç›¸å¯¹ä½ç½®åŠ è½½,é€‚ç”¨ä½¿ç”¨ useHash æ¨¡å¼æ—¶çš„æƒ…å†µ</li>
</ol>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- http://localhost:4000/#/project/update --&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;./static/js/4.01604861.chunk.js&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>è®°å½•ä¸€æ—¶çš„æƒ³æ³•ï¼Œå¦‚è¿‡æè¿°æœ‰è¯¯ï¼Œè¯·è”ç³»æˆ‘</p>
</blockquote>
]]></content>
      <categories>
        <category>å‰ç«¯</category>
      </categories>
      <tags>
        <tag>ionic</tag>
      </tags>
  </entry>
  <entry>
    <title>æ­£åˆ™è¡¨è¾¾å¼</title>
    <url>/blog/2020/12/03/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/</url>
    <content><![CDATA[<h3 id="å…ƒå­—ç¬¦"><a href="#å…ƒå­—ç¬¦" class="headerlink" title="å…ƒå­—ç¬¦"></a>å…ƒå­—ç¬¦</h3><p>æ™®é€šå…ƒå­—ç¬¦</p>
<table>
<thead>
<tr>
<th>å­—ç¬¦</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody><tr>
<td>\s</td>
<td>åŒ¹é…ä»»ä½•ç©ºç™½å­—ç¬¦ï¼ŒåŒ…æ‹¬ç©ºæ ¼ã€åˆ¶è¡¨ç¬¦ã€æ¢é¡µç¬¦</td>
</tr>
<tr>
<td>\S</td>
<td>åŒ¹é…ä»»ä½•éç©ºç™½å­—ç¬¦</td>
</tr>
<tr>
<td>\b</td>
<td>åŒ¹é…å•è¯è¾¹ç•Œ</td>
</tr>
<tr>
<td>\B</td>
<td>åŒ¹é…éå•è¯è¾¹ç•Œ</td>
</tr>
<tr>
<td>\t</td>
<td>åŒ¹é…ä¸€ä¸ªåˆ¶è¡¨ç¬¦</td>
</tr>
<tr>
<td>\d</td>
<td>åŒ¹é…ä¸€ä¸ªæ•°å­—</td>
</tr>
<tr>
<td>\D</td>
<td>åŒ¹é…ä¸€ä¸ªéæ•°å­—</td>
</tr>
<tr>
<td>\w</td>
<td>åŒ¹é…ä¸€ä¸ªæ•°å­—ã€å­—æ¯ã€ä¸‹åˆ’çº¿</td>
</tr>
<tr>
<td>\W</td>
<td>åŒ¹é…ä¸€ä¸ªéæ•°å­—ã€å­—æ¯ã€ä¸‹åˆ’çº¿</td>
</tr>
<tr>
<td>\f</td>
<td>åŒ¹é…ä¸€ä¸ªæ¢é¡µç¬¦</td>
</tr>
<tr>
<td>\n</td>
<td>åŒ¹é…ä¸€ä¸ªæ¢è¡Œç¬¦</td>
</tr>
<tr>
<td>\r</td>
<td>åŒ¹é…ä¸€ä¸ªå›è½¦ç¬¦</td>
</tr>
<tr>
<td>.(ç‚¹)</td>
<td>åŒ¹é…ä¸€ä¸ªéæ¢è¡Œçš„ä»»æ„å­—ç¬¦</td>
</tr>
</tbody></table>
<p>é™å®šå…ƒå­—ç¬¦</p>
<table>
<thead>
<tr>
<th>å­—ç¬¦</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody><tr>
<td>*</td>
<td>åŒ¹é… 0 æ¬¡æˆ–å¤šæ¬¡</td>
</tr>
<tr>
<td>+</td>
<td>åŒ¹é… 1 æ¬¡æˆ–å¤šæ¬¡</td>
</tr>
<tr>
<td>?</td>
<td>åŒ¹é… 0 æ¬¡æˆ– 1 æ¬¡</td>
</tr>
<tr>
<td>^</td>
<td>åŒ¹é…è¾“å…¥å­—ç¬¦ä¸²çš„å¼€å§‹ä½ç½®</td>
</tr>
<tr>
<td>$</td>
<td>åŒ¹é…è¾“å…¥å­—ç¬¦ä¸²çš„ç»“æŸä½ç½®</td>
</tr>
<tr>
<td>x|y</td>
<td>åŒ¹é… x æˆ– y</td>
</tr>
<tr>
<td>{n}</td>
<td>åŒ¹é… n æ¬¡</td>
</tr>
<tr>
<td>{n,}</td>
<td>è‡³å°‘åŒ¹é… n æ¬¡ æˆ–å¤šæ¬¡</td>
</tr>
<tr>
<td>{n,m}</td>
<td>åŒ¹é… n æ¬¡ åˆ° m æ¬¡</td>
</tr>
<tr>
<td>[a-z]</td>
<td>åŒ¹é… a-z èŒƒå›´å†…çš„å­—ç¬¦</td>
</tr>
<tr>
<td>[xyz]</td>
<td>åŒ¹é… åŒ…å«çš„ä»»ä¸€å­—ç¬¦</td>
</tr>
<tr>
<td>^[xyz]</td>
<td>åŒ¹é… æœªåŒ…å«çš„ä»»ä¸€å­—ç¬¦</td>
</tr>
<tr>
<td>(pattern)</td>
<td>åŒ¹é… å¹¶è·å–å­—ç¬¦</td>
</tr>
<tr>
<td>(?:pattern)</td>
<td>åŒ¹é… patternï¼Œä½†ä¸è¿”å›ç»“æœ</td>
</tr>
<tr>
<td>(?=pattern)</td>
<td>æ­£å‘è‚¯å®šå®šé¢„æŸ¥ï¼Œä¸è·å–ç»“æœ</td>
</tr>
<tr>
<td>(?!pattern)</td>
<td>æ­£å‘å¦å®šé¢„æŸ¥ï¼Œä¸è‚¯å®šé¢„æŸ¥æ­£å¥½ç›¸åï¼Œä¸è·å–ç»“æœ</td>
</tr>
<tr>
<td>(?&lt;=pattern)</td>
<td>åå‘è‚¯å®šé¢„æŸ¥</td>
</tr>
<tr>
<td>(?&lt;!pattern)</td>
<td>åå‘å¦å®šé¢„æŸ¥</td>
</tr>
</tbody></table>
<h3 id="ä¿®é¥°ç¬¦"><a href="#ä¿®é¥°ç¬¦" class="headerlink" title="ä¿®é¥°ç¬¦"></a>ä¿®é¥°ç¬¦</h3><table>
<thead>
<tr>
<th>å­—ç¬¦</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody><tr>
<td>i</td>
<td>ä¸åŒºåˆ†å¤§å°å†™</td>
</tr>
<tr>
<td>g</td>
<td>å…¨å±€åŒ¹é…</td>
</tr>
<tr>
<td>m</td>
<td>å¤šè¡ŒåŒ¹é…</td>
</tr>
<tr>
<td>s</td>
<td>ç‰¹æ®Šå­—ç¬¦åœ†ç‚¹ . åŒ…å«æ¢è¡Œç¬¦ \n</td>
</tr>
</tbody></table>
<h3 id="éè´ªå©ªåŒ¹é…"><a href="#éè´ªå©ªåŒ¹é…" class="headerlink" title="éè´ªå©ªåŒ¹é…"></a>éè´ªå©ªåŒ¹é…</h3><p>åœ¨é™å®šç¬¦ååŠ <code>?</code>ä¸ºéè´ªå©ªåŒ¹é…ï¼ŒåŒ¹é…é•¿åº¦å°½å¯èƒ½å°‘çš„åŒ¹é…ç»“æœ</p>
<table>
<thead>
<tr>
<th>å­—ç¬¦</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody><tr>
<td>*?</td>
<td>åŒ¹é… 0 æ¬¡æˆ–å¤šæ¬¡ï¼Œä½†å°½å¯èƒ½</td>
</tr>
<tr>
<td>+?</td>
<td>åŒ¹é… 1 æ¬¡æˆ–å¤šæ¬¡</td>
</tr>
<tr>
<td>??</td>
<td>åŒ¹é… 0 æ¬¡æˆ– 1 æ¬¡</td>
</tr>
<tr>
<td>{n,}?</td>
<td>è‡³å°‘åŒ¹é… n æ¬¡</td>
</tr>
<tr>
<td>{n,m}?</td>
<td>åŒ¹é… n æ¬¡åˆ° m æ¬¡</td>
</tr>
</tbody></table>
<p><code>*</code>é™å®šç¬¦ï¼Œ åŒ¹é… 0 æ¬¡æˆ–å¤šæ¬¡</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// éå…¨å±€åŒ¹é…</span></span><br><span class="line"><span class="string">&quot;123456abcd&quot;</span>.match(<span class="regexp">/\d*/</span>);</span><br><span class="line"><span class="comment">// [&quot;123456&quot;, index: 0, input: &quot;123456abcd&quot;, groups: undefined]</span></span><br><span class="line"><span class="string">&quot;123456abcd&quot;</span>.match(<span class="regexp">/\d*?/</span>);</span><br><span class="line"><span class="comment">// [&quot;&quot;, index: 0, input: &quot;123456abcd&quot;, groups: undefined]</span></span><br><span class="line"><span class="comment">// å…¨å±€åŒ¹é…</span></span><br><span class="line"><span class="string">&quot;123456abcd&quot;</span>.match(<span class="regexp">/\d*?/g</span>);</span><br><span class="line"><span class="comment">// [&quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;]</span></span><br><span class="line"><span class="string">&quot;123456abcd&quot;</span>.match(<span class="regexp">/\d*/g</span>);</span><br><span class="line"><span class="comment">// [&quot;123456&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;]</span></span><br></pre></td></tr></table></figure>

<p><code>+</code>é™å®šç¬¦ï¼ŒåŒ¹é… 1 æ¬¡æˆ–å¤šæ¬¡</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// åŒ¹é…ç»“æœå°½å¯èƒ½å°‘</span></span><br><span class="line"><span class="string">&quot;123456abcd&quot;</span>.match(<span class="regexp">/\d+/</span>);</span><br><span class="line"><span class="comment">// [&quot;123456&quot;, index: 0, input: &quot;123456abcd&quot;, groups: undefined]</span></span><br><span class="line"><span class="string">&quot;123456abcd&quot;</span>.match(<span class="regexp">/\d+?/</span>);</span><br><span class="line"><span class="comment">// [&quot;1&quot;, index: 0, input: &quot;123456abcd&quot;, groups: undefined]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// å…¨å±€åŒ¹é…</span></span><br><span class="line"><span class="string">&quot;123456abcd&quot;</span>.match(<span class="regexp">/\d+?/g</span>);</span><br><span class="line"><span class="comment">// [&quot;1&quot;, &quot;2&quot;, &quot;3&quot;, &quot;4&quot;, &quot;5&quot;, &quot;6&quot;]</span></span><br><span class="line"><span class="string">&quot;123456abcd&quot;</span>.match(<span class="regexp">/\d+/g</span>);</span><br><span class="line"><span class="comment">// [&quot;123456&quot;]</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;123456abcd1234&quot;</span>.match(<span class="regexp">/\d+/g</span>);</span><br><span class="line"><span class="comment">// [&quot;123456&quot;, &quot;1234&quot;]</span></span><br></pre></td></tr></table></figure>

<p><code>?</code>é™å®šç¬¦ï¼ŒåŒ¹é… 0 æ¬¡æˆ– 1 æ¬¡</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="string">&quot;123456abcd&quot;</span>.match(<span class="regexp">/\d??/</span>);</span><br><span class="line"><span class="comment">// [&quot;&quot;, index: 0, input: &quot;123456abcd&quot;, groups: undefined]</span></span><br><span class="line"><span class="string">&quot;123456abcd&quot;</span>.match(<span class="regexp">/\d?/</span>);</span><br><span class="line"><span class="comment">// [&quot;1&quot;, index: 0, input: &quot;123456abcd&quot;, groups: undefined]</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;123456abcd&quot;</span>.match(<span class="regexp">/\d??/g</span>);</span><br><span class="line"><span class="comment">// Â [&quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;]</span></span><br><span class="line"><span class="string">&quot;123456abcd&quot;</span>.match(<span class="regexp">/\d?/g</span>);</span><br><span class="line"><span class="comment">// [&quot;123456&quot;]</span></span><br></pre></td></tr></table></figure>

<h3 id="ç¤ºä¾‹ï¼ˆjsï¼‰"><a href="#ç¤ºä¾‹ï¼ˆjsï¼‰" class="headerlink" title="ç¤ºä¾‹ï¼ˆjsï¼‰"></a>ç¤ºä¾‹ï¼ˆjsï¼‰</h3><p>(pattern)ï¼šåŒ¹é… patternï¼Œå¹¶ä¸”è·å–åŒ¹é…ç»“æœ</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="string">&quot;3window 7window 8window&quot;</span>.match(<span class="regexp">/(3|7)window/g</span>);</span><br><span class="line"><span class="comment">// [&quot;3window&quot;, &quot;7window&quot;]</span></span><br></pre></td></tr></table></figure>

<p>(?:pattern)</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="string">&quot;window3 window7 window8&quot;</span>.match(<span class="regexp">/window(?:3|7)/g</span>);</span><br><span class="line"><span class="comment">// [&quot;window3&quot;, &quot;window7&quot;]</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;window3 window5&quot;</span>.match(<span class="regexp">/window(?:3|7)/</span>);</span><br><span class="line"><span class="comment">// [&quot;window3&quot;, index: 0, input: &quot;window3 window5&quot;, groups: undefined]</span></span><br></pre></td></tr></table></figure>

<p>(?=pattern)ï¼šæ­£å‘è‚¯å®šé¢„æŸ¥</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// åŒ¹é…åˆ°äº†window3 window7 ä¸­çš„ window ä½†ä¸åŒ¹é… window8</span></span><br><span class="line"><span class="string">&quot;window3 window7 window8&quot;</span>.match(<span class="regexp">/window(?=3|7)/g</span>);</span><br><span class="line"><span class="comment">// [&quot;window&quot;, &quot;window&quot;]</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;window3 window7 window8&quot;</span>.match(<span class="regexp">/window(?=3|7|8)/g</span>);</span><br><span class="line"><span class="comment">// Â [&quot;window&quot;, &quot;window&quot;, &quot;window&quot;]</span></span><br></pre></td></tr></table></figure>

<p>(?!pattern)ï¼šæ­£å‘å¦å®šé¢„æŸ¥ï¼Œä¸è‚¯å®šé¢„æŸ¥æ­£å¥½ç›¸å</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// åŒ¹é…åˆ°äº†window8 ä¸­çš„ window ä½†ä¸åŒ¹é… window3 window7</span></span><br><span class="line"><span class="string">&quot;window3 window7 window8&quot;</span>.match(<span class="regexp">/window(?!3|7)/g</span>);</span><br><span class="line"><span class="comment">// [&quot;window&quot;]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// åŒ¹é…åˆ°äº†window7 window8 ä¸­çš„ window ä½†ä¸åŒ¹é… window3 window7</span></span><br><span class="line"><span class="string">&quot;window3 window7 window8&quot;</span>.match(<span class="regexp">/window(?!3)/g</span>);</span><br><span class="line"><span class="comment">// Â [&quot;window&quot;, &quot;window&quot;]</span></span><br></pre></td></tr></table></figure>

<p>(?&lt;=pattern): åå‘è‚¯å®šé¢„æŸ¥ï¼Œä¸æ­£å‘è‚¯å®šé¢„æŸ¥ï¼ŒåŒ¹é…æ–¹å‘ç›¸å</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// åŒ¹é…åˆ°äº†window8 ä¸­çš„ window ä½†ä¸åŒ¹é… window3 window7</span></span><br><span class="line"><span class="string">&quot;3window 7window 8window&quot;</span>.match(<span class="regexp">/(?&lt;=3|7)window/g</span>);</span><br><span class="line"><span class="comment">// [&quot;window&quot;, &quot;window&quot;]</span></span><br></pre></td></tr></table></figure>

<p>(?&lt;!pattern): åå‘å¦å®šé¢„æŸ¥</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// åŒ¹é…åˆ°äº†window8 ä¸­çš„ window ä½†ä¸åŒ¹é… window3 window7</span></span><br><span class="line"><span class="string">&quot;3window 7window 8window&quot;</span>.match(<span class="regexp">/(?&lt;!3|7)window/g</span>);</span><br><span class="line"><span class="comment">// [&quot;window&quot;]</span></span><br></pre></td></tr></table></figure>

<h3 id="å¸¸ç”¨è¡¨è¾¾å¼"><a href="#å¸¸ç”¨è¡¨è¾¾å¼" class="headerlink" title="å¸¸ç”¨è¡¨è¾¾å¼"></a>å¸¸ç”¨è¡¨è¾¾å¼</h3><p>åŒ¹é…æ•°å­—</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">^[0-9]*$</span><br></pre></td></tr></table></figure>

<blockquote><p>content</p>
<footer><strong>[author[</strong><cite>source]] [link] [source_link_title]</cite></footer></blockquote>]]></content>
      <tags>
        <tag>æ­£åˆ™è¡¨è¾¾å¼</tag>
      </tags>
  </entry>
  <entry>
    <title>é«˜é˜¶å‡½æ•°</title>
    <url>/blog/2020/11/16/%E9%AB%98%E9%98%B6%E5%87%BD%E6%95%B0/</url>
    <content><![CDATA[<h3 id="é«˜é˜¶å‡½æ•°ï¼ˆhigher-order-functionï¼‰"><a href="#é«˜é˜¶å‡½æ•°ï¼ˆhigher-order-functionï¼‰" class="headerlink" title="é«˜é˜¶å‡½æ•°ï¼ˆhigher order functionï¼‰"></a>é«˜é˜¶å‡½æ•°ï¼ˆhigher order functionï¼‰</h3><p>é«˜é˜¶å‡½æ•°çš„ç‰¹ç‚¹ï¼š å…¥å‚æ˜¯å‡½æ•°ï¼Œ æˆ‘ä»¬å¸¸ç”¨çš„é«˜é˜¶å‡½æ•°æœ‰ mapã€filterã€reduceã€sort</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>].map(<span class="function">(<span class="params">a</span>) =&gt;</span> a * <span class="number">2</span>);</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">subFunc1</span>(<span class="params">props</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&quot;subFunc1, props.name);</span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">function subFunc2(props) &#123;</span></span><br><span class="line"><span class="string">  console.log(&quot;</span>subFunc2:<span class="string">&quot;, props.name);</span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">function wrapWithUser(func) &#123;</span></span><br><span class="line"><span class="string">  let person = &#123; name: &quot;</span>currrent user<span class="string">&quot; &#125;;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  return () =&gt; func(person);</span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string">// ä¼ å‚</span></span><br><span class="line"><span class="string">function wrapWithUserParams(params) &#123;</span></span><br><span class="line"><span class="string">  return (func) =&gt; &#123;</span></span><br><span class="line"><span class="string">    func(params);</span></span><br><span class="line"><span class="string">  &#125;;</span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string">// æ— å‚</span></span><br><span class="line"><span class="string">wrapWithUser(subFunc1)();</span></span><br><span class="line"><span class="string">wrapWithUser(subFunc2)();</span></span><br><span class="line"><span class="string">// å¸¦å‚</span></span><br><span class="line"><span class="string">wrapWithUserParams(&#123; name: &quot;</span>func1<span class="string">&quot; &#125;)(subFunc1);</span></span><br><span class="line"><span class="string">wrapWithUserParams(&#123; name: &quot;</span>func2<span class="string">&quot; &#125;)(subFunc2);</span></span><br></pre></td></tr></table></figure>

<h3 id="React-ä¸­çš„é«˜é˜¶ç»„ä»¶"><a href="#React-ä¸­çš„é«˜é˜¶ç»„ä»¶" class="headerlink" title="React ä¸­çš„é«˜é˜¶ç»„ä»¶"></a>React ä¸­çš„é«˜é˜¶ç»„ä»¶</h3><p>æˆ‘ä»¬æœ€å¸¸è§çš„åº”è¯¥æ˜¯ React ä¸­é«˜é˜¶ç»„ä»¶ï¼Œå…¶å®å°±æ˜¯é«˜é˜¶å‡½æ•°çš„åº”ç”¨ã€‚</p>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">interface</span> State &#123;</span><br><span class="line">  name: <span class="built_in">string</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> wrapWithUserName = <span class="function">(<span class="params">WrappedComponent: <span class="built_in">any</span></span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="class"><span class="keyword">class</span> <span class="keyword">extends</span> <span class="title">Component</span>&lt;<span class="title">any</span>, <span class="title">any</span>&gt; </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> state: State = &#123;</span><br><span class="line">      name: <span class="string">&quot;&quot;</span>,</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="title">componentWillMount</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">      <span class="keyword">const</span> name = <span class="built_in">localStorage</span>.getItem(<span class="string">&quot;name&quot;</span>);</span><br><span class="line">      <span class="built_in">this</span>.setState(&#123; name &#125;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="title">render</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">WrappedComponent</span> <span class="attr">name</span>=<span class="string">&#123;this.state.name&#125;</span> &#123;<span class="attr">...this.props</span>&#125; /&gt;</span></span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>React ç»„ä»¶åŠ«æŒ</p>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">hijackHoc</span>&lt;<span class="title">T</span> <span class="title">extends</span> </span>&#123; <span class="keyword">new</span> (...args: <span class="built_in">any</span>[]): <span class="built_in">any</span> &#125;&gt;(</span><br><span class="line">  component: T</span><br><span class="line">) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="class"><span class="keyword">class</span> <span class="keyword">extends</span> <span class="title">component</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="title">handleClick</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">      <span class="built_in">super</span>.handleClick();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="title">render</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">      <span class="keyword">const</span> paranet = <span class="built_in">super</span>.render();</span><br><span class="line"></span><br><span class="line">      <span class="keyword">return</span> React.cloneElement(parent, &#123;</span><br><span class="line">        onClick: <span class="function">() =&gt;</span> <span class="built_in">this</span>.handleClick(),</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>React é«˜é˜¶ç»„ä»¶ä½¿ç”¨æ–¹æ³•</p>
<ol>
<li>ç”¨è£…é¥°å™¨</li>
</ol>
<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line">@hijackHoc</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">HijackComponent</span> <span class="keyword">extends</span> <span class="title">Component</span>&lt;<span class="title">Props</span>, <span class="title">State</span>&gt; </span>&#123;</span><br><span class="line">  state: State = &#123;</span><br><span class="line">    width: <span class="number">70</span>,</span><br><span class="line">    height: <span class="number">90</span>,</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  handleClick = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.setState(&#123;</span><br><span class="line">      weight: <span class="built_in">this</span>.state.weight! + <span class="number">1</span>,</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="title">render</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">onClick</span>=<span class="string">&#123;this.handleClick&#125;</span>&gt;</span>hello world<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ol start="2">
<li>ä¼ å‚æ–¹å¼ï¼Œå‚è€ƒé«˜é˜¶å‡½æ•°ç”¨æ³•</li>
</ol>
]]></content>
      <tags>
        <tag>é«˜é˜¶å‡½æ•°</tag>
        <tag>é«˜é˜¶ç»„ä»¶</tag>
      </tags>
  </entry>
  <entry>
    <title>ubuntu</title>
    <url>/blog/2021/06/18/ubuntu/</url>
    <content><![CDATA[<blockquote>
<p>è®°å½•ä¸€äº›ç”¨è¿‡çš„å‘½ä»¤</p>
</blockquote>
<h2 id="å¸¸ç”¨å‘½ä»¤"><a href="#å¸¸ç”¨å‘½ä»¤" class="headerlink" title="å¸¸ç”¨å‘½ä»¤"></a>å¸¸ç”¨å‘½ä»¤</h2><h3 id="top"><a href="#top" class="headerlink" title="top"></a>top</h3><p>ç›‘å¬è¿›ç¨‹çš„è¿è¡ŒçŠ¶æ€ï¼Œå¯ç”¨æ¥æŸ¥çœ‹è¿›ç¨‹è¿è¡ŒçŠ¶å†µï¼Œå†…å­˜å ç”¨ï¼ŒPID ç­‰ç›¸å…³ä¿¡æ¯</p>
<h3 id="kill"><a href="#kill" class="headerlink" title="kill"></a>kill</h3><p>ç»“æŸæŸä¸€è¿›ç¨‹</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">kill -9 [PID]</span><br></pre></td></tr></table></figure>

<h3 id="ls"><a href="#ls" class="headerlink" title="ls"></a>ls</h3><p>æ˜¾ç¤ºæŒ‡å®šç›®å½•ä¸‹çš„å†…å®¹ï¼ŒåŒ…æ‹¬ç›®å½•å’Œæ–‡ä»¶</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">-a æ˜¾ç¤ºæ‰€æœ‰æ–‡ä»¶å’Œç›®å½•ï¼ŒåŒ…æ‹¬éšè—çš„æ–‡ä»¶</span><br><span class="line">-t æ ¹æ®åˆ›å»ºæ—¶é—´æ’åº</span><br><span class="line">-r ç›¸åæ¬¡åºæ’åº</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">ls &#x2F;proc&#x2F;[PID]&#x2F;exe æŸ¥çœ‹è¿›ç¨‹çš„æ‰§è¡Œå‘½ä»¤æ–‡ä»¶</span><br><span class="line">ls &#x2F;proc&#x2F;[PID]&#x2F;cwd è¿›ç¨‹å·¥ä½œç›®å½•</span><br><span class="line">ls &#x2F;proc&#x2F;[PID]&#x2F;mem è¿›ç¨‹ä½¿ç”¨çš„å†…å­˜</span><br><span class="line">...</span><br></pre></td></tr></table></figure>

<h3 id="ll"><a href="#ll" class="headerlink" title="ll"></a>ll</h3><p>æ˜¾ç¤ºæŒ‡å®šç›®å½•ä¸‹,æ¯ä¸€ä¸ªç›®å½•å’Œæ–‡ä»¶çš„è¯¦ç»†ä¿¡æ¯ï¼ŒåŒ…æ‹¬çŠ¶æ€ã€æƒé™ç­‰</p>
<h3 id="cat"><a href="#cat" class="headerlink" title="cat"></a>cat</h3><p>æŸ¥çœ‹æ–‡ä»¶å†…å®¹</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">-n æ˜¾ç¤ºè¡Œå·</span><br><span class="line">-b ç©ºè¡Œä¸å‚ä¸ç¼–å·</span><br></pre></td></tr></table></figure>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> æ˜¾ç¤ºæ–‡ä»¶ä¸­åŒ…å«linuxå­—ç¬¦çš„å†…å®¹</span></span><br><span class="line">cat readme.md | grep linux</span><br></pre></td></tr></table></figure>

<h3 id="apt-get"><a href="#apt-get" class="headerlink" title="apt-get"></a>apt-get</h3><p>ubuntu è½¯ä»¶åŒ…ç®¡ç†å‘½ä»¤</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">apt-get udpate åˆ—å‡ºæ‰€æœ‰å¯æ›´æ–°çš„è½¯ä»¶</span><br><span class="line">apt-get install git å®‰è£…gitè½¯ä»¶</span><br><span class="line">apt-get remove git å¸è½½gitè½¯ä»¶</span><br></pre></td></tr></table></figure>

<h2 id="é•œåƒæº"><a href="#é•œåƒæº" class="headerlink" title="é•œåƒæº"></a>é•œåƒæº</h2><p>é•œåƒæºæ›¿æ¢</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> å¤‡ä»½</span></span><br><span class="line">cp /etc/apt/sources.list /etc/apt/sources.list.bak</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> æ›¿æ¢</span></span><br><span class="line">vim /etc/apt/sources.list</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> æ›´æ–°è½¯ä»¶æ¸…å•</span></span><br><span class="line">apt-get udpate</span><br></pre></td></tr></table></figure>
<p>é˜¿é‡Œäº‘</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">deb http:&#x2F;&#x2F;mirrors.aliyun.com&#x2F;ubuntu&#x2F; bionic main restricted universe multiverse</span><br><span class="line">deb http:&#x2F;&#x2F;mirrors.aliyun.com&#x2F;ubuntu&#x2F; bionic-security main restricted universe multiverse</span><br><span class="line">deb http:&#x2F;&#x2F;mirrors.aliyun.com&#x2F;ubuntu&#x2F; bionic-updates main restricted universe multiverse</span><br><span class="line">deb http:&#x2F;&#x2F;mirrors.aliyun.com&#x2F;ubuntu&#x2F; bionic-proposed main restricted universe multiverse</span><br><span class="line">deb http:&#x2F;&#x2F;mirrors.aliyun.com&#x2F;ubuntu&#x2F; bionic-backports main restricted universe multiverse</span><br><span class="line">deb-src http:&#x2F;&#x2F;mirrors.aliyun.com&#x2F;ubuntu&#x2F; bionic main restricted universe multiverse</span><br><span class="line">deb-src http:&#x2F;&#x2F;mirrors.aliyun.com&#x2F;ubuntu&#x2F; bionic-security main restricted universe multiverse</span><br><span class="line">deb-src http:&#x2F;&#x2F;mirrors.aliyun.com&#x2F;ubuntu&#x2F; bionic-updates main restricted universe multiverse</span><br><span class="line">deb-src http:&#x2F;&#x2F;mirrors.aliyun.com&#x2F;ubuntu&#x2F; bionic-proposed main restricted universe multiverse</span><br><span class="line">deb-src http:&#x2F;&#x2F;mirrors.aliyun.com&#x2F;ubuntu&#x2F; bionic-backports main restricted universe multiverse</span><br></pre></td></tr></table></figure>
<p>æ¸…åæº</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">deb https:&#x2F;&#x2F;mirrors.tuna.tsinghua.edu.cn&#x2F;ubuntu&#x2F; bionic main restricted universe multiverse</span><br><span class="line">deb https:&#x2F;&#x2F;mirrors.tuna.tsinghua.edu.cn&#x2F;ubuntu&#x2F; bionic-updates main restricted universe multiverse</span><br><span class="line">deb https:&#x2F;&#x2F;mirrors.tuna.tsinghua.edu.cn&#x2F;ubuntu&#x2F; bionic-backports main restricted universe multiverse</span><br><span class="line">deb https:&#x2F;&#x2F;mirrors.tuna.tsinghua.edu.cn&#x2F;ubuntu&#x2F; bionic-security main restricted universe multiverse</span><br><span class="line">deb https:&#x2F;&#x2F;mirrors.tuna.tsinghua.edu.cn&#x2F;ubuntu&#x2F; bionic-proposed main restricted universe multiverse</span><br><span class="line">deb-src https:&#x2F;&#x2F;mirrors.tuna.tsinghua.edu.cn&#x2F;ubuntu&#x2F; bionic main restricted universe multiverse</span><br><span class="line">deb-src https:&#x2F;&#x2F;mirrors.tuna.tsinghua.edu.cn&#x2F;ubuntu&#x2F; bionic-updates main restricted universe multiverse</span><br><span class="line">deb-src https:&#x2F;&#x2F;mirrors.tuna.tsinghua.edu.cn&#x2F;ubuntu&#x2F; bionic-backports main restricted universe multiverse</span><br><span class="line">deb-src https:&#x2F;&#x2F;mirrors.tuna.tsinghua.edu.cn&#x2F;ubuntu&#x2F; bionic-security main restricted universe multiverse</span><br><span class="line">deb-src https:&#x2F;&#x2F;mirrors.tuna.tsinghua.edu.cn&#x2F;ubuntu&#x2F; bionic-proposed main restricted universe multiverse</span><br></pre></td></tr></table></figure>
<p>ä¸­ç§‘å¤§</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">deb https:&#x2F;&#x2F;mirrors.ustc.edu.cn&#x2F;ubuntu&#x2F; bionic main restricted universe multiverse</span><br><span class="line">deb https:&#x2F;&#x2F;mirrors.ustc.edu.cn&#x2F;ubuntu&#x2F; bionic-updates main restricted universe multiverse</span><br><span class="line">deb https:&#x2F;&#x2F;mirrors.ustc.edu.cn&#x2F;ubuntu&#x2F; bionic-backports main restricted universe multiverse</span><br><span class="line">deb https:&#x2F;&#x2F;mirrors.ustc.edu.cn&#x2F;ubuntu&#x2F; bionic-security main restricted universe multiverse</span><br><span class="line">deb https:&#x2F;&#x2F;mirrors.ustc.edu.cn&#x2F;ubuntu&#x2F; bionic-proposed main restricted universe multiverse</span><br><span class="line">deb-src https:&#x2F;&#x2F;mirrors.ustc.edu.cn&#x2F;ubuntu&#x2F; bionic main restricted universe multiverse</span><br><span class="line">deb-src https:&#x2F;&#x2F;mirrors.ustc.edu.cn&#x2F;ubuntu&#x2F; bionic-updates main restricted universe multiverse</span><br><span class="line">deb-src https:&#x2F;&#x2F;mirrors.ustc.edu.cn&#x2F;ubuntu&#x2F; bionic-backports main restricted universe multiverse</span><br><span class="line">deb-src https:&#x2F;&#x2F;mirrors.ustc.edu.cn&#x2F;ubuntu&#x2F; bionic-security main restricted universe multiverse</span><br><span class="line">deb-src https:&#x2F;&#x2F;mirrors.ustc.edu.cn&#x2F;ubuntu&#x2F; bionic-proposed main restricted universe multiverse</span><br></pre></td></tr></table></figure>]]></content>
  </entry>
</search>
